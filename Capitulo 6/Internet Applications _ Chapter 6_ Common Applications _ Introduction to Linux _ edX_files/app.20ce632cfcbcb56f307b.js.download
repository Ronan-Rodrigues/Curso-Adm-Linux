(globalThis.webpackChunk_edx_frontend_app_learning=globalThis.webpackChunk_edx_frontend_app_learning||[]).push([[143],{3808:(e,t,r)=>{"use strict";r.d(t,{AN:()=>k,BO:()=>u,GA:()=>g,NJ:()=>y,Ns:()=>v,O_:()=>x,Pj:()=>f,SZ:()=>h,U7:()=>b,WD:()=>j,_5:()=>p,eW:()=>m,g3:()=>w,il:()=>S,yN:()=>O});var s=r(98025),i=r(76079),n=r(84790),o=r(90575),a=r(58408);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const d=(e,t,r)=>{let s=r;for(;s&&e.length>=s;){const t=Math.min(...e),r=e.indexOf(t);e.splice(r,1),s--}let i=0,n=0;return e.length&&(i=(e.reduce(((e,t)=>e+t),0)/e.length).toFixed(2),n=i*t),{averageGrade:i,weightedGrade:n}};async function u(e,t){let r=`${(0,i.getConfig)().LMS_BASE_URL}/api/course_home/course_metadata/${e}`;r=(0,a.$)(r);const{data:o}=await(0,n.kj)().get(r);return function(e,t){const r=(0,s.u3)(e);return l(l({},r),{},{tabs:r.tabs.map((e=>({slug:"courseware"===e.tabId?t:e.tabId,title:e.title,url:e.url}))),isMasquerading:r.originalUserIsStaff&&!r.isStaff})}(o,t)}async function p(e){const t=`${(0,i.getConfig)().LMS_BASE_URL}/api/course_home/dates/${e}`;try{const{data:e}=await(0,n.kj)().get(t);return(0,s.u3)(e)}catch(e){const t=e?.response?.status;if(401===t)return{};if(403===t)return{};throw e}}async function g(e,t){let o=`${(0,i.getConfig)().LMS_BASE_URL}/api/course_home/progress/${e}`;t&&(o+=`/${t}/`);try{const{data:e}=await(0,n.kj)().get(o),t=(0,s.u3)(e);return t.gradingPolicy.assignmentPolicies=function(e,t){const r={};return e.forEach((e=>{r[e.type]={grades:Array(e.numTotal).fill(0),numAssignmentsCreated:0,numTotalExpectedAssignments:e.numTotal}})),t.forEach((e=>{e.subsections.forEach((e=>{if(!(e.hasGradedAssignment&&e.showGrades&&e.numPointsPossible))return;const{assignmentType:t,numPointsEarned:s,numPointsPossible:i}=e;if(!r[t])return;let{numAssignmentsCreated:n}=r[t];n++,n<=r[t].numTotalExpectedAssignments&&r[t].grades.shift(),r[t].grades.push(s?s/i:0),r[t].numAssignmentsCreated=n}))})),e.map((e=>{const{averageGrade:t,weightedGrade:s}=d(r[e.type].grades,e.weight,e.numDroppable);return{averageGrade:t,numDroppable:e.numDroppable,shortLabel:e.shortLabel,type:e.type,weight:e.weight,weightedGrade:s}}))}(t.gradingPolicy.assignmentPolicies,t.sectionScores),t.gradingPolicy.gradeRange=e.grading_policy.grade_range,t.gradesFeatureIsFullyLocked=t.completionSummary.lockedCount>0,t.gradesFeatureIsPartiallyLocked=!1,t.gradesFeatureIsFullyLocked&&t.sectionScores.forEach((e=>{e.subsections.forEach((e=>{null!==e.assignmentType&&e.hasGradedAssignment&&e.showGrades&&(e.numPointsPossible>0||e.numPointsEarned>0)&&e.learnerHasAccess&&(t.gradesFeatureIsPartiallyLocked=!0,t.gradesFeatureIsFullyLocked=!1)}))})),t}catch(t){const s=t?.response?.status;if(404===s)return r.g.location.replace(`${(0,i.getConfig)().LMS_BASE_URL}/courses/${e}/progress`),{};if(401===s)return{};if(403===s)return{};throw t}}async function m(e,t){let r=`${(0,i.getConfig)().LMS_BASE_URL}/api/edx_proctoring/v1/user_onboarding/status?is_learning_mfe=true&course_id=${encodeURIComponent(e)}`;t&&(r+=`&username=${encodeURIComponent(t)}`);try{const{data:e}=await(0,n.kj)().get(r);return e}catch(e){const{httpErrorStatus:t}=e&&e.customAttributes;if(404===t)return{};throw e}}async function f(e){const t=`${(0,i.getConfig)().LMS_BASE_URL}/api/course_live/iframe/${e}/`;try{const{data:e}=await(0,n.kj)().get(t);return e}catch(e){const{httpErrorStatus:t}=e&&e.customAttributes;if(404===t)return{};throw e}}function h(e,t,r){let s=0;return void 0!==e&&(s=Date.parse(e)-(r-(t-r)/2)),s}async function b(e){const t=`${(0,i.getConfig)().LMS_BASE_URL}/api/course_home/outline/${e}`,r=Date.now();let a;try{a=await(0,n.kj)().get(t)}catch(e){const t=e?.response?.status;if(403===t)return{};throw e}const c=Date.now(),{data:l,headers:d}=a,u=(0,s.u3)(l.access_expiration),p=l.can_show_upgrade_sock,g=(0,s.u3)(l.cert_data),m=l.course_blocks?function(e,t){const r={courses:{},sections:{},sequences:{}};return Object.values(t).forEach((t=>{switch(t.type){case"course":r.courses[t.id]={id:e,title:t.display_name,sectionIds:t.children||[],hasScheduledContent:t.has_scheduled_content};break;case"chapter":r.sections[t.id]={complete:t.complete,id:t.id,title:t.display_name,resumeBlock:t.resume_block,sequenceIds:t.children||[],hideFromTOC:t.hide_from_toc};break;case"sequential":r.sequences[t.id]={complete:t.complete,description:t.description,due:t.due,effortActivities:t.effort_activities,effortTime:t.effort_time,icon:t.icon,id:t.id,showLink:!!t.lms_web_url,title:t.display_name,hideFromTOC:t.hide_from_toc,navigationDisabled:t.navigation_disabled};break;default:(0,o.PN)(`Unexpected course block type: ${t.type} with ID ${t.id}.  Expected block types are course, chapter, and sequential.`)}})),Object.values(r.courses).forEach((e=>{Array.isArray(e.sectionIds)&&e.sectionIds.forEach((t=>{r.sections[t].courseId=e.id}))})),Object.values(r.sections).forEach((e=>{Array.isArray(e.sequenceIds)&&e.sequenceIds.forEach((t=>{t in r.sequences?r.sequences[t].sectionId=e.id:(0,o.PN)(`Section ${e.id} has child block ${t}, but that block is not in the list of sequences.`)}))})),r}(e,l.course_blocks.blocks):{},f=(0,s.u3)(l.course_goals),b=(0,s.u3)(l.course_tools),y=(0,s.u3)(l.dates_banner_info),x=(0,s.u3)(l.dates_widget),v=l.enable_proctored_exams;return{accessExpiration:u,canShowUpgradeSock:p,certData:g,courseBlocks:m,courseGoals:f,courseTools:b,datesBannerInfo:y,datesWidget:x,enrollAlert:(0,s.u3)(l.enroll_alert),enrollmentMode:l.enrollment_mode,enableProctoredExams:v,handoutsHtml:l.handouts_html,hasScheduledContent:l.has_scheduled_content,hasEnded:l.has_ended,offer:(0,s.u3)(l.offer),resumeCourse:(0,s.u3)(l.resume_course),timeOffsetMillis:h(d&&d.date,r,c),userHasPassingGrade:l.user_has_passing_grade,verifiedMode:(0,s.u3)(l.verified_mode),welcomeMessageHtml:l.welcome_message_html||""}}async function y(e,t){const r=new URL(`${(0,i.getConfig)().LMS_BASE_URL}/api/course_experience/v1/reset_course_deadlines`);return(0,n.kj)().post(r.href,{course_key:e,research_event_data:{location:`${t}-tab`}})}async function x(e,t,r){const s=new URL(`${(0,i.getConfig)().LMS_BASE_URL}/api/course_home/save_course_goal`);return(0,n.kj)().post(s.href,{course_id:e,days_per_week:t,subscribed_to_reminders:r})}async function v(e){const t=new URL(`${(0,i.getConfig)().LMS_BASE_URL}/api/course_home/dismiss_welcome_message`);await(0,n.kj)().post(t.href,{course_id:e})}async function j(e){const t=new URL(`${(0,i.getConfig)().LMS_BASE_URL}/courses/${e}/generate_user_cert`);await(0,n.kj)().post(t.href)}async function w(e,t){const r=new URL(e.url);return(0,n.kj)().post(r.href,{course_key:e.bodyParams.courseId,research_event_data:t})}async function S(e){const t=new URL(`${(0,i.getConfig)().LMS_BASE_URL}/api/course_home/unsubscribe_from_course_goal/${e}`);return(0,n.kj)().post(t.href).then((e=>(0,s.u3)(e)))}async function O(e){const t=new URL(`${(0,i.getConfig)().LMS_BASE_URL}/courses/${e}/courseware-search/enabled/`),{data:r}=await(0,n.kj)().get(t.href);return{enabled:r.enabled||!1}}async function k(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{page:o,limit:a}=l(l({},{page:0,limit:20}),r),c=new URL(`${(0,i.getConfig)().LMS_BASE_URL}/search/${e}`),d=`search_string=${t}&page_size=${a}&page_index=${o}`,u=await(0,n.kj)().post(c.href,d);return(0,s.u3)(u)}},3800:(e,t,r)=>{"use strict";r.d(t,{DJ:()=>d,I6:()=>m,OQ:()=>p,UO:()=>u,br:()=>i,f7:()=>l,fF:()=>a,lu:()=>c,tE:()=>n,xZ:()=>g});var s=r(29399);const i="loading",n="loaded",o=(0,s.createSlice)({name:"course-home",initialState:{courseStatus:"loading",courseId:null,proctoringPanelStatus:"loading",toastBodyText:null,toastBodyLink:null,toastHeader:"",showSearch:!1},reducers:{fetchProctoringInfoResolved:e=>{e.proctoringPanelStatus=n},fetchTabDenied:(e,t)=>{let{payload:r}=t;e.courseId=r.courseId,e.courseStatus="denied"},fetchTabFailure:(e,t)=>{let{payload:r}=t;e.courseId=r.courseId,e.courseStatus="failed"},fetchTabRequest:(e,t)=>{let{payload:r}=t;e.courseId=r.courseId,e.courseStatus=i},fetchTabSuccess:(e,t)=>{let{payload:r}=t;e.courseId=r.courseId,e.targetUserId=r.targetUserId,e.courseStatus=n},setCallToActionToast:(e,t)=>{let{payload:r}=t;const{header:s,link:i,linkText:n}=r;e.toastBodyLink=i,e.toastBodyText=n,e.toastHeader=s},setShowSearch:(e,t)=>{let{payload:r}=t;e.showSearch=r}}}),{fetchProctoringInfoResolved:a,fetchTabDenied:c,fetchTabFailure:l,fetchTabRequest:d,fetchTabSuccess:u,setCallToActionToast:p,setShowSearch:g}=o.actions,{reducer:m}=o},56925:(e,t,r)=>{"use strict";r.d(t,{dV:()=>w,Al:()=>P,zP:()=>b,xg:()=>j,Yq:()=>v,BN:()=>x,Xe:()=>y,eP:()=>M,CW:()=>S,in:()=>O,qV:()=>k,T5:()=>C});var s=r(90575),i=r(98025),n=r(3808),o=r(56132),a=r(3800);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function l(e,t,r){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?s:s+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const d=r(47221),u=d.object({took:d.number().required(),total:d.number().required(),maxScore:d.number().allow(null),results:d.array().items(d.object({id:d.string(),contentType:d.string(),location:d.array().items(d.string()),url:d.string(),content:d.object({displayName:d.string(),htmlContent:d.string(),transcriptEn:d.string()})}).unknown(!0)).strict()}).unknown(!0).strict(),p="text";function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const f={POST_EVENT:"post_event"};function h(e,t,r,i){return async c=>{c((0,a.DJ)({courseId:e}));try{const s=[(0,n.BO)(e,"outline")];r&&s.push(r(e,i));const[l,d]=await Promise.allSettled(s);if("fulfilled"===l.status&&c((0,o.mS)({modelType:"courseHomeMeta",model:m({id:e},l.value)})),"fulfilled"===d?.status&&c((0,o.mS)({modelType:t,model:m({id:e},d.value)})),"rejected"===l.status)throw l.reason;if(l.value.courseAccess.hasAccess){if("rejected"===d?.status)throw d.reason;c((0,a.UO)({courseId:e,targetUserId:i}))}else c((0,a.lu)({courseId:e}))}catch(t){c((0,a.f7)({courseId:e})),(0,s.H)(t)}}}function b(e){return h(e,"dates",n._5)}function y(e,t){return h(e,"progress",n.GA,parseInt(t,10)||t)}function x(e){return h(e,"outline",n.U7)}function v(e){return h(e,"live",n.Pj)}function j(e){return h(e,"discussion")}function w(e){return async()=>(0,n.Ns)(e)}function S(e){return async()=>(0,n.WD)(e)}function O(e,t,r){return async s=>{(0,n.NJ)(e,t).then((t=>{const{data:i}=t,{header:n,link:o,link_text:c}=i;s(r(e)),s((0,a.OQ)({header:n,link:o,linkText:c}))}))}}async function k(e,t,r){return(0,n.O_)(e,t,r)}function M(e,t){return async r=>{const{research_event_data:s}=e,o=(0,i.u3)(e);o.eventName===f.POST_EVENT&&(0,n.g3)(o.postData,s).then((e=>{const{data:s}=e,{header:i,link:n,link_text:c}=s;r(t(o.postData.bodyParams.courseId)),r((0,a.OQ)({header:i,link:n,linkText:c}))}))}}async function P(e){try{const{enabled:t}=await(0,n.yN)(e);return{enabled:t}}catch(e){return{enabled:!1}}}function C(e,t){return async r=>{const s=new Date;let i,a,d;r((0,o.mS)({modelType:"contentSearchResults",model:{id:e,searchKeyword:t,results:[],errors:void 0,loading:!0}}));try{({data:i}=await(0,n.AN)(e,t)),a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const{error:r,value:s}=u.validate(e);if(r)throw new Error("Error in server response:",r);const i=t?t.toLowerCase().split(" "):[],{took:n,total:o,maxScore:a,results:d}=s,g=d.map((e=>{const{score:t,data:{id:r,content:{displayName:s,htmlContent:n,transcriptEn:o},contentType:a,location:c,url:l}}=e,d=a?.toLowerCase()||p,u=(n||o||"").toLowerCase();let g=0;return i.length&&i.forEach((e=>{g+=u?u.toLowerCase().split(e).length-1:0})),{id:r,title:s||a,type:d,location:c,url:l,contentHits:g,score:t}})),m=d.reduce(((e,t)=>{const r=t?.data?.contentType;if(!r)return e;const s=r.toLowerCase(),i=e.findIndex((e=>e.key===s));if(-1===i)return[...e,{key:s,label:r,count:1}];const n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e[i]);n.count++;const o=e.slice(0);return o[i]=n,o}),[]);return m.sort(((e,t)=>e.key>t.key?1:-1)),{results:g,filters:m,total:o,maxScore:a,ms:n}}(i,t)}catch(e){console.error("Error on Courseware Search: ",e.message),d=e.message}r((0,o.QB)({modelType:"contentSearchResults",model:m(m({},a),{},{id:e,searchKeyword:t,errors:d,loading:!1})}));const g=new Date-s,{took:f,total:h,maxScore:b,accessDeniedCount:y}=i;console.table({"Search Keyword":t,"Client time (ms)":g,"Server time (ms)":f,"Total matches":h,"Max score":b,"Access denied count":y})}}},75737:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});const s=(0,r(93477).vU)({allDates:{id:"learning.outline.dates.all",defaultMessage:"View all course dates",description:"Text anchor for link that redirects to dates or course timeline tab"},casualGoalButtonText:{id:"learning.outline.goalButton.casual.text",defaultMessage:"1 day a week",description:"Text shown for casual goal button"},casualGoalButtonTitle:{id:"learning.outline.goalButton.screenReader.text",defaultMessage:"Casual",description:"A very short description of the least intense of three learning goals"},certAlt:{id:"learning.outline.certificateAlt",defaultMessage:"Example Certificate",description:"Alternate text displayed when the example certificate image cannot be displayed."},collapseAll:{id:"learning.outline.collapseAll",defaultMessage:"Collapse all",description:"Label for button to close all of the collapsible sections"},completedAssignment:{id:"learning.outline.completedAssignment",defaultMessage:"Completed",description:"Text used to describe the green checkmark icon in front of an assignment title"},completedSection:{id:"learning.outline.completedSection",defaultMessage:"Completed section",description:"Text used to describe the green checkmark icon in front of a section title"},hiddenSection:{id:"learning.outline.hiddenSection",defaultMessage:"Hidden in Course Outline, accessible via link",description:"Label for hidden section in course outline"},hiddenSequenceLink:{id:"learning.outline.hiddenSequenceLink",defaultMessage:"Subsections are not navigable between each other, they can only be accessed through their link.",description:"Label for hidden sequence in course outline"},dates:{id:"learning.outline.dates",defaultMessage:"Important dates",description:"Headline for the (summary of dates) section of the outline page"},editGoal:{id:"learning.outline.editGoal",defaultMessage:"Edit goal",description:"Edit course goal button"},expandAll:{id:"learning.outline.expandAll",defaultMessage:"Expand all",description:"Label for button to open all of the collapsible sections"},goal:{id:"learning.outline.goal",defaultMessage:"Goal",description:"Label for the selected course goal"},goalReminderDetail:{id:"learning.outline.goalReminderDetail",defaultMessage:"If we notice you’re not quite at your goal, we’ll send you an email reminder.",description:"It describe to learner what is goal reminder service"},goalUnsure:{id:"learning.outline.goalUnsure",defaultMessage:"Not sure yet"},handouts:{id:"learning.outline.handouts",defaultMessage:"Course Handouts",description:"Header for (Course Handouts) section in course outline"},incompleteAssignment:{id:"learning.outline.incompleteAssignment",defaultMessage:"Incomplete",description:"Text used to describe the gray checkmark icon in front of an assignment title"},incompleteSection:{id:"learning.outline.incompleteSection",defaultMessage:"Incomplete section",description:"Text used to describe the gray checkmark icon in front of a section title"},intenseGoalButtonText:{id:"learning.outline.goalButton.intense.text",defaultMessage:"5 days a week",description:"Text shown for intense goal button"},intenseGoalButtonTitle:{id:"learning.outline.goalButton.intense.title",defaultMessage:"Intense",description:"A very short description of the most intensive option of three learning goals, Casual, Regular and Intense"},learnMore:{id:"learning.outline.learnMore",defaultMessage:"Learn More"},openSection:{id:"learning.outline.altText.openSection",defaultMessage:"Open",description:"A button to open the given section of the course outline"},proctoringInfoPanel:{id:"learning.proctoringPanel.header",defaultMessage:"This course contains proctored exams",description:"Used as a label to indicate that course has proctored exams"},regularGoalButtonText:{id:"learning.outline.goalButton.regular.text",defaultMessage:"3 days a week",description:"Text shown for regular goal button"},regularGoalButtonTitle:{id:"learning.outline.goalButton.regular.title",defaultMessage:"Regular",description:"A very short description of the middle option of three learning goals, Casual, Regular and Intense"},resumeBlurb:{id:"learning.outline.resumeBlurb",defaultMessage:"Pick up where you left off",description:"Text describing to the learner that they can return to the last section they visited within the course."},resume:{id:"learning.outline.resume",defaultMessage:"Resume course",description:"Anchor text for button that would resume course"},setGoal:{id:"learning.outline.setGoal",defaultMessage:"To start, set a course goal by selecting the option below that best describes your learning plan.",description:"In indicate to learner how to set or use the goal reminder service"},setGoalReminder:{id:"learning.outline.setGoalReminder",defaultMessage:"Set a goal reminder",description:"The text for the radio button which activate or deactivate the goal reminder service"},setLearningGoalButtonScreenReaderText:{id:"learning.outline.goalButton.casual.title",defaultMessage:"Set a learning goal style.",description:"screen reader text informing learner they can select an intensity of learning goal"},setWeeklyGoal:{id:"learning.outline.setWeeklyGoal",defaultMessage:"Set a weekly learning goal",description:"The headline for (goal reminder service) section in course outline"},setWeeklyGoalDetail:{id:"learning.outline.setWeeklyGoalDetail",defaultMessage:"Setting a goal motivates you to finish the course. You can always change it later.",description:"It indiacate the gaol or the purpose of the goal reminder service to learners"},start:{id:"learning.outline.start",defaultMessage:"Start course",description:"The text for button which starts the course"},startBlurb:{id:"learning.outline.startBlurb",defaultMessage:"Begin your course today"},tools:{id:"learning.outline.tools",defaultMessage:"Course Tools",description:"Headline for the (course tools) section in course outline. course tool might include links to course bookmarks, financial assistance...etc"},upgradeButton:{id:"learning.outline.upgradeButton",defaultMessage:"Upgrade ({symbol}{price})",description:"Text for the button which redirects to the upgrading page"},upgradeTitle:{id:"learning.outline.upgradeTitle",defaultMessage:"Pursue a verified certificate",description:"Upgrade title"},welcomeMessage:{id:"learning.outline.welcomeMessage",defaultMessage:"Welcome Message"},welcomeMessageShowMoreButton:{id:"learning.outline.welcomeMessageShowMoreButton",defaultMessage:"Show More"},welcomeMessageShowLessButton:{id:"learning.outline.welcomeMessageShowLessButton",defaultMessage:"Show Less"},welcomeTo:{id:"learning.outline.goalWelcome",defaultMessage:"Welcome to",description:"This precedes the title of the course"},notStartedProctoringStatus:{id:"learning.proctoringPanel.status.notStarted",defaultMessage:"Not Started",description:"It indcate that proctortrack onboarding exam hasn’t started yet"},startedProctoringStatus:{id:"learning.proctoringPanel.status.started",defaultMessage:"Started",description:"Label to indicate the starting status of the proctortrack onboarding exam"},submittedProctoringStatus:{id:"learning.proctoringPanel.status.submitted",defaultMessage:"Submitted",description:"Label to indicate the submitted status of proctortrack onboarding exam"},verifiedProctoringStatus:{id:"learning.proctoringPanel.status.verified",defaultMessage:"Verified",description:"Label to indicate the verified status of the proctortrack onboarding exam"},rejectedProctoringStatus:{id:"learning.proctoringPanel.status.rejected",defaultMessage:"Rejected",description:"Label to indicate the rejection status of the proctortrack onboarding exam"},errorProctoringStatus:{id:"learning.proctoringPanel.status.error",defaultMessage:"Error",description:"Label to indicate that there is error in proctortrack onboarding exam"},otherCourseApprovedProctoringStatus:{id:"learning.proctoringPanel.status.otherCourseApproved",defaultMessage:"Approved in Another Course",description:"Label to indicate that the proctortrack onboarding exam is verified based on taking onboarding exam on another course"},expiringSoonProctoringStatus:{id:"learning.proctoringPanel.status.expiringSoon",defaultMessage:"Expiring Soon",description:"A label to indicate that proctortrack onboarding exam will expire soon"},expiredProctoringStatus:{id:"learning.proctoringPanel.status.expired",defaultMessage:"Expired",description:"A label to indicate that proctortrack onboarding exam has expired"},proctoringCurrentStatus:{id:"learning.proctoringPanel.status",defaultMessage:"Current Onboarding Status:",description:"The text that precede the status label of proctortrack onboarding exam"},notStartedProctoringMessage:{id:"learning.proctoringPanel.message.notStarted",defaultMessage:"You have not started your onboarding exam.",description:"The text that explain the meaning of (not started) label of the proctortrack onboarding exam"},startedProctoringMessage:{id:"learning.proctoringPanel.message.started",defaultMessage:"You have started your onboarding exam.",description:"The text that explain the meaning of (started) label of the proctortrack onboarding exam"},submittedProctoringMessage:{id:"learning.proctoringPanel.message.submitted",defaultMessage:"You have submitted your onboarding exam.",description:"The text that explain the meaning of (submitted) label of the proctortrack onboarding exam"},verifiedProctoringMessage:{id:"learning.proctoringPanel.message.verified",defaultMessage:"Your onboarding exam has been approved in this course.",description:"The text that explain the meaning of (verified) label of the proctortrack onboarding exam"},rejectedProctoringMessage:{id:"learning.proctoringPanel.message.rejected",defaultMessage:"Your onboarding exam has been rejected. Please retry onboarding.",description:"The text that explain the meaning of (rejected) label of the proctortrack onboarding exam"},errorProctoringMessage:{id:"learning.proctoringPanel.message.error",defaultMessage:"An error has occurred during your onboarding exam. Please retry onboarding.",description:"The text that explain the meaning of (error) label of the proctortrack onboarding exam"},otherCourseApprovedProctoringMessage:{id:"learning.proctoringPanel.message.otherCourseApproved",defaultMessage:"Your onboarding exam has been approved in another course.",description:"The text that explain the meaning of (approved in another course) label of the proctortrack onboarding exam"},otherCourseApprovedProctoringDetail:{id:"learning.proctoringPanel.detail.otherCourseApproved",defaultMessage:"If your device has changed, we recommend that you complete this course's onboarding exam in order to ensure that your setup still meets the requirements for proctoring.",description:"The text that recommend an action when the status of the proctortrack onboarding exam is (approved in another course)"},expiringSoonProctoringMessage:{id:"learning.proctoringPanel.message.expiringSoon",defaultMessage:"Your onboarding profile has been approved. However, your onboarding status is expiring soon. Please complete onboarding again to ensure that you will be able to continue taking proctored exams.",description:"The text that recommend an action when the status of the proctortrack onboarding exam is (expiring soon)"},expiredProctoringMessage:{id:"learning.proctoringPanel.message.expired",defaultMessage:"Your onboarding status has expired. Please complete onboarding again to continue taking proctored exams.",description:"The text that recommend an action when the status of the proctortrack onboarding exam is (expired)"},proctoringPanelGeneralInfo:{id:"learning.proctoringPanel.generalInfo",defaultMessage:"You must complete the onboarding process prior to taking any proctored exam. ",description:"It indicate key and important fact to learner about the importance of taking proctortrack onboarding exam"},proctoringPanelGeneralInfoSubmitted:{id:"learning.proctoringPanel.generalInfoSubmitted",defaultMessage:"Your submitted profile is in review.",description:"The text that explain the meaning of (in review) label of the proctortrack onboarding exam"},proctoringPanelGeneralTime:{id:"learning.proctoringPanel.generalTime",defaultMessage:"Onboarding profile review can take 2+ business days.",description:"This text explain for how long the (in review) status of the proctortrack onboarding exam might remain"},proctoringOnboardingButton:{id:"learning.proctoringPanel.onboardingButton",defaultMessage:"Complete Onboarding",description:"Text shown on the button that starts the actual proctortrack onboarding exam when it is released"},proctoringOnboardingPracticeButton:{id:"learning.proctoringPanel.onboardingPracticeButton",defaultMessage:"View Onboarding Exam",description:"The text that appears on onboarding exam while its not released, so learners can take or view it as a practice"},proctoringOnboardingButtonNotOpen:{id:"learning.proctoringPanel.onboardingButtonNotOpen",defaultMessage:"Onboarding Opens: {releaseDate}",description:"It indicate when or from when the learner can take the proctortrack onboarding exam"},proctoringReviewRequirementsButton:{id:"learning.proctoringPanel.reviewRequirementsButton",defaultMessage:"Review instructions and system requirements",description:"Anchor text for button which redirect leaner to doc or a detailed page about proctortrack onboarding exam"},proctoringOnboardingButtonPastDue:{id:"learning.proctoringPanel.onboardingButtonPastDue",defaultMessage:"Onboarding Past Due",description:"Text that show when the deadline of proctortrack onboarding exam has passed, it appears on button that start the onboarding exam however for this case the button is disabled for obvious reason"}})},45265:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});const s=(0,r(93477).vU)({notPassingHeader:{id:"progress.certificateStatus.notPassingHeader",defaultMessage:"Certificate status",description:"Header text when learner certifcate status is not passing"},notPassingBody:{id:"progress.certificateStatus.notPassingBody",defaultMessage:"In order to qualify for a certificate, you must have a passing grade.",description:"Body text when learner certifcate status is not passing"},inProgressHeader:{id:"progress.certificateStatus.inProgressHeader",defaultMessage:"More content is coming soon!",description:"Header text when learner certifcate is in progress"},inProgressBody:{id:"progress.certificateStatus.inProgressBody",defaultMessage:"It looks like there is more content in this course that will be released in the future. Look out for email updates or check back on your course for when this content will be available.",description:"Body text when learner certifcate is in progress"},requestableHeader:{id:"progress.certificateStatus.requestableHeader",defaultMessage:"Certificate status",description:"Header text when learner certifcate status is requestable"},requestableBody:{id:"progress.certificateStatus.requestableBody",defaultMessage:"Congratulations, you qualified for a certificate! In order to access your certificate, request it below.",description:"Body text when learner certifcate status is requestable"},requestableButton:{id:"progress.certificateStatus.requestableButton",defaultMessage:"Request certificate",description:"Button text when learner certifcate status is requestable"},unverifiedHeader:{id:"progress.certificateStatus.unverifiedHeader",defaultMessage:"Certificate status",description:"Header text when learner certifcate status is unverified"},unverifiedButton:{id:"progress.certificateStatus.unverifiedButton",defaultMessage:"Verify ID",description:"Button text when learner certifcate status is unverified"},unverifiedPendingBody:{id:"progress.certificateStatus.courseCelebration.verificationPending",defaultMessage:"Your ID verification is pending and your certificate will be available once approved.",description:"Body text when learner certifcate status is unverified pending"},downloadableHeader:{id:"progress.certificateStatus.downloadableHeader",defaultMessage:"Your certificate is available!",description:"Header text when the certifcate is available"},viewableButton:{id:"progress.certificateStatus.viewableButton",defaultMessage:"View my certificate",description:"Button text which view or links to the certifcate"},notAvailableHeader:{id:"progress.certificateStatus.notAvailableHeader",defaultMessage:"Certificate status",description:"Header text when the certifcate is not available"},notAvailableEndDateBody:{id:"progress.certificateBody.notAvailable.endDate",defaultMessage:"Final grades and any earned certificates are scheduled to be available after {endDate}.",description:"Shown for learners who have finished a course before grades and certificates are available."},upgradeHeader:{id:"progress.certificateStatus.upgradeHeader",defaultMessage:"Earn a certificate",description:"Header text when the learner needs to upgrade to earn a certifcate "},upgradeBody:{id:"progress.certificateStatus.upgradeBody",defaultMessage:"You are in an audit track and do not qualify for a certificate. In order to work towards a certificate, upgrade your course today.",description:"Body text when the learner needs to upgrade to earn a certifcate "},upgradeButton:{id:"progress.certificateStatus.upgradeButton",defaultMessage:"Upgrade now",description:"Button text which leaner needs to upgrade to get the certifcate"},unverifiedHomeHeader:{id:"progress.certificateStatus.unverifiedHomeHeader.v2",defaultMessage:"Verify your identity to qualify for a certificate.",description:"Header text when the learner needs to do verification to earn a certifcate "},unverifiedHomeButton:{id:"progress.certificateStatus.unverifiedHomeButton",defaultMessage:"Verify my ID",description:"Button text which leaner needs to do verification to earn a certifcate"},unverifiedHomeBody:{id:"progress.certificateStatus.unverifiedHomeBody",defaultMessage:"In order to generate a certificate for this course, you must complete the ID verification process.",description:"Body text when the learner needs to do verification to earn a certifcate"}})},56107:(e,t,r)=>{"use strict";function s(e){try{if(r.g.localStorage){const t=r.g.localStorage.getItem(e);if(t)return JSON.parse(t)}}catch(e){}return null}function i(e,t){try{r.g.localStorage&&r.g.localStorage.setItem(e,JSON.stringify(t))}catch(e){}}function n(e){try{r.g.localStorage&&r.g.localStorage.removeItem(e)}catch(e){}}function o(e){const t=s(e);return n(e),t}r.d(t,{$o:()=>s,ZL:()=>n,lN:()=>o,qQ:()=>i})},43228:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});const s=(0,r(93477).vU)({close:{id:"general.altText.close",defaultMessage:"Close",description:"Text used as an aria-label to describe closing or dismissing a component"},registerLowercase:{id:"learning.logistration.register",defaultMessage:"register",description:'Text in a link, prompting the user to create an account.  Used in "learning.logistration.alert"'},signInLowercase:{id:"learning.logistration.login",defaultMessage:"sign in",description:'Text in a link, prompting the user to log in.  Used in "learning.logistration.alert"'},signInSentenceCase:{id:"general.signIn.sentenceCase",defaultMessage:"Sign in",description:"Text in a button, prompting the user to log in."}})},56132:(e,t,r)=>{"use strict";function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function n(e,t,r,s){const i=r[s=s??"id"];void 0===e[t]&&(e[t]={}),e[t][i]=r}function o(e,t,r,s){const n=r[s=s??"id"];void 0===e[t]&&(e[t]={}),e[t][n]=i(i({},e[t][n]),r)}function a(e,t,r){void 0===e[t]&&(e[t]={}),delete e[t][r]}r.d(t,{mS:()=>l,dj:()=>u,I6:()=>b,QB:()=>p,z$:()=>g,qn:()=>m,tT:()=>x,bP:()=>v});const c=(0,r(29399).createSlice)({name:"models",initialState:{},reducers:{addModel:(e,t)=>{let{payload:r}=t;const{modelType:s,model:i,idField:o}=r;n(e,s,i,o)},addModels:(e,t)=>{let{payload:r}=t;const{modelType:s,models:i,idField:o}=r;i.forEach((t=>n(e,s,t,o)))},addModelsMap:(e,t)=>{let{payload:r}=t;const{modelType:s,modelsMap:i,idField:o}=r;Object.values(i).forEach((t=>n(e,s,t,o)))},updateModel:(e,t)=>{let{payload:r}=t;const{modelType:s,model:i,idField:n}=r;o(e,s,i,n)},updateModels:(e,t)=>{let{payload:r}=t;const{modelType:s,models:i,idField:n}=r;i.forEach((t=>o(e,s,t,n)))},updateModelsMap:(e,t)=>{let{payload:r}=t;const{modelType:s,modelsMap:i,idField:n}=r;Object.values(i).forEach((t=>o(e,s,t,n)))},removeModel:(e,t)=>{let{payload:r}=t;const{modelType:s,id:i}=r;a(e,s,i)},removeModels:(e,t)=>{let{payload:r}=t;const{modelType:s,ids:i}=r;i.forEach((t=>a(e,s,t)))}}}),{addModel:l,addModels:d,addModelsMap:u,updateModel:p,updateModels:g,updateModelsMap:m,removeModel:f,removeModels:h}=c.actions,{reducer:b}=c;var y=r(92070);function x(e,t){return(0,y.useSelector)((r=>void 0!==r.models[e]&&void 0!==r.models[e][t]?r.models[e][t]:{}),y.shallowEqual)}function v(e,t){return(0,y.useSelector)((r=>t.map((t=>void 0!==r.models[e]&&void 0!==r.models[e][t]?r.models[e][t]:{}))),y.shallowEqual)}},27314:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});const s=r(89526).createContext({})},22778:(e,t,r)=>{"use strict";r.d(t,{CH:()=>s.C,UW:()=>g,h1:()=>i.Z,Dl:()=>s.Z,VY:()=>m});var s=r(13046),i=r(27314),n=r(89526),o=r(2652),a=r.n(o),c=r(13509),l=r(67557);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const p=e=>{let{topic:t,className:r,customAlerts:s,customProps:o}=e;const{remove:a,messages:d}=(0,n.useContext)(i.Z),p=(0,n.useCallback)((e=>void 0!==s[e]?s[e]:c.Z),[s]),g=d.filter((e=>!t||e.topic===t));return 0===g.length?null:(0,l.jsx)("div",{className:r,children:g.map((e=>{const t=p(e.code);return(0,l.jsx)(n.Suspense,{fallback:null,children:(0,l.jsx)(t,u(u({type:e.type,dismissible:e.dismissible,onDismiss:()=>a(e.id),payload:e.payload},o),{},{children:e.text}))},e.id)}))})};p.propTypes={className:a().string,topic:a().string,customAlerts:a().objectOf(a().oneOfType([a().object,a().func,a().node])),customProps:a().object},p.defaultProps={topic:null,className:null,customAlerts:{},customProps:{}};const g=p;function m(e,t){let{code:r,text:s,topic:o,type:a,payload:c,dismissible:l}=t;const{add:d,remove:u}=(0,n.useContext)(i.Z);(0,n.useEffect)((()=>{if(!e)return;const t=d({code:r,text:s,topic:o,type:a,payload:c,dismissible:l});return()=>{u(t)}}),[e,r,s,o,a,c,l])}},58408:(e,t,r)=>{"use strict";r.d(t,{$:()=>s});const s=e=>{const t=Intl.DateTimeFormat().resolvedOptions().timeZone,r=new URL(e);return t&&r.searchParams.append("browser_timezone",t),r.href}},31917:(e,t,r)=>{"use strict";r.r(t),r.d(t,{CERT_STATUS_TYPE:()=>O,default:()=>M}),r(89526);var s=r(2652),i=r.n(s),n=r(93477),o=r(54877),a=r(56549),c=r(48387),l=r(74627),d=r(70586),u=r(92070),p=r(4606),g=r(38918),m=r(85193),f=r(76079),h=r(86615),b=r(84790);const y=(0,n.vU)({certStatusEarnedNotAvailableHeader:{id:"cert.alert.earned.unavailable.header.v2",defaultMessage:"Your grade and certificate status will be available soon.",description:"Header alerting the user that their certificate will be available soon."},certStatusDownloadableHeader:{id:"cert.alert.earned.ready.header",defaultMessage:"Congratulations! Your certificate is ready.",description:"Header alerting the user that their certificate is ready."},certStatusNotPassingHeader:{id:"cert.alert.notPassing.header",defaultMessage:"You are not yet eligible for a certificate"},certStatusNotPassingButton:{id:"cert.alert.notPassing.button",defaultMessage:"View grades"}});var x=r(45265),v=r(56925),j=r(67557);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const O={EARNED_NOT_AVAILABLE:"earned_but_not_available",DOWNLOADABLE:"downloadable",REQUESTING:"requesting",UNVERIFIED:"unverified"},k=e=>{let{intl:t,payload:r}=e;const s=(0,u.useDispatch)(),{certificateAvailableDate:i,certStatus:a,courseEndDate:c,courseId:w,certURL:k,userTimezone:M,org:P,notPassingCourseEnded:C,tabs:T}=r,N=e=>e.children(e),I=e=>{const{administrator:t}=(0,b.IC)();(0,h.hC)(e,{org_key:P,courserun_key:w,is_staff:t})};let _={};switch(a){case O.EARNED_NOT_AVAILABLE:case O.DOWNLOADABLE:case O.REQUESTING:_=(()=>{const e={variant:"success",icon:g.f8,iconClassName:"alert-icon text-success-500"};if(a===O.EARNED_NOT_AVAILABLE){const r=M?{timeZone:M}:{},s=(0,j.jsx)(n.Ji,{value:i,day:"numeric",month:"long",year:"numeric"}),a=(0,j.jsx)(n.Ji,{value:c,day:"numeric",month:"long",year:"numeric"});e.header=t.formatMessage(y.certStatusEarnedNotAvailableHeader),e.body=(0,j.jsx)("p",{children:(0,j.jsx)(o.Z,S({id:"learning.outline.alert.cert.earnedNotAvailable",defaultMessage:"This course ends on {courseEndDateFormatted}. Final grades and any earned certificates are scheduled to be available after {certificateAvailableDate}.",values:{courseEndDateFormatted:a,certificateAvailableDate:s}},r))})}else a===O.DOWNLOADABLE?(e.header=t.formatMessage(y.certStatusDownloadableHeader),e.buttonMessage=t.formatMessage(x.Z.viewableButton),e.buttonVisible=!0,e.buttonLink=k,e.buttonAction=()=>{I("edx.ui.lms.course_outline.certificate_alert_downloadable_button.clicked")}):a===O.REQUESTING&&(e.header=t.formatMessage(y.certStatusDownloadableHeader),e.buttonMessage=t.formatMessage(x.Z.requestableButton),e.buttonVisible=!0,e.buttonLink="",e.buttonAction=()=>{I("edx.ui.lms.course_outline.certificate_alert_request_cert_button.clicked"),s((0,v.CW)(w))});return e})();break;case O.UNVERIFIED:_={variant:"warning",icon:m.eH,iconClassName:"alert-icon text-warning-500",header:t.formatMessage(x.Z.unverifiedHomeHeader),buttonMessage:t.formatMessage(x.Z.unverifiedHomeButton),body:t.formatMessage(x.Z.unverifiedHomeBody),buttonVisible:!0,buttonLink:(0,f.getConfig)().SUPPORT_URL_ID_VERIFICATION,buttonAction:()=>{I("edx.ui.lms.course_outline.certificate_alert_unverified_button.clicked")}};break;default:C&&(_=(()=>{const e=T.find((e=>"progress"===e.slug)),r=e&&e.url;return{header:t.formatMessage(y.certStatusNotPassingHeader),buttonMessage:t.formatMessage(y.certStatusNotPassingButton),body:t.formatMessage(x.Z.notPassingBody),buttonVisible:!0,buttonLink:r,buttonAction:()=>{I("edx.ui.lms.course_outline.certificate_alert_view_grades_button.clicked")}}})())}return(0,j.jsx)(N,S(S({},_),{},{children:e=>{let{variant:t,buttonVisible:r,iconClassName:s,icon:i,header:n,body:o,buttonAction:a,buttonLink:c,buttonMessage:u}=e;return(0,j.jsx)(l.Z,{variant:t,children:(0,j.jsxs)("div",{className:"d-flex flex-column flex-lg-row justify-content-between align-items-center",children:[(0,j.jsxs)("div",{className:r?"col-lg-8":"col-auto",children:[(0,j.jsx)(p.G,{icon:i,className:s}),(0,j.jsx)(l.Z.Heading,{children:n}),o]}),r&&(0,j.jsx)("div",{className:"flex-grow-0 pt-3 pt-lg-0",children:(0,j.jsx)(d.ZP,{variant:"primary",href:c,onClick:()=>{a&&a()},children:u})})]})})}}))};k.propTypes={intl:a.gm.isRequired,payload:i().shape({certificateAvailableDate:i().string,certStatus:i().string,courseEndDate:i().string,courseId:i().string,certURL:i().string,userTimezone:i().string,org:i().string,notPassingCourseEnded:i().bool,tabs:i().arrayOf(i().shape({tab_id:i().string,title:i().string,url:i().string}))}).isRequired};const M=(0,c.Z)(k)},13509:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m}),r(89526);var s=r(2652),i=r.n(s),n=r(74627),o=r(81434),a=r(3054),c=r(42810),l=r(13046),d=r(67557);function u(e){switch(e){case l.C.ERROR:return"warning";case l.C.DANGER:return"danger";case l.C.SUCCESS:return"success";default:return"info"}}function p(e){switch(e){case l.C.ERROR:return o.Z;case l.C.SUCCESS:return a.Z;default:return c.Z}}const g=e=>{let{type:t,dismissible:r,children:s,onDismiss:i,stacked:o}=e;return(0,d.jsx)(n.Z,{"data-testid":`alert-container-${t}`,variant:u(t),icon:p(t),dismissible:r,onClose:i,stacked:o,children:s})};g.propTypes={type:i().oneOf([l.C.ERROR,l.C.DANGER,l.C.INFO,l.C.SUCCESS]).isRequired,dismissible:i().bool,children:i().node,onDismiss:i().func,stacked:i().bool},g.defaultProps={dismissible:!1,children:void 0,onDismiss:null,stacked:!1};const m=g},13046:(e,t,r)=>{"use strict";r.d(t,{C:()=>p,Z:()=>f});var s=r(89526),i=r(2652),n=r.n(i),o=r(27314),a=r(56107),c=r(67557);const l=["code","dismissible","text","type","topic","payload"];function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const p={ERROR:"error",DANGER:"danger",SUCCESS:"success",INFO:"info",WELCOME:"welcome"},g="UserMessagesProvider.flashMessages",m=e=>{let{children:t}=e;const[r,i]=(0,s.useState)([]),[n,d]=(0,s.useState)(1),p=(0,s.useRef)(n);function m(e){!function(e){let t=(0,a.$o)(g);t&&Array.isArray(t)||(t=[]),t.push(e),(0,a.qQ)(g,t)}(e)}function f(e){const{code:t,dismissible:r,text:s,type:n,topic:o,payload:a}=e,c=function(e,t){if(null==e)return{};var r,s,i=function(e,t){if(null==e)return{};var r,s,i={},n=Object.keys(e);for(s=0;s<n.length;s++)r=n[s],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,l),g=p.current;return i((e=>[...e,u(u({code:t,dismissible:r,text:s,type:n,topic:o,payload:a},c),{},{id:g})])),p.current+=1,d(p.current),g}function h(e){i((t=>t.filter((t=>t.id!==e))))}function b(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;i((t=>null===e?[]:t.filter((t=>t.topic!==e))))}(0,s.useEffect)((()=>{((0,a.lN)(g)||[]).forEach((e=>f(e)))}),[]);const y=(0,s.useMemo)((()=>({add:f,addFlash:m,remove:h,clear:b,messages:r})),[r]);return(0,c.jsx)(o.Z.Provider,{value:y,children:t})};m.propTypes={children:n().node},m.defaultProps={children:null};const f=m},86712:(e,t,r)=>{"use strict";r(43147),r(32390);var s=r(55260),i=r(65010),n=r(76079),o=r(46725),a=r(20775),c=r(63139),l=r(22057),d=r(89526),u=r(73961),p=r(83277),g=r(53672),m=r(56925),f=r(48387),h=r(92070),b=r(84290);function y(e,t){const s=(0,d.useRef)(null);(0,d.useEffect)((()=>(null!==s.current&&(r.g.removeEventListener(e,s.current),s.current=null),r.g.addEventListener(e,t),s.current=t,()=>r.g.removeEventListener(e,s.current))),[e,t])}function x(e){y("message",(0,d.useCallback)((t=>{let{data:r}=t;const{type:s,payload:i}=r;e[s]&&e[s](i)}),[e]))}var v=r(67557);const j=()=>{const{courseId:e}=(0,h.useSelector)((e=>e.courseHome)),{path:t}=(0,p.UO)(),[r]=(0,d.useState)(t),s=(0,p.s0)(),[,i]=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const[t,r]=(0,d.useState)(null),[s,i]=(0,d.useState)(!1);return x({"plugin.resize":(0,d.useCallback)((n=>{let{height:o}=n;r(o),!s&&!t&&o>0&&(i(!0),e&&e())}),[r,s,t,i,e])}),[s,t]}();x({"discussions.navigate":t=>{const r=(0,b.Gn)("/course/:courseId/discussion",{courseId:e});s(`${r}/${t.path}`)}});const o=`${(0,n.getConfig)().DISCUSSIONS_MFE_BASE_URL}/${e}/${r}`;return(0,v.jsx)("iframe",{src:o,className:"d-flex w-100 border-0",height:i,style:{minHeight:"60rem"},title:"discussion"})};j.propTypes={};const w=(0,f.Z)(j);var S=r(22778),O=r(86615),k=r(84790),M=r(56549),P=r(70586),C=r(4606),T=r(26745),N=r(93477),I=r(2652),_=r.n(I),E=r(56132);function q(e,t){return e.getFullYear()<t.getFullYear()?-1:e.getFullYear()>t.getFullYear()?1:e.getMonth()<t.getMonth()?-1:e.getMonth()>t.getMonth()?1:e.getDate()<t.getDate()?-1:e.getDate()>t.getDate()?1:0}function R(e){return e.learnerHasAccess&&"assignment-due-date"===e.dateType}function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const A=e=>{let{dateBlock:t,userTimezone:r}=e;const{courseId:s}=(0,h.useSelector)((e=>e.courseHome)),{org:i}=(0,E.tT)("courseHomeMeta",s),n=t.link&&R(t),o=r?{timeZone:r}:{};return(0,v.jsxs)("li",{className:"p-0 mb-3 small text-dark-500",children:[(0,v.jsxs)("div",{className:"row",children:[(0,v.jsx)(C.G,{icon:T.IV,className:"ml-3 mt-1 mr-1",fixedWidth:!0}),(0,v.jsx)("div",{className:"ml-1 font-weight-bold",children:(0,v.jsx)(N.Ji,D({value:t.date,day:"numeric",month:"short",weekday:"short",year:"numeric"},o))})]}),(0,v.jsxs)("div",{className:"row ml-4 pr-2",children:[(0,v.jsxs)("div",{className:"date-summary-text",children:[n&&(0,v.jsx)("div",{className:"font-weight-bold mt-2",children:(0,v.jsx)("a",{href:t.link,children:t.title})}),!n&&(0,v.jsx)("div",{className:"font-weight-bold mt-2",children:t.title})]}),t.description&&(0,v.jsx)("div",{className:"date-summary-text mt-1",children:t.description}),!n&&t.link&&(0,v.jsx)("a",{href:t.link,onClick:"verified-upgrade-deadline"===t.dateType?()=>{(0,O.hC)("edx.bi.ecommerce.upsell_links_clicked",{org_key:i,courserun_key:s,linkCategory:"(none)",linkName:"course_home_dates",linkType:"link",pageName:"course_home"})}:()=>{},className:"description-link",children:t.linkText})]})]})};A.propTypes={dateBlock:_().shape({date:_().string.isRequired,dateType:_().string,description:_().string,link:_().string,linkText:_().string,title:_().string.isRequired,learnerHasAccess:_().bool}).isRequired,userTimezone:_().string},A.defaultProps={userTimezone:null};const L=A;var B=r(75737);const U=e=>{let{intl:t}=e;const{courseId:r}=(0,h.useSelector)((e=>e.courseHome)),{userTimezone:s}=(0,E.tT)("courseHomeMeta",r),{datesWidget:{courseDateBlocks:i,datesTabLink:n}}=(0,E.tT)("outline",r);return 0===i.length?null:(0,v.jsx)("section",{className:"mb-4",children:(0,v.jsxs)("div",{id:"courseHome-dates",children:[(0,v.jsx)("h2",{className:"h4",children:t.formatMessage(B.Z.dates)}),(0,v.jsx)("ol",{className:"list-unstyled",children:i.map((e=>(0,v.jsx)(L,{dateBlock:e,userTimezone:s},e.title+e.date)))}),(0,v.jsx)("a",{className:"font-weight-bold ml-4 pl-1 small",href:n,children:t.formatMessage(B.Z.allDates)})]})})};U.propTypes={intl:M.gm.isRequired};const H=(0,f.Z)(U),$=["className","html","title"];function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}const G=e=>{let{className:t,html:s,title:i}=e,o=function(e,t){if(null==e)return{};var r,s,i=function(e,t){if(null==e)return{};var r,s,i={},n=Object.keys(e);for(s=0;s<n.length;s++)r=n[s],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,$);const a=`\n    <html dir="${document.documentElement?.getAttribute("dir")||"ltr"}">\n      <head>\n        <base href="${(0,n.getConfig)().LMS_BASE_URL}" target="_parent">\n        <link rel="stylesheet" href="/static/${(0,n.getConfig)().LEGACY_THEME_NAME?`${(0,n.getConfig)().LEGACY_THEME_NAME}/`:""}css/bootstrap/lms-main.css">\n        <link rel="stylesheet" type="text/css" href="${(0,n.getConfig)().BASE_URL}/static/LmsHtmlFragment.css">\n      </head>\n      <body class="${t}">${s}</body>\n      <script>\n        const resizer = new ResizeObserver(() => {\n          window.parent.postMessage({type: 'lmshtmlfragment.resize'}, '*');\n        });\n        resizer.observe(document.body);\n      <\/script>\n    </html>\n  `,c=(0,d.useRef)(null);function l(){c?.current?.contentWindow?.document?.body&&(c.current.height=c.current.contentWindow.document.body.parentNode.scrollHeight)}return(0,d.useEffect)((()=>{r.g.addEventListener("message",(function(e){const{type:t}=e.data;"lmshtmlfragment.resize"===t&&l()}))}),[]),(0,v.jsx)("iframe",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({className:"w-100 border-0",onLoad:l,ref:c,referrerPolicy:"origin",scrolling:"no",srcDoc:a,title:i},o))};G.defaultProps={className:""},G.propTypes={className:_().string,html:_().string.isRequired,title:_().string.isRequired};const W=G,V=e=>{let{intl:t}=e;const{courseId:r}=(0,h.useSelector)((e=>e.courseHome)),{handoutsHtml:s}=(0,E.tT)("outline",r);return s?(0,v.jsxs)("section",{className:"mb-4",children:[(0,v.jsx)("h2",{className:"h4",children:t.formatMessage(B.Z.handouts)}),(0,v.jsx)(W,{className:"small",html:s,title:t.formatMessage(B.Z.handouts)})]}):null};V.propTypes={intl:M.gm.isRequired};const z=(0,f.Z)(V);var Y=r(63954);function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const J=e=>{let{intl:t}=e;const{courseId:r}=(0,h.useSelector)((e=>e.courseHome)),{org:s}=(0,E.tT)("courseHomeMeta",r),i={org_key:s,courserun_key:r},{resumeCourse:{hasVisitedCourse:n,url:o}}=(0,E.tT)("outline",r);return o?(0,v.jsxs)(Y.ZP,{className:"mb-3 raised-card","data-testid":"start-resume-card",children:[(0,v.jsx)(Y.ZP.Header,{title:n?t.formatMessage(B.Z.resumeBlurb):t.formatMessage(B.Z.startBlurb),actions:(0,v.jsx)(P.ZP,{variant:"brand",block:!0,href:o,onClick:()=>{(0,O.eb)("edx.course.home.resume_course.clicked",K(K({},i),{},{event_type:n?"resume":"start",url:o}))},children:n?t.formatMessage(B.Z.resume):t.formatMessage(B.Z.start)})}),(0,v.jsx)(Y.ZP.Footer,{children:(0,v.jsx)(v.Fragment,{})})]}):null};J.propTypes={intl:M.gm.isRequired};const X=(0,f.Z)(J);var ee,te=r(61068),re=r(1688),se=r(16575);function ie(){return ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ie.apply(this,arguments)}const ne=e=>d.createElement("svg",ie({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),ee||(ee=d.createElement("path",{fill:"#000",d:"M14.4 6 14 4H5v17h2v-7h5.6l.4 2h7V6z"})));var oe;function ae(){return ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ae.apply(this,arguments)}r.p;const ce=e=>d.createElement("svg",ae({xmlns:"http://www.w3.org/2000/svg",width:15,height:17,fill:"none"},e),oe||(oe=d.createElement("path",{fill:"#002B2B",d:"M9.4 2 9 0H0v17h2v-7h5.6l.4 2h7V2zm3.6 8H9.64l-.4-2H2V2h5.36l.4 2H13z"})));var le;function de(){return de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},de.apply(this,arguments)}r.p;const ue=e=>d.createElement("svg",de({xmlns:"http://www.w3.org/2000/svg",width:15,height:17,fill:"none"},e),le||(le=d.createElement("path",{fill:"#002B2B",d:"M9.4 2 9 0H0v17h2v-7h5.6l.4 2h7V2zm3.6 8H9.64l-.4-2H2V2h5.36l.4 2H13z"})),d.createElement("path",{d:"M9.66 9.987c-.002-.004-.095-.456-.206-1.004l-.202-.996-3.614-.008-3.615-.008V2.023l2.664.007 2.663.008.197.99.197.988h5.24v5.979h-1.66c-.914 0-1.663-.004-1.665-.008",style:{fill:"gray",fillRule:"evenodd",strokeWidth:.0150977}}));r.p;var pe=r(64403),ge=r.n(pe);const me=e=>{let{buttonIcon:t,title:r,text:s,handleSelect:i,isSelected:n}=e;return(0,v.jsxs)("button",{type:"button",className:ge()("flag-button row w-100 align-content-between m-1.5 py-3.5",n?"flag-button-selected":""),"aria-checked":n,role:"radio",onClick:()=>i(),"data-testid":`weekly-learning-goal-input-${r}`,children:[(0,v.jsx)("div",{className:"row w-100 m-0 justify-content-center pb-1",children:t}),(0,v.jsx)("div",{className:ge()("row w-100 m-0 justify-content-center small text-gray-700 pb-1",n?"font-weight-bold":""),children:r}),(0,v.jsx)("div",{className:ge()("row w-100 m-0 justify-content-center micro text-gray-500",n?"font-weight-bold":""),children:s})]})};me.propTypes={buttonIcon:_().element.isRequired,title:_().string.isRequired,text:_().string.isRequired,handleSelect:_().func.isRequired,isSelected:_().bool.isRequired};const fe=me,he=e=>{let{level:t,isSelected:r,handleSelect:s,intl:i}=e;const n={casual:{daysPerWeek:1,title:B.Z.casualGoalButtonTitle,text:B.Z.casualGoalButtonText,icon:(0,v.jsx)(ce,{})},regular:{daysPerWeek:3,title:B.Z.regularGoalButtonTitle,text:B.Z.regularGoalButtonText,icon:(0,v.jsx)(ue,{})},intense:{daysPerWeek:5,title:B.Z.intenseGoalButtonTitle,text:B.Z.intenseGoalButtonText,icon:(0,v.jsx)(ne,{})}}[t];return(0,v.jsx)(fe,{buttonIcon:n.icon,title:i.formatMessage(n.title),text:i.formatMessage(n.text),handleSelect:()=>s(n.daysPerWeek),isSelected:r})};he.propTypes={level:_().string.isRequired,isSelected:_().bool.isRequired,handleSelect:_().func.isRequired,intl:M.gm.isRequired};const be=(0,f.Z)(he);var ye=r(3800);const xe=e=>{let{daysPerWeek:t,subscribedToReminders:r,intl:s}=e;const{courseId:i}=(0,h.useSelector)((e=>e.courseHome)),{isMasquerading:n,org:a}=(0,E.tT)("courseHomeMeta",i),{administrator:c}=(0,k.IC)(),[l,u]=(0,d.useState)(t),[g,f]=(0,d.useState)(r),b=(0,p.TH)(),y=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=null===l||g;f(r),u(e),n||((0,m.qV)(i,e,r),(0,O.hC)("edx.ui.lms.goal.days-per-week.changed",{org_key:a,courserun_key:i,is_staff:c,num_days:e,reminder_selected:r}),t&&(0,O.hC)("enrollment.email.clicked.setgoal",{}))};return(0,d.useEffect)((()=>{const e=new URLSearchParams(b.search),t=Number(e.get("weekly_goal"));[1,3,5].includes(t)&&(y(t,!0),e.delete("weekly_goal"),o.m8.replace({search:e.toString()}))}),[b.search]),(0,v.jsxs)(Y.ZP,{id:"courseHome-weeklyLearningGoal",className:"row w-100 m-0 mb-3 raised-card","data-testid":"weekly-learning-goal-card",children:[(0,v.jsx)(Y.ZP.Header,{size:"sm",title:(0,v.jsx)("div",{id:"set-weekly-goal-header",children:s.formatMessage(B.Z.setWeeklyGoal)}),subtitle:s.formatMessage(B.Z.setWeeklyGoalDetail)}),(0,v.jsxs)(Y.ZP.Section,{className:"text-gray-700 small",children:[(0,v.jsxs)("div",{role:"radiogroup","aria-labelledby":"set-weekly-goal-header",className:"flag-button-container m-0 p-0",children:[(0,v.jsx)(be,{level:"casual",isSelected:1===l,handleSelect:y}),(0,v.jsx)(be,{level:"regular",isSelected:3===l,handleSelect:y}),(0,v.jsx)(be,{level:"intense",isSelected:5===l,handleSelect:y})]}),(0,v.jsx)("div",{className:"d-flex pt-3",children:(0,v.jsx)(te.ZP.Switch,{checked:g,onChange:e=>function(e){const t=e.target.checked;f(t),n||((0,m.qV)(i,l,t),(0,O.hC)("edx.ui.lms.goal.reminder-selected.changed",{org_key:a,courserun_key:i,is_staff:c,num_days:l,reminder_selected:t}))}(e),disabled:!l,children:(0,v.jsx)("small",{children:s.formatMessage(B.Z.setGoalReminder)})})})]}),g&&(0,v.jsx)(Y.ZP.Section,{muted:!0,children:(0,v.jsxs)("div",{className:"row w-100 m-0 small align-center",children:[(0,v.jsx)("div",{className:"d-flex align-items-center pr-1",children:(0,v.jsx)(re.Z,{className:"text-primary-500",src:se.Z})}),(0,v.jsx)("div",{className:"col",children:s.formatMessage(B.Z.goalReminderDetail)})]})})]})};xe.propTypes={daysPerWeek:_().number,subscribedToReminders:_().bool,intl:M.gm.isRequired},xe.defaultProps={daysPerWeek:null,subscribedToReminders:!1};const ve=(0,f.Z)(xe);var je=r(30110),we=r(3908),Se=r(90546),Oe=r(30548),ke=r(26054),Me=r(18748),Pe=r(42405),Ce=r(29399);const Te=(0,Ce.createSlice)({name:"tours",initialState:{showCoursewareTour:!1,showExistingUserCourseHomeTour:!1,showNewUserCourseHomeModal:!1,showNewUserCourseHomeTour:!1,toursEnabled:!1},reducers:{disableCourseHomeTour:e=>{e.showNewUserCourseHomeModal=!1,e.showNewUserCourseHomeTour=!1,e.showExistingUserCourseHomeTour=!1},disableCoursewareTour:e=>{e.showCoursewareTour=!1},disableNewUserCourseHomeModal:e=>{e.showNewUserCourseHomeModal=!1},launchCourseHomeTour:e=>{e.showExistingUserCourseHomeTour&&(e.showExistingUserCourseHomeTour=!1),e.showNewUserCourseHomeModal&&e.showNewUserCourseHomeTour||(e.showNewUserCourseHomeTour=!0)},setTourData:(e,t)=>{let{payload:r}=t;const{courseHomeTourStatus:s,showCoursewareTour:i,toursEnabled:n}=r;e.showCoursewareTour=i,e.showExistingUserCourseHomeTour="show-existing-user-tour"===s,e.showNewUserCourseHomeModal="show-new-user-tour"===s,e.toursEnabled=n}}}),{disableCourseHomeTour:Ne,disableCoursewareTour:Ie,disableNewUserCourseHomeModal:_e,launchCourseHomeTour:Ee,setTourData:qe}=Te.actions,{reducer:Re}=Te,Ze=(0,N.vU)({beginTour:{id:"tours.button.beginTour",defaultMessage:"Begin tour",description:"A button used to start a tour of the website"},launchTour:{id:"tours.button.launchTour",defaultMessage:"Launch tour",description:"A button used to launch a tour of the website"},newUserModalBody:{id:"tours.newUserModal.body",defaultMessage:"Let’s take a quick tour of {siteName} so you can get the most out of your course."},newUserModalTitleWelcome:{id:"tours.newUserModal.title.welcome",defaultMessage:"Welcome to your",description:'The beginning of the phrase "Welcome to your edX course!"'},skipForNow:{id:"tours.button.skipForNow",defaultMessage:"Skip for now",description:"A button used to dismiss the modal and skip the optional tour of the website"}}),De=e=>{let{intl:t,srOnly:r}=e;const{courseId:s}=(0,h.useSelector)((e=>e.courseHome)),{org:i}=(0,E.tT)("courseHomeMeta",s),{toursEnabled:n}=(0,h.useSelector)((e=>e.tours)),o=(0,h.useDispatch)();return(0,v.jsx)(v.Fragment,{children:n&&(0,v.jsxs)(P.ZP,{variant:"link",size:"inline",className:`p-0 ${r&&"sr-only sr-only-focusable"}`,onClick:()=>{const{administrator:e}=(0,k.IC)();(0,O.hC)("edx.ui.lms.launch_tour.clicked",{org_key:i,courserun_key:s,is_staff:e,tour_variant:"course_home"}),o(Ee())},children:[!r&&(0,v.jsx)(re.Z,{src:Pe.Z,className:"mr-2",style:{height:"18px",width:"18px"}}),t.formatMessage(Ze.launchTour)]})})};De.defaultProps={srOnly:!1},De.propTypes={intl:M.gm.isRequired,srOnly:_().bool};const Ae=(0,f.Z)(De);function Le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function Be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Ue=e=>{let{intl:t}=e;const{courseId:r}=(0,h.useSelector)((e=>e.courseHome)),{org:s}=(0,E.tT)("courseHomeMeta",r),{courseTools:i}=(0,E.tT)("outline",r);if(0===i.length)return null;const n={org_key:s,courserun_key:r},o=e=>{switch(e){case"edx.bookmarks":return je.xV;case"edx.tool.verified_upgrade":return we.U;case"edx.tool.financial_assistance":return Se.YH;case"edx.calendar-sync":return Oe.fT;case"edx.updates":return Me.Xg;case"edx.reviews":return ke.T;default:return null}};return(0,v.jsxs)("section",{className:"mb-4",children:[(0,v.jsx)("h2",{className:"h4",children:t.formatMessage(B.Z.tools)}),(0,v.jsxs)("ul",{className:"list-unstyled",children:[i.map((e=>(0,v.jsx)("li",{className:"small",children:(0,v.jsxs)("a",{href:e.url,onClick:()=>(e=>{const{administrator:t}=(0,k.IC)();(0,O.eb)("edx.course.tool.accessed",Be(Be({},n),{},{course_id:r,is_staff:t,tool_name:e}))})(e.analyticsId),children:[(0,v.jsx)(C.G,{icon:o(e.analyticsId),className:"mr-2",fixedWidth:!0}),e.title]})},e.analyticsId))),(0,v.jsx)("li",{className:"small",id:"courseHome-launchTourLink",children:(0,v.jsx)(Ae,{})})]})]})};Ue.propTypes={intl:M.gm.isRequired};const He=(0,f.Z)(Ue);var $e=r(18565),Fe=r(31977),Ge=r(38918),We=r(78696),Ve=r(34279),ze=r(74630),Ye=r(18401),Qe=r(56397),Ke=r(54877),Je=r(58956);const Xe=(0,N.vU)({activities:{id:"learning.effortEstimation.activities",defaultMessage:"{activityCount, plural, one {# activity} other {# activities}}"},minutesAbbreviated:{id:"learning.effortEstimation.minutesAbbreviated",defaultMessage:"{minuteCount, plural, one {# min} other {# min}}",description:"Number of minutes in a casual, shorthand manner: 5 min"},minutesFull:{id:"learning.effortEstimation.minutesFull",defaultMessage:"{minuteCount, plural, one {# minute} other {# minutes}}",description:"Number of minutes spelled out: 5 minutes"}}),et=e=>{const{block:{effortActivities:t,effortTime:r},className:s,intl:i}=e,n=Math.ceil(r/60),o=i.formatMessage(Xe.minutesAbbreviated,{minuteCount:n}),a=i.formatMessage(Xe.minutesFull,{minuteCount:n}),c=(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("span",{"aria-hidden":"true",children:o}),(0,v.jsx)("span",{className:"sr-only",children:a})]}),l=i.formatMessage(Xe.activities,{activityCount:t});let d=null;if(r&&t)d=(0,v.jsx)(Ke.Z,{id:"learning.effortEstimation.combinedEstimate",defaultMessage:"{minutes} + {activities}",description:"You can likely leave this alone, unless you want to use a full width plus or similar change",values:{activities:l,minutes:c}});else if(r)d=c;else{if(!t)return null;d=l}return(0,v.jsx)("span",{className:ge()("text-gray-500 text-monospace",s),style:{fontSize:"0.8em"},children:d})};et.defaultProps={className:null},et.propTypes={block:_().shape({effortActivities:_().number,effortTime:_().number}).isRequired,className:_().string,intl:M.gm.isRequired};const tt=(0,f.Z)(et);function rt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function st(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const it=e=>{let{id:t,intl:r,courseId:s,first:i,sequence:n}=e;const{complete:o,description:a,due:c,showLink:l,title:d,hideFromTOC:u}=n,{userTimezone:p}=(0,E.tT)("outline",s),g=p?{timeZone:p}:{},m=(0,v.jsx)(Qe.rU,{to:`/course/${s}/${t}`,children:d}),f=l?m:d,h=(0,v.jsx)(Ke.Z,{id:"learning.outline.sequence-due-date-set",defaultMessage:"{description} due {assignmentDue}",description:"Used below an assignment title",values:{assignmentDue:(0,v.jsx)(N.qN,st({day:"numeric",month:"short",year:"numeric",timeZoneName:"short",value:c},g),`${t}-due`),description:a||""}}),b=(0,v.jsx)(Ke.Z,{id:"learning.outline.sequence-due-date-not-set",defaultMessage:"{description}",description:"Used below an assignment title",values:{assignmentDue:(0,v.jsx)(N.qN,st({day:"numeric",month:"short",year:"numeric",timeZoneName:"short",value:c},g),`${t}-due`),description:a||""}});return(0,v.jsx)("li",{children:(0,v.jsxs)("div",{className:ge()("",{"mt-2 pt-2 border-top border-light":!i}),children:[(0,v.jsxs)("div",{className:"row w-100 m-0",children:[(0,v.jsx)("div",{className:"col-auto p-0",children:o?(0,v.jsx)(C.G,{icon:Ge.f8,fixedWidth:!0,className:"float-left text-success mt-1","aria-hidden":"true",title:r.formatMessage(B.Z.completedAssignment)}):(0,v.jsx)(C.G,{icon:ze.f8,fixedWidth:!0,className:"float-left text-gray-400 mt-1","aria-hidden":"true",title:r.formatMessage(B.Z.incompleteAssignment)})}),(0,v.jsxs)("div",{className:"col-10 p-0 ml-3 text-break",children:[(0,v.jsx)("span",{className:"align-middle",children:f}),(0,v.jsxs)("span",{className:"sr-only",children:[", ",r.formatMessage(o?B.Z.completedAssignment:B.Z.incompleteAssignment)]}),(0,v.jsx)(tt,{className:"ml-3 align-middle",block:n})]})]}),u&&(0,v.jsx)("div",{className:"row w-100 my-2 mx-4 pl-3",children:(0,v.jsxs)("span",{className:"small d-flex",children:[(0,v.jsx)(re.Z,{className:"mr-2",src:Je.Z,"data-testid":"hide-from-toc-sequence-link-icon"}),(0,v.jsx)("span",{"data-testid":"hide-from-toc-sequence-link-text",children:r.formatMessage(B.Z.hiddenSequenceLink)})]})}),(0,v.jsx)("div",{className:"row w-100 m-0 ml-3 pl-3",children:(0,v.jsx)("small",{className:"text-body pl-2",children:c?h:b})})]})})};it.propTypes={id:_().string.isRequired,intl:M.gm.isRequired,courseId:_().string.isRequired,first:_().bool.isRequired,sequence:_().shape().isRequired};const nt=(0,f.Z)(it);var ot=r(43228);const at=e=>{let{courseId:t,defaultOpen:r,expand:s,intl:i,section:n}=e;const{complete:o,sequenceIds:a,title:c,hideFromTOC:l}=n,{courseBlocks:{sequences:u}}=(0,E.tT)("outline",t),[p,g]=(0,d.useState)(r);(0,d.useEffect)((()=>{g(s)}),[s]),(0,d.useEffect)((()=>{g(r)}),[]);const m=(0,v.jsxs)("div",{className:"d-flex row w-100 m-0",children:[(0,v.jsx)("div",{className:"col-auto p-0",children:o?(0,v.jsx)(C.G,{icon:Ge.f8,fixedWidth:!0,className:"float-left mt-1 text-success","aria-hidden":"true",title:i.formatMessage(B.Z.completedSection)}):(0,v.jsx)(C.G,{icon:ze.f8,fixedWidth:!0,className:"float-left mt-1 text-gray-400","aria-hidden":"true",title:i.formatMessage(B.Z.incompleteSection)})}),(0,v.jsxs)("div",{className:"col-7 ml-3 p-0 font-weight-bold text-dark-500",children:[(0,v.jsx)("span",{className:"align-middle col-6",children:c}),(0,v.jsxs)("span",{className:"sr-only",children:[", ",i.formatMessage(o?B.Z.completedSection:B.Z.incompleteSection)]})]}),l&&(0,v.jsx)("div",{className:"row",children:l&&(0,v.jsxs)("span",{className:"small d-flex align-content-end",children:[(0,v.jsx)(re.Z,{className:"mr-2",src:Ye.Z,"data-testid":"hide-from-toc-section-icon"}),(0,v.jsx)("span",{"data-testid":"hide-from-toc-section-text",children:i.formatMessage(B.Z.hiddenSection)})]})})]});return(0,v.jsx)("li",{children:(0,v.jsx)($e.Z,{className:"mb-2",styling:"card-lg",title:m,open:p,onToggle:()=>{g(!p)},iconWhenClosed:(0,v.jsx)(Fe.Z,{alt:i.formatMessage(B.Z.openSection),icon:Ve.r8,onClick:()=>{g(!0)},size:"sm"}),iconWhenOpen:(0,v.jsx)(Fe.Z,{alt:i.formatMessage(ot.Z.close),icon:We.Kl,onClick:()=>{g(!1)},size:"sm"}),children:(0,v.jsx)("ol",{className:"list-unstyled",children:a.map(((e,r)=>(0,v.jsx)(nt,{id:e,courseId:t,sequence:u[e],first:0===r},e)))})})})};at.propTypes={courseId:_().string.isRequired,defaultOpen:_().bool.isRequired,expand:_().bool.isRequired,intl:M.gm.isRequired,section:_().shape().isRequired};const ct=(0,f.Z)(at);var lt=r(74627),dt=r(81599),ut=r(8048);const pt=(0,N.vU)({suggestedSchedule:{id:"datesBanner.suggestedSchedule",defaultMessage:"We’ve built a suggested schedule to help you stay on track. But don’t worry—it’s flexible so you can learn at your own pace.",description:"Messaging that explain the gaol and the effect fo the suggested schedule"},upgradeToCompleteHeader:{id:"datesBanner.upgradeToCompleteGradedBanner.header",defaultMessage:"Upgrade to unlock",description:"Messaging that prompts users to upgrade their course status in order to access locked course content"},upgradeToCompleteBody:{id:"datesBanner.upgradeToCompleteGradedBanner.body",defaultMessage:"You are auditing this course, which means that you are unable to participate in graded assignments. To complete graded assignments as part of this course, you can upgrade today.",description:"It explain the effect of upgrading the course"},upgradeToCompleteButton:{id:"datesBanner.upgradeToCompleteGradedBanner.button",defaultMessage:"Upgrade now",description:"Button that prompts users to upgrade their course status"},upgradeToShiftBody:{id:"datesBanner.upgradeToResetBanner.body",defaultMessage:"To keep yourself on track, you can update this schedule and shift the past due assignments into the future. Don’t worry—you won’t lose any of the progress you’ve made when you shift your due dates.",description:"Text that explain the consequences of resetting dates when learner needs to upgrade to do so"},upgradeToShiftButton:{id:"datesBanner.upgradeToResetBanner.button",defaultMessage:"Upgrade to shift due dates",description:"Button that prompts users to upgrade their course status before they can shift their due dates into the future"},missedDeadlines:{id:"datesBanner.resetDatesBanner.header",defaultMessage:"It looks like you missed some important deadlines based on our suggested schedule.",description:"Text shown when leaner missed assignment due date"},shiftDatesBody:{id:"datesBanner.resetDatesBanner.body",defaultMessage:"To keep yourself on track, you can update this schedule and shift the past due assignments into the future. Don’t worry—you won’t lose any of the progress you’ve made when you shift your due dates.",description:"Text that explain the consequences of resetting dates"},shiftDatesButton:{id:"datesBanner.resetDatesBanner.button",defaultMessage:"Shift due dates",description:"Button that prompts users to move their due dates into the future"}}),gt=e=>{let{fetch:t,intl:r,model:s}=e;const{courseId:i}=(0,h.useSelector)((e=>e.courseHome)),{datesBannerInfo:n,hasEnded:o}=(0,E.tT)(s,i),{missedDeadlines:a,missedGatedContent:c}=n,l=(0,h.useDispatch)();return!a||c||o?null:(0,v.jsx)(lt.Z,{variant:"warning",children:(0,v.jsxs)(dt.Z,{className:"w-100 m-0",children:[(0,v.jsxs)(ut.Z,{xs:12,md:9,className:"small p-0 pr-md-2",children:[(0,v.jsx)("strong",{children:r.formatMessage(pt.missedDeadlines)})," ",r.formatMessage(pt.shiftDatesBody)]}),(0,v.jsx)(ut.Z,{xs:12,md:3,className:"align-self-center text-right mt-3 mt-md-0 p-0",children:(0,v.jsx)(P.ZP,{variant:"primary",size:"sm",className:"w-xs-100 w-md-auto",onClick:()=>l((0,m.in)(i,s,t)),children:r.formatMessage(pt.shiftDatesButton)})})]})})};gt.propTypes={fetch:_().func.isRequired,intl:M.gm.isRequired,model:_().string.isRequired};const mt=(0,f.Z)(gt);var ft=r(59458),ht=r(72518),bt=r(56107);const yt=(0,N.vU)({srPrices:{id:"learning.offer.screenReaderPrices",defaultMessage:"Original price: {originalPrice}, discount price: {discountedPrice}"},srInlinePrices:{id:"learning.upgradeButton.screenReaderInlinePrices",defaultMessage:"Original price: {originalPrice}"}}),xt=e=>{const{inline:t,intl:r,offer:s,verifiedMode:i}=e;let n;if(i&&(n=i.currencySymbol),!s){const{price:e}=i;return`${n}${e}`}const{discountedPrice:o,originalPrice:a}=s;return t?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("span",{className:"font-weight-bold",children:o})," (",(0,v.jsx)("span",{className:"sr-only",children:r.formatMessage(yt.srInlinePrices,{originalPrice:a})}),(0,v.jsx)("span",{"aria-hidden":"true",children:(0,v.jsx)("del",{children:a})}),")"]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("span",{className:"sr-only",children:r.formatMessage(yt.srPrices,{discountedPrice:o,originalPrice:a})}),(0,v.jsxs)("span",{"aria-hidden":"true",children:[(0,v.jsx)("span",{children:o})," (",(0,v.jsx)("del",{children:a}),")"]})]})};xt.defaultProps={inline:!1,offer:null,verifiedMode:null},xt.propTypes={inline:_().bool,intl:M.gm.isRequired,offer:_().shape({discountedPrice:_().string.isRequired,originalPrice:_().string.isRequired,upgradeUrl:_().string.isRequired}),verifiedMode:_().shape({currencySymbol:_().string.isRequired,price:_().number.isRequired,upgradeUrl:_().string.isRequired})};const vt=(0,f.Z)(xt),jt=["intl","offer","variant","onClick","verifiedMode"];function wt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function St(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Ot=e=>{const{intl:t,offer:r,variant:s,onClick:i,verifiedMode:n}=e,o=function(e,t){if(null==e)return{};var r,s,i=function(e,t){if(null==e)return{};var r,s,i={},n=Object.keys(e);for(s=0;s<n.length;s++)r=n[s],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,jt),a=r?r.upgradeUrl:n.upgradeUrl;return(0,v.jsx)(P.ZP,St(St({variant:s,href:a,onClick:i},o),{},{children:(0,v.jsx)("div",{children:(0,v.jsx)(Ke.Z,{id:"learning.upgradeButton.buttonText",defaultMessage:"Upgrade for {pricing}",values:{pricing:(0,v.jsx)(vt,{offer:r,verifiedMode:n})}})})}))};Ot.defaultProps={offer:null,onClick:null,variant:"primary"},Ot.propTypes={intl:M.gm.isRequired,offer:_().shape({upgradeUrl:_().string.isRequired}),onClick:_().func,verifiedMode:_().shape({upgradeUrl:_().string.isRequired}).isRequired,variant:_().string};const kt=(0,f.Z)(Ot),Mt=["intl","offer","variant","onClick","verifiedMode"];function Pt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function Ct(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pt(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Tt=e=>{const{intl:t,offer:r,variant:s,onClick:i,verifiedMode:n}=e,o=function(e,t){if(null==e)return{};var r,s,i=function(e,t){if(null==e)return{};var r,s,i={},n=Object.keys(e);for(s=0;s<n.length;s++)r=n[s],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,Mt),a=r?r.upgradeUrl:n.upgradeUrl;return(0,v.jsx)(P.ZP,Ct(Ct({variant:s,href:a,onClick:i},o),{},{children:(0,v.jsx)(Ke.Z,{id:"learning.upgradeNowButton.buttonText",defaultMessage:"Upgrade now for {pricing}",values:{pricing:(0,v.jsx)(vt,{offer:r,verifiedMode:n})}})}))};Tt.defaultProps={offer:null,onClick:null,variant:"primary"},Tt.propTypes={intl:M.gm.isRequired,offer:_().shape({upgradeUrl:_().string.isRequired}),onClick:_().func,verifiedMode:_().shape({upgradeUrl:_().string.isRequired}).isRequired,variant:_().string};const Nt=(0,f.Z)(Tt);var It=r(73167);const _t=()=>(0,v.jsx)("span",{className:"fa-li",children:(0,v.jsx)(C.G,{icon:It.LE})}),Et=()=>{const e=(0,v.jsx)("a",{className:"inline-link-underline font-weight-bold",rel:"noopener noreferrer",target:"_blank",href:`${(0,n.getConfig)().MARKETING_SITE_BASE_URL}/verified-certificate`,children:(0,v.jsx)(Ke.Z,{id:"learning.generic.upsell.verifiedCertBullet.verifiedCert",defaultMessage:"verified certificate",description:"Bolded words 'verified certificate', which is the name of credential the learner receives."})});return(0,v.jsxs)("li",{className:"upsell-bullet",children:[(0,v.jsx)(_t,{}),(0,v.jsx)(Ke.Z,{id:"learning.generic.upsell.verifiedCertBullet",defaultMessage:"Earn a {verifiedCertLink} of completion to showcase on your resumé",description:"Bullet showcasing benefit of earned credential.",values:{verifiedCertLink:e}})]})},qt=()=>{const e=(0,v.jsx)("span",{className:"font-weight-bold",children:(0,v.jsx)(Ke.Z,{id:"learning.generic.upsell.unlockGradedBullet.gradedAssignments",defaultMessage:"graded assignments",description:"Bolded words 'graded assignments', which are the bolded portion of a bullet point highlighting that course content is unlocked when purchasing an upgrade. Graded assignments are any course content that is graded and are unlocked by upgrading to verified certificates."})});return(0,v.jsxs)("li",{className:"upsell-bullet",children:[(0,v.jsx)(_t,{}),(0,v.jsx)(Ke.Z,{id:"learning.generic.upsell.unlockGradedBullet",defaultMessage:"Unlock your access to all course activities, including {gradedAssignmentsInBoldText}",description:"Bullet showcasing benefit of additional course material.",values:{gradedAssignmentsInBoldText:e}})]})},Rt=()=>{const e=(0,v.jsx)("span",{className:"font-weight-bold",children:(0,v.jsx)(Ke.Z,{id:"learning.generic.upsell.fullAccessBullet.fullAccess",defaultMessage:"Full access",description:"Bolded phrase 'Full access', which is the bolded portion of a bullet point highlighting that access to course content will not have time limits."})});return(0,v.jsxs)("li",{className:"upsell-bullet",children:[(0,v.jsx)(_t,{}),(0,v.jsx)(Ke.Z,{id:"learning.generic.upsell.fullAccessBullet",defaultMessage:"{fullAccessInBoldText} to course content and materials, even after the course ends",description:"Bullet showcasing upgrade lifts access durations.",values:{fullAccessInBoldText:e}})]})},Zt=()=>{const e=(0,v.jsx)("span",{className:"font-weight-bold",children:(0,v.jsx)(Ke.Z,{id:"learning.generic.upsell.supportMissionBullet.mission",defaultMessage:"mission",description:"Bolded word 'mission', which is the bolded portion of a bullet point encouraging the learner to support the goals of the website."})});return(0,v.jsxs)("li",{className:"upsell-bullet",children:[(0,v.jsx)(_t,{}),(0,v.jsx)(Ke.Z,{id:"learning.generic.upsell.supportMissionBullet",defaultMessage:"Support our {missionInBoldText} at {siteName}",description:"Bullet encouraging user to support edX's goals.",values:{missionInBoldText:e,siteName:(0,n.getConfig)().SITE_NAME}})]})};function Dt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function At(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dt(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Lt=()=>(0,v.jsxs)("ul",{className:"fa-ul upgrade-notification-ul pt-0",children:[(0,v.jsx)(Et,{}),(0,v.jsx)(Zt,{})]}),Bt=()=>(0,v.jsxs)("ul",{className:"fa-ul upgrade-notification-ul",children:[(0,v.jsx)(Et,{}),(0,v.jsx)(qt,{}),(0,v.jsx)(Rt,{}),(0,v.jsx)(Zt,{})]}),Ut=e=>{let{accessExpirationDate:t,timezoneFormatArgs:r}=e;const s=(0,v.jsx)("span",{className:"font-weight-bold",children:(0,v.jsx)(Ke.Z,{id:"learning.generic.upgradeNotification.expirationAccessLoss.progress",defaultMessage:"including any progress"})}),i=(0,v.jsx)(N.Ji,At({day:"numeric",month:"long",value:new Date(t)},r),"accessDate"),n=(0,v.jsx)("a",{className:"inline-link-underline font-weight-bold",rel:"noopener noreferrer",target:"_blank",href:"https://support.edx.org/hc/en-us/articles/360013426573-What-are-the-differences-between-audit-free-and-verified-paid-courses-",children:(0,v.jsx)(Ke.Z,{id:"learning.generic.upgradeNotification.expirationVerifiedCert.benefits",defaultMessage:"benefits of upgrading"})});return(0,v.jsxs)("div",{className:"upgrade-notification-text",children:[(0,v.jsx)("p",{children:(0,v.jsx)(Ke.Z,{id:"learning.generic.upgradeNotification.expirationAccessLoss",defaultMessage:"You will lose all access to this course, {includingAnyProgress}, on {date}.",values:{includingAnyProgress:s,date:i}})}),(0,v.jsx)("p",{children:(0,v.jsx)(Ke.Z,{id:"learning.generic.upgradeNotification.expirationVerifiedCert",defaultMessage:"Upgrading your course enables you to pursue a verified certificate and unlocks numerous features. Learn more about the {benefitsOfUpgrading}.",values:{benefitsOfUpgrading:n}})})]})};Ut.propTypes={accessExpirationDate:_().PropTypes.instanceOf(Date).isRequired,timezoneFormatArgs:_().shape({timeZone:_().string})},Ut.defaultProps={timezoneFormatArgs:{}};const Ht=()=>(0,v.jsx)("div",{className:"upgrade-notification-text",children:(0,v.jsx)("p",{children:(0,v.jsx)(Ke.Z,{id:"learning.generic.upgradeNotification.pastExpiration.content",defaultMessage:"The upgrade deadline for this course passed. To upgrade, enroll in the next available session."})})}),$t=e=>{let t,{courseId:r,hoursToExpiration:s,setupgradeNotificationCurrentState:i,type:n}=e;return s>=24?(i&&("access"===n&&(i("accessDaysLeft"),(0,bt.qQ)(`upgradeNotificationCurrentState.${r}`,"accessDaysLeft")),"offer"===n&&(i("FPDdaysLeft"),(0,bt.qQ)(`upgradeNotificationCurrentState.${r}`,"FPDdaysLeft"))),t=(0,v.jsx)(Ke.Z,{id:"learning.generic.upgradeNotification.expirationDays",defaultMessage:"{dayCount, number} {dayCount, plural,\n          one {day}\n          other {days}} left",values:{dayCount:Math.floor(s/24)}})):s>=1?(i&&("access"===n&&(i("accessHoursLeft"),(0,bt.qQ)(`upgradeNotificationCurrentState.${r}`,"accessHoursLeft")),"offer"===n&&(i("FPDHoursLeft"),(0,bt.qQ)(`upgradeNotificationCurrentState.${r}`,"FPDHoursLeft"))),t=(0,v.jsx)(Ke.Z,{id:"learning.generic.upgradeNotification.expirationHours",defaultMessage:"{hourCount, number} {hourCount, plural,\n          one {hour}\n          other {hours}} left",values:{hourCount:s}})):(i&&("access"===n&&(i("accessLastHour"),(0,bt.qQ)(`upgradeNotificationCurrentState.${r}`,"accessLastHour")),"offer"===n&&(i("FPDLastHour"),(0,bt.qQ)(`upgradeNotificationCurrentState.${r}`,"FPDLastHour"))),t=(0,v.jsx)(Ke.Z,{id:"learning.generic.upgradeNotification.expirationMinutes",defaultMessage:"Less than 1 hour left"})),(0,v.jsx)("div",{className:"upsell-warning",children:t})};$t.propTypes={courseId:_().string.isRequired,hoursToExpiration:_().number.isRequired,setupgradeNotificationCurrentState:_().func,type:_().string},$t.defaultProps={setupgradeNotificationCurrentState:null,type:null};const Ft=e=>{let{courseId:t,accessExpirationDate:r,timezoneFormatArgs:s,setupgradeNotificationCurrentState:i}=e;return i&&(i("accessDateView"),(0,bt.qQ)(`upgradeNotificationCurrentState.${t}`,"accessDateView")),(0,v.jsx)("div",{className:"upsell-warning-light",children:(0,v.jsx)(Ke.Z,{id:"learning.generic.upgradeNotification.expiration",defaultMessage:"Course access will expire {date}",values:{date:(0,v.jsx)(N.Ji,At({day:"numeric",month:"long",value:r},s),"accessExpireDate")}})})};Ft.propTypes={courseId:_().string.isRequired,accessExpirationDate:_().PropTypes.instanceOf(Date).isRequired,timezoneFormatArgs:_().shape({timeZone:_().string}),setupgradeNotificationCurrentState:_().func},Ft.defaultProps={timezoneFormatArgs:{},setupgradeNotificationCurrentState:null};const Gt=e=>{let{courseId:t,accessExpirationDate:r,timezoneFormatArgs:s,setupgradeNotificationCurrentState:i}=e;return i&&(i("PastExpirationDate"),(0,bt.qQ)(`upgradeNotificationCurrentState.${t}`,"PastExpirationDate")),(0,v.jsx)("div",{className:"upsell-warning",children:(0,v.jsx)(Ke.Z,{id:"learning.generic.upgradeNotification.pastExpiration.banner",defaultMessage:"Upgrade deadline passed on {date}",values:{date:(0,v.jsx)(N.Ji,At({day:"numeric",month:"long",value:r},s),"accessExpireDate")}})})};Gt.propTypes={courseId:_().string.isRequired,accessExpirationDate:_().PropTypes.instanceOf(Date).isRequired,timezoneFormatArgs:_().shape({timeZone:_().string}),setupgradeNotificationCurrentState:_().func},Gt.defaultProps={timezoneFormatArgs:{},setupgradeNotificationCurrentState:null};const Wt=e=>{let{accessExpiration:t,contentTypeGatingEnabled:r,marketingUrl:s,courseId:i,offer:n,org:o,setupgradeNotificationCurrentState:a,shouldDisplayBorder:c,timeOffsetMillis:l,upsellPageName:u,userTimezone:p,verifiedMode:g,toggleSidebar:m}=e;const f=(0,ft.Z)(),h=Date.now(),b=p?{timeZone:p}:{},y=new Date(h+l),x=t?new Date(t.expirationDate):null,j=!!t&&new Date(h)>x,w={org_key:o,courserun_key:i},S=At({creative:"sidebarupsell",name:"In-Course Verification Prompt",position:"sidebar-message",promotion_id:"courseware_verified_certificate_upsell"},w);if((0,d.useEffect)((()=>{(0,O.eb)("edx.bi.course.upgrade.sidebarupsell.displayed",w),(0,O.hC)("Promotion Viewed",S)}),[]),!g)return null;let k,M,C,T,N;if(t&&r){const e=Math.floor((x-y)/1e3/60/60);if(e>=168){if(n){const e=Math.floor((new Date(n.expirationDate)-y)/1e3/60/60);k=(0,v.jsx)(Ke.Z,{id:"learning.generic.upgradeNotification.firstTimeLearnerDiscount",defaultMessage:"{percentage}% First-Time Learner Discount",values:{percentage:n.percentage}}),M=(0,v.jsx)($t,{courseId:i,hoursToExpiration:e,setupgradeNotificationCurrentState:a,type:"offer"})}else k=(0,v.jsx)(Ke.Z,{id:"learning.generic.upgradeNotification.accessExpiration",defaultMessage:"Upgrade your course today"}),M=(0,v.jsx)(Ft,{courseId:i,accessExpirationDate:x,timezoneFormatArgs:b,setupgradeNotificationCurrentState:a});C=(0,v.jsx)(Bt,{})}else e<168&&e>=0?(k=(0,v.jsx)(Ke.Z,{id:"learning.generic.upgradeNotification.accessExpirationUrgent",defaultMessage:"Course Access Expiration"}),M=(0,v.jsx)($t,{courseId:i,hoursToExpiration:e,setupgradeNotificationCurrentState:a,type:"access"}),C=(0,v.jsx)(Ut,{accessExpirationDate:x,timezoneFormatArgs:b})):(k=(0,v.jsx)(Ke.Z,{id:"learning.generic.upgradeNotification.accessExpirationPast",defaultMessage:"Course Access Expiration"}),M=(0,v.jsx)(Gt,{courseId:i,accessExpirationDate:x,timezoneFormatArgs:b,setupgradeNotificationCurrentState:a}),C=(0,v.jsx)(Ht,{}))}else k=(0,v.jsx)(Ke.Z,{id:"learning.generic.upgradeNotification.pursueAverifiedCertificate",defaultMessage:"Pursue a verified certificate"}),C=(0,v.jsx)(Lt,{});return T=j?(0,v.jsx)(P.ZP,{variant:"primary",onClick:()=>{(0,O.hC)("edx.bi.ecommerce.upgrade_notification.past_expiration.button_clicked",At(At({},w),{},{linkCategory:"upgrade_notification",linkName:`${u}_course_details`,linkType:"button",pageName:u}))},href:s,block:!0,children:"View Course Details"}):(0,v.jsx)(kt,{offer:n,onClick:()=>{(0,O.eb)("edx.bi.course.upgrade.sidebarupsell.clicked",w),(0,O.eb)("edx.course.enrollment.upgrade.clicked",At(At({},w),{},{location:"sidebar-message"})),(0,O.hC)("Promotion Clicked",S),(0,O.hC)("edx.bi.ecommerce.upsell_links_clicked",At(At({},w),{},{linkCategory:"green_upgrade",linkName:`${u}_green`,linkType:"button",pageName:u}))},verifiedMode:g,block:!0}),n&&(N=(0,v.jsx)("div",{className:"text-center discount-info",children:(0,v.jsx)(Ke.Z,{id:"learning.generic.upgradeNotification.code",defaultMessage:"Use code {code} at checkout",values:{code:(0,v.jsx)("span",{className:"font-weight-bold",children:n.code})}})})),(0,v.jsx)("section",{className:ge()("upgrade-notification small",{"card mb-4":c}),children:(0,v.jsxs)("div",{id:"courseHome-upgradeNotification",children:[(0,v.jsxs)("h2",{className:ge()("h5 upgrade-notification-header",{"d-flex align-items-center mr-2 ml-4 my-1.5 font-size-18":!!m}),id:"outline-sidebar-upgrade-header",children:[k,!!m&&(0,v.jsx)("div",{className:"d-inline-flex ml-auto",children:(0,v.jsx)(Fe.Z,{src:ht.Z,size:"sm",iconAs:re.Z,onClick:m,className:"icon-hover",alt:f.formatMessage(ot.Z.close)})})]}),M,(0,v.jsx)("div",{className:"upgrade-notification-message",children:C}),(0,v.jsx)("div",{className:"upgrade-notification-button",children:T}),N]})})};Wt.propTypes={courseId:_().string.isRequired,org:_().string.isRequired,accessExpiration:_().shape({expirationDate:_().string}),contentTypeGatingEnabled:_().bool,marketingUrl:_().string,offer:_().shape({expirationDate:_().string,percentage:_().number,code:_().string}),toggleSidebar:_().func,shouldDisplayBorder:_().bool,setupgradeNotificationCurrentState:_().func,timeOffsetMillis:_().number,upsellPageName:_().string.isRequired,userTimezone:_().string,verifiedMode:_().shape({currencySymbol:_().string.isRequired,price:_().number.isRequired,upgradeUrl:_().string.isRequired})},Wt.defaultProps={accessExpiration:null,contentTypeGatingEnabled:!1,marketingUrl:null,offer:null,setupgradeNotificationCurrentState:null,shouldDisplayBorder:null,timeOffsetMillis:0,userTimezone:null,verifiedMode:null,toggleSidebar:null};const Vt=(0,f.Z)(Wt),zt=e=>{let{intl:t,logUpgradeLinkClick:s,model:i}=e;const{courseId:n}=(0,h.useSelector)((e=>e.courseHome)),{datesBannerInfo:o,hasEnded:a}=(0,E.tT)(i,n),{contentTypeGatingEnabled:c,missedDeadlines:l,missedGatedContent:d,verifiedUpgradeLink:u}=o;return c&&l&&d&&u&&!a?(0,v.jsx)(lt.Z,{className:"bg-light-200",children:(0,v.jsxs)(dt.Z,{className:"w-100 m-0",children:[(0,v.jsxs)(ut.Z,{xs:12,md:9,className:"small p-0 pr-md-2",children:[(0,v.jsx)("strong",{children:t.formatMessage(pt.missedDeadlines)})," ",t.formatMessage(pt.upgradeToShiftBody)]}),(0,v.jsx)(ut.Z,{xs:12,md:3,className:"align-self-center text-right mt-3 mt-md-0 p-0",children:(0,v.jsx)(P.ZP,{variant:"brand",size:"sm",className:"w-xs-100 w-md-auto",onClick:()=>{s(),r.g.location.replace(u)},children:t.formatMessage(pt.upgradeToShiftButton)})})]})}):null};zt.propTypes={intl:M.gm.isRequired,logUpgradeLinkClick:_().func,model:_().string.isRequired},zt.defaultProps={logUpgradeLinkClick:()=>{}};const Yt=(0,f.Z)(zt);var Qt=r(31917);const Kt=d.lazy((()=>Promise.resolve().then(r.bind(r,31917)))),Jt=d.lazy((()=>r.e(974).then(r.bind(r,47974)))),Xt=d.lazy((()=>r.e(210).then(r.bind(r,69210)))),er=d.lazy((()=>r.e(437).then(r.bind(r,23437))));function tr(e){const{start:t}=(0,E.tT)("courseHomeMeta",e),r=new Date;return new Date(t)>r}var rr=r(68438);const sr=d.lazy((()=>r.e(700).then(r.bind(r,94700)))),ir=d.lazy((()=>r.e(28).then(r.bind(r,28028))));var nr=r(44896),or=r(58287);const ar=e=>{let{courseId:t,intl:r}=e;const{welcomeMessageHtml:s}=(0,E.tT)("outline",t),[i,n]=(0,d.useState)(!0),o=(0,d.useMemo)((()=>(0,or.Z)(s,s.length,{keepWhitespaces:!0})),[s]),a=(0,d.useMemo)((()=>(0,or.Z)(o,100,{byWords:!0,keepWhitespaces:!0})),[o]),c=(0,d.useMemo)((()=>a.length<o.length),[o,a]),[l,u]=(0,d.useState)(c),p=(0,h.useDispatch)();return s?(0,v.jsx)(lt.Z,{"data-testid":"alert-container-welcome",variant:"light",stacked:!0,dismissible:!0,show:i,onClose:()=>{n(!1),p((0,m.dV)(t))},className:"raised-card",actions:c?[(0,v.jsx)(P.ZP,{onClick:()=>u(!l),variant:"outline-primary",children:l?r.formatMessage(B.Z.welcomeMessageShowMoreButton):r.formatMessage(B.Z.welcomeMessageShowLessButton)})]:[],children:(0,v.jsx)(nr.Z,{className:"mb-3",enterDuration:400,exitDuration:200,children:l?(0,v.jsx)(W,{className:"inline-link","data-testid":"short-welcome-message-iframe",html:a,title:r.formatMessage(B.Z.welcomeMessage)},"short-html"):(0,v.jsx)(W,{className:"inline-link","data-testid":"long-welcome-message-iframe",html:o,title:r.formatMessage(B.Z.welcomeMessage)},"full-html")})}):null};ar.propTypes={courseId:_().string.isRequired,intl:M.gm.isRequired};const cr=(0,f.Z)(ar);var lr=r(46100),dr=r.n(lr),ur=r(3808);const pr=e=>{let{intl:t}=e;const{courseId:r}=(0,h.useSelector)((e=>e.courseHome)),{username:s}=(0,E.tT)("courseHomeMeta",r),i=(0,h.useDispatch)(),[n,o]=(0,d.useState)(""),[a,c]=(0,d.useState)(!1),[l,u]=(0,d.useState)(!1),[p,g]=(0,d.useState)(""),[m,f]=(0,d.useState)(""),[b,y]=(0,d.useState)(null),x={notStarted:"notStarted",started:"started",submitted:"submitted",verified:"verified",rejected:"rejected",error:"error",otherCourseApproved:"otherCourseApproved",expiringSoon:"expiringSoon",expired:"expired"};function j(e){let t="";if(["created","download_software_clicked","ready_to_start"].includes(e)||!e)t=x.notStarted;else if(["started","ready_to_submit"].includes(e))t=x.started;else if(["second_review_required","submitted"].includes(e))t=x.submitted;else{const r=dr()(e);r in x&&(t=x[r])}return t}function w(e){return["submitted","second_review_required"].includes(e)}function S(e){return!!e&&new Date<e}(0,d.useEffect)((()=>{(0,ur.eW)(r,s).then((e=>{if(e){Object.keys(e).length>0&&u(!0),g(e.onboarding_status),o(e.onboarding_link);const r=e.expiration_date;r&&(t=r,new Date>=new Date(t).getTime())?f(j("expired")):r&&function(e){return new Date>new Date(e).getTime()-24192e5}(r)?f(j("expiringSoon")):f(j(e.onboarding_status)),y(new Date(e.onboarding_release_date)),c(e.onboarding_past_due)}var t})).catch((()=>{})).finally((()=>{i((0,ye.fF)())}))}),[]);let O=null;return S(b)?O=(0,v.jsx)(P.ZP,{variant:"secondary",block:!0,disabled:!0,"aria-disabled":"true",children:t.formatMessage(B.Z.proctoringOnboardingButtonNotOpen,{releaseDate:t.formatDate(b,{day:"numeric",month:"short",year:"numeric"})})}):a?O=(0,v.jsx)(P.ZP,{variant:"secondary",block:!0,disabled:!0,"aria-disabled":"true",children:t.formatMessage(B.Z.proctoringOnboardingButtonPastDue)}):S(b)||(m===x.otherCourseApproved?O=(0,v.jsx)(P.ZP,{variant:"primary",block:!0,href:n,children:t.formatMessage(B.Z.proctoringOnboardingPracticeButton)}):m!==x.otherCourseApproved&&(O=(0,v.jsx)(P.ZP,{variant:"primary",block:!0,href:n,children:t.formatMessage(B.Z.proctoringOnboardingButton)}))),(0,v.jsx)(v.Fragment,{children:l&&(0,v.jsxs)("section",{className:`mb-4 p-3 outline-sidebar-proctoring-panel ${function(){let e="";return[x.submitted,x.expiringSoon].includes(m)?e="proctoring-onboarding-submitted":[x.verified,x.otherCourseApproved].includes(m)&&(e="proctoring-onboarding-success"),e}()}`,children:[(0,v.jsx)("h2",{className:"h4",id:"outline-sidebar-upgrade-header",children:t.formatMessage(B.Z.proctoringInfoPanel)}),(0,v.jsxs)("div",{children:[m&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("p",{className:"h6",children:[t.formatMessage(B.Z.proctoringCurrentStatus)," ",t.formatMessage(B.Z[`${m}ProctoringStatus`])]}),(0,v.jsx)("p",{children:t.formatMessage(B.Z[`${m}ProctoringMessage`])}),(0,v.jsx)("p",{children:m===x.otherCourseApproved&&t.formatMessage(B.Z[`${m}ProctoringDetail`])})]}),![x.verified,x.otherCourseApproved].includes(m)&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("p",{children:[!w(p)&&t.formatMessage(B.Z.proctoringPanelGeneralInfo),w(p)&&t.formatMessage(B.Z.proctoringPanelGeneralInfoSubmitted)]}),(0,v.jsx)("p",{children:t.formatMessage(B.Z.proctoringPanelGeneralTime)})]}),(k=m,![x.submitted,x.verified].includes(k)&&O),(0,v.jsx)(P.ZP,{variant:"outline-primary",block:!0,href:"https://support.edx.org/hc/en-us/sections/115004169247-Taking-Timed-and-Proctored-Exams",children:t.formatMessage(B.Z.proctoringReviewRequirementsButton)})]})]})});var k};pr.propTypes={intl:M.gm.isRequired};const gr=(0,f.Z)(pr);var mr=r(31955),fr=r(3534),hr=r(39940),br=r(53910),yr=r(72030),xr=r(90575),vr=r(98025),jr=r(58408);async function wr(e){const t=new URL(`${(0,n.getConfig)().LMS_BASE_URL}/api/learning_sequences/v1/course_outline/${e}`),{data:r}=await(0,k.kj)().get(t.href,{});return function(e){const t={courses:{},sections:{},sequences:{}},r=new Date;function s(e){return e.accessible||!e.effective_start||r>=Date.parse(e.effective_start)}return Object.entries(e.outline.sequences).forEach((e=>{let[r,i]=e;s(i)&&(t.sequences[r]={id:r,title:i.title})})),e.outline.sections.forEach((r=>{const i=r.sequence_ids.filter((e=>e in t.sequences));(s(r)||0!==i.length)&&(t.sections[r.id]={id:r.id,title:r.title,sequenceIds:i,courseId:e.course_key},i.forEach((e=>{t.sequences[e].sectionId=r.id})))})),t.courses[e.course_key]={id:e.course_key,title:e.title,sectionIds:Object.entries(t.sections).map((e=>{let[t]=e;return t})),hasScheduledContent:Object.values(e.outline.sequences).some((e=>!s(e)))},t}(r)}async function Sr(e){let t=`${(0,n.getConfig)().LMS_BASE_URL}/api/courseware/course/${e}`;return t=(0,jr.$)(t),function(e){const t=Date.now(),r=t,{data:s,headers:i}=e;return{accessExpiration:(0,vr.u3)(s.access_expiration),canShowUpgradeSock:s.can_show_upgrade_sock,contentTypeGatingEnabled:s.content_type_gating_enabled,courseGoals:(0,vr.u3)(s.course_goals),id:s.id,title:s.name,offer:(0,vr.u3)(s.offer),enrollmentStart:s.enrollment_start,enrollmentEnd:s.enrollment_end,end:s.end,start:s.start,enrollmentMode:s.enrollment.mode,isEnrolled:s.enrollment.is_active,license:s.license,userTimezone:s.user_timezone,showCalculator:s.show_calculator,notes:(0,vr.u3)(s.notes),marketingUrl:s.marketing_url,celebrations:(0,vr.u3)(s.celebrations),userHasPassingGrade:s.user_has_passing_grade,courseExitPageIsActive:s.course_exit_page_is_active,certificateData:(0,vr.u3)(s.certificate_data),entranceExamData:(0,vr.u3)(s.entrance_exam_data),language:s.language,timeOffsetMillis:(0,ur.SZ)(i&&i.date,t,r),verifyIdentityUrl:s.verify_identity_url,verificationStatus:s.verification_status,linkedinAddToProfileUrl:s.linkedin_add_to_profile_url,relatedPrograms:(0,vr.u3)(s.related_programs),userNeedsIntegritySignature:s.user_needs_integrity_signature,canAccessProctoredExams:s.can_access_proctored_exams,learningAssistantEnabled:s.learning_assistant_enabled}}(await(0,k.kj)().get(t))}const Or=(e,t)=>`${(0,n.getConfig)().LMS_BASE_URL}/courses/${e}/xblock/${t}/handler`;const kr="loading",Mr="loaded",Pr="failed",Cr=(0,Ce.createSlice)({name:"courseware",initialState:{courseStatus:"loading",courseId:null,sequenceStatus:"loading",sequenceId:null,sequenceMightBeUnit:!1},reducers:{fetchCourseRequest:(e,t)=>{let{payload:r}=t;e.courseId=r.courseId,e.courseStatus=kr},fetchCourseSuccess:(e,t)=>{let{payload:r}=t;e.courseId=r.courseId,e.courseStatus=Mr},fetchCourseFailure:(e,t)=>{let{payload:r}=t;e.courseId=r.courseId,e.courseStatus=Pr},fetchCourseDenied:(e,t)=>{let{payload:r}=t;e.courseId=r.courseId,e.courseStatus="denied"},fetchSequenceRequest:(e,t)=>{let{payload:r}=t;e.sequenceId=r.sequenceId,e.sequenceStatus=kr,e.sequenceMightBeUnit=!1},fetchSequenceSuccess:(e,t)=>{let{payload:r}=t;e.sequenceId=r.sequenceId,e.sequenceStatus=Mr,e.sequenceMightBeUnit=!1},fetchSequenceFailure:(e,t)=>{let{payload:r}=t;e.sequenceId=r.sequenceId,e.sequenceStatus=Pr,e.sequenceMightBeUnit=r.sequenceMightBeUnit||!1}}}),{fetchCourseRequest:Tr,fetchCourseSuccess:Nr,fetchCourseFailure:Ir,fetchCourseDenied:_r,fetchSequenceRequest:Er,fetchSequenceSuccess:qr,fetchSequenceFailure:Rr,fetchCourseRecommendationsRequest:Zr,fetchCourseRecommendationsSuccess:Dr,fetchCourseRecommendationsFailure:Ar}=Cr.actions,{reducer:Lr}=Cr;function Br(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function Ur(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Br(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Br(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Hr(e){return async t=>{t(Tr({courseId:e})),Promise.allSettled([Sr(e),wr(e),(0,ur.BO)(e,"courseware")]).then((r=>{let[s,i,n]=r;if("fulfilled"===s.status&&t((0,E.mS)({modelType:"coursewareMeta",model:s.value})),"fulfilled"===n.status&&t((0,E.mS)({modelType:"courseHomeMeta",model:Ur({id:e},n.value)})),"fulfilled"===i.status){const{courses:e,sections:r,sequences:s}=i.value;t((0,E.qn)({modelType:"coursewareMeta",modelsMap:e})),t((0,E.dj)({modelType:"sections",modelsMap:r})),t((0,E.qn)({modelType:"sequences",modelsMap:s}))}const o="fulfilled"===s.status,a="fulfilled"===n.status,c="fulfilled"===i.status;if(!c){const{response:e}=i.reason;e&&403===e.status?(0,xr.PN)(i.reason):(0,xr.H)(i.reason)}if(o||(0,xr.H)(s.reason),a||(0,xr.H)(n.reason),o&&a)return n.value.courseAccess.hasAccess&&c?void t(Nr({courseId:e})):void t(_r({courseId:e}));t(Ir({courseId:e}))}))}}function $r(e){return async t=>{try{if("openedx"===(await async function(e){const t=`${(0,n.getConfig)().LMS_BASE_URL}/api/discussion/v1/courses/${e}`,{data:r}=await(0,k.kj)().get(t);return r}(e)).provider){const r=await async function(e){const{data:t}=await(0,k.kj)().get(`${(0,n.getConfig)().LMS_BASE_URL}/api/discussion/v2/course_topics/${e}`);return(0,vr.u3)(t)}(e);t((0,E.z$)({modelType:"discussionTopics",models:r.filter((e=>e.usageKey)),idField:"usageKey"}))}}catch(e){(0,xr.H)(e)}}}function Fr(e){if("loaded"!==e.courseware.courseStatus)return[];const{sectionIds:t=[]}=e.models.coursewareMeta[e.courseware.courseId];return t.flatMap((t=>e.models.sections[t].sequenceIds))}const Gr=(0,N.vU)({accountActivationAlertTitle:{id:"account-activation.alert.title",defaultMessage:"Activate your account so you can log back in",description:"Title for account activation alert which is shown after the registration"}}),Wr=e=>{let{intl:t}=e;const[r,s]=(0,d.useState)(!1),[i,o]=(0,d.useState)(!1),[a,c]=(0,d.useState)(!1),l=()=>{o(!0),c(!1),async function(){const e=new URL(`${(0,n.getConfig)().LMS_BASE_URL}/api/send_account_activation_email`),{data:t}=await(0,k.kj)().post(e.href,{});return t}().then((()=>{o(!1),c(!0)}))};void 0!==mr.Z.get("show-account-activation-popup")&&(mr.Z.remove("show-account-activation-popup",{path:"/",domain:".edx.org"}),void 0===mr.Z.get("show-account-activation-popup")&&s(!0));const u=(0,v.jsxs)(P.ZP,{variant:"primary",className:"",onClick:()=>s(!1),children:[(0,v.jsx)(Ke.Z,{id:"account-activation.alert.button",defaultMessage:"Continue to {siteName}",description:"account activation alert continue button",values:{siteName:(0,n.getConfig)().SITE_NAME}}),(0,v.jsx)(re.Z,{src:br.Z,className:"ml-1 d-inline-block align-bottom"})]});return(0,v.jsx)(hr.Z,{isOpen:r,title:t.formatMessage(Gr.accountActivationAlertTitle),footerNode:u,onClose:()=>({}),children:(()=>{let e;const t=(0,v.jsx)(Ke.Z,{id:"account-activation.alert.message",defaultMessage:"We sent an email to {boldEmail} with a link to activate your account. Can’t find it? Check your spam folder or {sendEmailTag}.",description:"Message for account activation alert which is shown after the registration",values:{boldEmail:(0,v.jsx)("b",{children:(0,k.IC)()&&(0,k.IC)().email}),sendEmailTag:(0,v.jsx)("a",{href:"#",role:"button",onClick:l,children:(0,v.jsx)(Ke.Z,{id:"account-activation.resend.link",defaultMessage:"resend the email",description:"Message for resend link in account activation alert which is shown after the registration"})})}});return e=(0,v.jsx)("div",{children:t}),!a&&i&&(e=(0,v.jsxs)("div",{children:[t,(0,v.jsx)(fr.Z,{animation:"border",variant:"secondary",style:{height:"1.5rem",width:"1.5rem"}})]})),a&&!i&&(e=(0,v.jsxs)("div",{children:[t,(0,v.jsx)(re.Z,{src:yr.Z,style:{height:"1.7rem",width:"1.25rem"},className:"text-success-500 d-inline-block position-fixed"})]})),e})()})};Wr.propTypes={intl:M.gm.isRequired};const Vr=(0,f.Z)(Wr);function zr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function Yr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zr(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Qr=e=>{let{intl:t}=e;const{courseId:r,proctoringPanelStatus:s}=(0,h.useSelector)((e=>e.courseHome)),{isSelfPaced:i,org:o,title:a,userTimezone:c}=(0,E.tT)("courseHomeMeta",r),{accessExpiration:l,courseBlocks:{courses:u,sections:g},courseGoals:{selectedGoal:f,weeklyLearningGoalEnabled:b}={},datesBannerInfo:y,datesWidget:{courseDateBlocks:x},enableProctoredExams:j,offer:w,timeOffsetMillis:M,verifiedMode:C}=(0,E.tT)("outline",r),{marketingUrl:T}=(0,E.tT)("coursewareMeta",r),[N,I]=(0,d.useState)(!1),_=(0,p.s0)(),q={org_key:o,courserun_key:r},R=function(e){const{isEnrolled:t}=(0,E.tT)("courseHomeMeta",e),r=t&&tr(e),s=(0,d.useMemo)((()=>({courseId:e})),[e]);return(0,S.VY)(r,{code:"clientCourseStartAlert",payload:s,topic:"outline-course-alerts"}),{clientCourseStartAlert:Xt}}(r),Z=function(e){const{isEnrolled:t}=(0,E.tT)("courseHomeMeta",e),{datesWidget:{courseDateBlocks:r},userTimezone:s}=(0,E.tT)("outline",e),i=r.find((e=>"course-end-date"===e.dateType)),n=i?new Date(i.date):null,o=i?n-new Date:0,a=t&&i&&o>0&&o<12096e5,c=(0,d.useMemo)((()=>({description:i&&i.description,endDate:i&&i.date,userTimezone:s})),[i,s]);return(0,S.VY)(a,{code:"clientCourseEndAlert",payload:c,topic:"outline-course-alerts"}),{clientCourseEndAlert:Jt}}(r),D=function(e){const{isEnrolled:t,org:r,tabs:s}=(0,E.tT)("courseHomeMeta",e),{datesWidget:{courseDateBlocks:i},certData:o,hasEnded:a,userHasPassingGrade:c,userTimezone:l,enrollmentMode:u}=(0,E.tT)("outline",e),{certStatus:p,certWebViewUrl:g,certificateAvailableDate:m}=o||{},f=i.find((e=>"course-end-date"===e.dateType)),h=null!=u&&!!Object.values({PROFESSIONAL:"professional",VERIFIED:"verified",NO_ID_PROFESSIONAL_MODE:"no-id-professional",CREDIT_MODE:"credit",MASTERS:"masters",EXECUTIVE_EDUCATION:"executive-education"}).find((e=>e===u));let b="";g&&(b=`${(0,n.getConfig)().LMS_BASE_URL}${g}`);const y=function(e){switch(e){case Qt.CERT_STATUS_TYPE.DOWNLOADABLE:case Qt.CERT_STATUS_TYPE.EARNED_NOT_AVAILABLE:case Qt.CERT_STATUS_TYPE.REQUESTING:case Qt.CERT_STATUS_TYPE.UNVERIFIED:return!0;default:return!1}}(p),x=t&&y,v=t&&h&&!y&&a&&!c,j=(0,d.useMemo)((()=>({certificateAvailableDate:m,certURL:b,certStatus:p,courseId:e,courseEndDate:f&&f.date,userTimezone:l,org:r,notPassingCourseEnded:v,tabs:s})),[p,b,m,e,f,v,r,s,l]);return(0,S.VY)(x||v,{code:"clientCertificateStatusAlert",payload:j,topic:"outline-course-alerts"}),{clientCertificateStatusAlert:Kt}}(r),A=function(e){const{authenticatedUser:t}=(0,d.useContext)(rr.Z),r=(0,E.tT)("courseHomeMeta",e),s=(0,E.tT)("outline",e),i=r&&void 0!==r.isEnrolled&&r.isEnrolled,n=s&&s.courseBlocks&&!s.courseBlocks.courses,o=!i&&(n||null!==t),a=(0,d.useMemo)((()=>({anonymousUser:null===t,canEnroll:!(!s||!s.enrollAlert)&&s.enrollAlert.canEnroll,courseId:e})),[t,e,s]);return(0,S.VY)(o,{code:"clientPrivateCourseAlert",dismissible:!1,payload:a,topic:"outline-private-alerts",type:S.CH.WELCOME}),{clientPrivateCourseAlert:sr}}(r),L=(e=>{const{courseBlocks:{courses:t},datesWidget:{datesTabLink:r}}=(0,E.tT)("outline",e),s=!!t&&!!Object.values(t).find((e=>!0===e.hasScheduledContent)),{isEnrolled:i}=(0,E.tT)("courseHomeMeta",e),n=(0,d.useMemo)((()=>({datesTabLink:r})),[r]);return(0,S.VY)(s&&i,{code:"ScheduledContentAlert",payload:n,topic:"outline-course-alerts"}),{ScheduledContentAlert:ir}})(r),U=u&&Object.keys(u)[0],$=x&&x.some((e=>"assignment-due-date"===e.dateType)),F=(()=>{const e=(0,k.IC)();return(e?e.roles.map((e=>e.split(":")[0])):[]).includes("enterprise_learner")})()?"enterprise_learner":"b2c_learner",G=(0,p.TH)();return(0,d.useEffect)((()=>{const e=new URLSearchParams(G.search);"1"===e.get("start_course")&&((0,O.hC)("enrollment.email.clicked.startcourse",{}),e.delete("start_course"),_({pathname:G.pathname,search:`?${e.toString()}`,replace:!0}))}),[G.search]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{"data-learner-type":F,className:"row w-100 mx-0 my-3 justify-content-between",children:(0,v.jsx)("div",{className:"col-12 col-sm-auto p-0",children:(0,v.jsx)("div",{role:"heading","aria-level":"1",className:"h2",children:a})})}),(0,v.jsxs)("div",{className:"row course-outline-tab",children:[(0,v.jsx)(Vr,{}),(0,v.jsx)("div",{className:"col-12",children:(0,v.jsx)(S.UW,{topic:"outline-private-alerts",customAlerts:Yr({},A)})}),(0,v.jsxs)("div",{className:"col col-12 col-md-8",children:[(0,v.jsx)(S.UW,{topic:"outline-course-alerts",className:"mb-3",customAlerts:Yr(Yr(Yr(Yr({},D),Z),R),L)}),i&&$&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(mt,{model:"outline",fetch:m.BN}),(0,v.jsx)(Yt,{model:"outline",logUpgradeLinkClick:()=>{(0,O.hC)("edx.bi.ecommerce.upsell_links_clicked",Yr(Yr({},q),{},{linkCategory:"personalized_learner_schedules",linkName:"course_home_upgrade_shift_dates",linkType:"button",pageName:"course_home"}))}})]}),(0,v.jsx)(X,{}),(0,v.jsx)(cr,{courseId:r}),U&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"row w-100 m-0 mb-3 justify-content-end",children:(0,v.jsx)("div",{className:"col-12 col-md-auto p-0",children:(0,v.jsx)(P.ZP,{variant:"outline-primary",block:!0,onClick:()=>{I(!N)},children:N?t.formatMessage(B.Z.collapseAll):t.formatMessage(B.Z.expandAll)})})}),(0,v.jsx)("ol",{id:"courseHome-outline",className:"list-unstyled",children:u[U].sectionIds.map((e=>(0,v.jsx)(ct,{courseId:r,defaultOpen:g[e].resumeBlock,expand:N,section:g[e]},e)))})]})]}),U&&(0,v.jsxs)("div",{className:"col col-12 col-md-4",children:[(0,v.jsx)(gr,{}),(!j||"loaded"===s)&&b&&(0,v.jsx)(ve,{daysPerWeek:f&&"daysPerWeek"in f?f.daysPerWeek:null,subscribedToReminders:!(!f||!("subscribedToReminders"in f))&&f.subscribedToReminders}),(0,v.jsx)(He,{}),(0,v.jsx)(Vt,{offer:w,verifiedMode:C,accessExpiration:l,contentTypeGatingEnabled:y.contentTypeGatingEnabled,marketingUrl:T,upsellPageName:"course_home",userTimezone:c,shouldDisplayBorder:!0,timeOffsetMillis:M,courseId:r,org:o}),(0,v.jsx)(H,{}),(0,v.jsx)(z,{})]})]})]})};Qr.propTypes={intl:M.gm.isRequired};const Kr=(0,f.Z)(Qr);var Jr=r(19398),Xr=r(9479),es=r(93052),ts=r(149),rs=r(3054);const ss=r.p+"d8d2ddd02a2781719fd303dc4b868ac0.gif",is=r.p+"8ecb9b1c7d41d7196375abdc97a53b4b.gif",ns=r.p+"d0cc1158a1b3bd75bb785cd0d6e306c1.png",os=r.p+"50e380db78f1d321fe1ce5bacea07644.png",as=(0,N.vU)({applyForCredit:{id:"courseExit.programs.applyForCredit",defaultMessage:"Apply for credit",description:"Button for the learner to apply for course credit"},certificateHeaderDownloadable:{id:"courseCelebration.certificateHeader.downloadable",defaultMessage:"Your certificate is available!",description:"Text displayed when course certificate is ready to be downloaded"},certificateHeaderNotAvailable:{id:"courseCelebration.certificateHeader.notAvailable",defaultMessage:"Your grade and certificate status will be available soon.",description:"Header displayed when course certificate is not yet available to be viewed"},certificateNotAvailableBodyAccessCert:{id:"courseCelebration.certificateBody.notAvailable.accessCertificate",defaultMessage:"If you have earned a passing grade, your certificate will be automatically issued.",description:"Text displayed when course certificate is not yet available to be viewed"},certificateNotAvailableEndDateBody:{id:"courseCelebration.certificateBody.notAvailable.endDate",defaultMessage:"Final grades and any earned certificates are scheduled to be available after {endDate}.",description:"Shown for learners who have finished a course before grades and certificates are available."},certificateHeaderUnverified:{id:"courseCelebration.certificateHeader.unverified",defaultMessage:"You must complete verification to receive your certificate.",description:"Text displayed when a user has not verified their identity and cannot view their course certificate"},certificateHeaderRequestable:{id:"courseCelebration.certificateHeader.requestable",defaultMessage:"Congratulations, you qualified for a certificate!",description:"Text displayed when a user has completed the course and can request a certificate"},certificateHeaderUpgradable:{id:"courseCelebration.certificateHeader.upgradable",defaultMessage:"Upgrade to pursue a verified certificate",description:"Header when learner finished or pass the course but need to upgrade to get a certificate"},certificateImage:{id:"courseCelebration.certificateImage",defaultMessage:"Sample certificate",description:"Alt text used to describe an image of a certificate"},completedCourseHeader:{id:"courseCelebration.completedCourseHeader",defaultMessage:"You have completed your course.",description:"Header text for course exit section"},congratulationsHeader:{id:"courseCelebration.congratulationsHeader",defaultMessage:"Congratulations!",description:"Greeting learner for finishing the course"},congratulationsImage:{id:"courseCelebration.congratulationsImage",defaultMessage:"Four people raising their hands in celebration",description:"Alt text used to describe celebratory image"},courseInProgressDescription:{id:"courseExit.courseInProgressDescription",defaultMessage:"It looks like there is more content in this course that will be released in the future. Look out for email updates or check back on your course for when this content will be available.",description:"Shown to learner when they finish all available assignments, but not the whole course"},courseInProgressHeader:{id:"courseExit.courseInProgressHeader",defaultMessage:"More content is coming soon!",description:"Header when the status of the course not all of (contents or assignments) available yet"},dashboardLink:{id:"courseExit.dashboardLink",defaultMessage:"Dashboard",description:"Link to user’s dashboard"},endOfCourseDescription:{id:"courseExit.endOfCourseDescription",defaultMessage:"Unfortunately, you are not currently eligible for a certificate. You need to receive a passing grade to be eligible for a certificate.",description:"Shown to learner when they did not pass the course"},endOfCourseHeader:{id:"courseExit.endOfCourseHeader",defaultMessage:"You’ve reached the end of the course!"},endOfCourseTitle:{id:"courseExit.endOfCourseTitle",defaultMessage:"End of Course"},idVerificationSupportLink:{id:"courseExit.idVerificationSupportLink",defaultMessage:"Learn more about ID verification",description:"Link to an article about identity verification"},linkedinAddToProfileButton:{id:"courseCelebration.linkedinAddToProfileButton",defaultMessage:"Add to LinkedIn profile",description:"Button to add certificate information to the user’s LinkedIn profile"},microBachelorsLearnMore:{id:"courseExit.programs.microBachelors.learnMore",defaultMessage:"Learn more about how your MicroBachelors credential can be applied for credit."},microMastersLearnMore:{id:"courseExit.programs.microMasters.learnMore",defaultMessage:"Learn more about the process of applying MicroMasters certificates to Master’s degrees."},microMastersMessage:{id:"courseExit.programs.microMasters.mastersMessage",defaultMessage:"If you’re interested in using your MicroMasters certificate towards a Master’s program, you can get started today!"},nextButtonComplete:{id:"learn.sequence.navigation.complete.button",defaultMessage:"Complete the course",description:"This text is shown on the button which usually links to the next unit or assignment in course sequence, however when it is the last unit. The button will link to course exit page"},nextButtonEnd:{id:"courseExit.nextButton.endOfCourse",defaultMessage:"Next (end of course)",description:"This shown for the button which links to the next unit, when learner did not pass the course"},profileLink:{id:"courseExit.profileLink",defaultMessage:"Profile",description:"Link to user’s profile"},programsLastCourseHeader:{id:"courseExit.programs.lastCourse",defaultMessage:"You have completed the last course in {title}!",description:"This shown to learner when the course they completed is the last one of a program, the program might be mircomaster, or microbachelors...etc"},requestCertificateBodyText:{id:"courseCelebration.requestCertificateBodyText",defaultMessage:"In order to access your certificate, request it below.",description:"Shown when learner need to request the certifcate"},requestCertificateButton:{id:"courseCelebration.requestCertificateButton",defaultMessage:"Request certificate",description:"Button to request the course certificate"},searchOurCatalogLink:{id:"courseExit.searchOurCatalogLink",defaultMessage:"Search our catalog",description:"First part of a sentence that continues afterward"},shareMessage:{id:"courseCelebration.shareMessage",defaultMessage:"Share your success on social media or email.",description:"Recommending an action when learner pass the course"},socialMessage:{id:"courseExit.social.shareCompletionMessage",defaultMessage:"I just completed {title} with {platform}!",description:"Shown when sharing course progress on a social network"},upgradeButton:{id:"courseExit.upgradeButton",defaultMessage:"Upgrade now"},upgradeLink:{id:"courseExit.upgradeLink",defaultMessage:"upgrade now"},verificationPending:{id:"courseCelebration.verificationPending",defaultMessage:"Your ID verification is pending and your certificate will be available once approved.",description:"Shown when the status of verification is pending"},verifiedCertificateSupportLink:{id:"courseExit.verifiedCertificateSupportLink",defaultMessage:"Learn more about verified certificates",description:"Anchor text for link that redirect to external help page about verified certificates"},verifyIdentityButton:{id:"courseCelebration.verifyIdentityButton",defaultMessage:"Verify ID now",description:"Button to verify the identify of the user"},viewCertificateButton:{id:"courseCelebration.viewCertificateButton",defaultMessage:"View my certificate",description:"Button to view the course certificate"},viewCourseScheduleButton:{id:"courseExit.viewCourseScheduleButton",defaultMessage:"View course schedule",description:"Button to view the course schedule"},viewCoursesButton:{id:"courseExit.viewCoursesButton",defaultMessage:"View my courses",description:"Button to redirect user to their course dashboard"},viewGradesButton:{id:"courseExit.viewGradesButton",defaultMessage:"View grades"}}),cs=["microbachelors","micromasters","professional-certificate","xseries"],ls=e=>{let{intl:t,progress:r,title:s,type:i,url:o}=e;if(!cs.includes(i)||0!==r.notStarted||0!==r.inProgress)return null;const a=(0,v.jsx)(ts.ZP,{style:{textDecoration:"underline"},destination:o,className:"text-reset",children:t.formatMessage(as.dashboardLink)});return(0,v.jsx)(lt.Z,{variant:"primary",className:"my-3","data-testid":"program-completion",children:(0,v.jsxs)("div",{className:"d-flex",children:[(0,v.jsxs)("div",{className:"col order-1 order-md-0 pl-0 pr-0 pr-md-5",children:[(0,v.jsx)("div",{className:"h4",children:t.formatMessage(as.programsLastCourseHeader,{title:s})}),(0,v.jsx)("p",{children:(0,v.jsx)(Ke.Z,{id:"courseExit.programCompletion.dashboardMessage",defaultMessage:"To view your certificate status, check the Programs section of your {programLink}.",values:{programLink:a},description:"Text that precedes link to program page"})}),"microbachelors"===i&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("p",{children:(0,v.jsx)(ts.ZP,{style:{textDecoration:"underline"},destination:`${(0,n.getConfig)().SUPPORT_URL}/hc/en-us/articles/360004623154`,className:"text-reset",children:t.formatMessage(as.microBachelorsLearnMore)})}),(0,v.jsx)(P.ZP,{variant:"primary",className:"mb-2 mb-sm-0",href:`${(0,n.getConfig)().CREDENTIALS_BASE_URL}/records`,children:t.formatMessage(as.applyForCredit)})]}),"micromasters"===i&&(0,v.jsxs)("p",{children:[t.formatMessage(as.microMastersMessage)," ",(0,v.jsx)(ts.ZP,{style:{textDecoration:"underline"},destination:`${(0,n.getConfig)().SUPPORT_URL}/hc/en-us/articles/360010346853-Does-a-Micromasters-certificate-count-towards-the-online-Master-s-degree-`,className:"text-reset",children:t.formatMessage(as.microMastersLearnMore)})]})]}),(0,v.jsx)("div",{className:"col-12 order-0 col-md-3 order-md-1 w-100 mb-3 p-0 text-center",children:(0,v.jsx)("img",{src:ns,alt:`${t.formatMessage(as.certificateImage)}`,className:"w-100",style:{maxWidth:"13rem"},"data-testid":i})})]})})};ls.propTypes={intl:M.gm.isRequired,progress:_().shape({completed:_().number.isRequired,inProgress:_().number.isRequired,notStarted:_().number.isRequired}).isRequired,title:_().string.isRequired,type:_().string.isRequired,url:_().string.isRequired};const ds=(0,f.Z)(ls),us=e=>{let{icon:t,text:r}=e;return(0,v.jsx)("div",{className:"row w-100 mx-0 my-4 justify-content-center",children:(0,v.jsxs)("p",{className:"text-gray-700",children:[(0,v.jsx)(C.G,{icon:t,style:{width:"20px"}})," ",r]})})};us.propTypes={icon:_().shape({}).isRequired,text:_().node.isRequired};const ps=us;function gs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}const ms={disabled:0,celebration:1,nonPassing:2,inProgress:3},fs=["audit_passing","downloadable","earned_but_not_available","honor_passing","requesting","unverified"],hs=["audit_passing","honor_passing"];function bs(e,t,r,s){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,n=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const o=(0,k.IC)();if(!1===i||!o||!r)return ms.disabled;let a=!0,c=!0;if(e){const{certStatus:t}=e;a=-1!==fs.indexOf(t),c=-1===hs.indexOf(t)}return t&&!s?ms.inProgress:c&&!s&&n?ms.nonPassing:a?ms.celebration:ms.disabled}function ys(e,t){const{certificateData:r,hasScheduledContent:s,isEnrolled:i,userHasPassingGrade:n,courseExitPageIsActive:o}=(0,E.tT)("coursewareMeta",e),{canViewCertificate:a}=(0,E.tT)("courseHomeMeta",e),c=bs(r,s,i,n,o,a),l=c!==ms.disabled;let d;switch(c){case ms.celebration:d=t.formatMessage(as.nextButtonComplete);break;case ms.nonPassing:d=t.formatMessage(as.nextButtonEnd);break;default:d=null}return{exitActive:l,exitText:d}}const xs=(e,t,r,s,i)=>{s&&(0,O.hC)(`edx.ui.lms.course_exit.${s}.clicked`,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gs(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({org_key:e,courserun_key:t,is_staff:r},i))},vs=(e,t,r,s)=>{s&&(0,O.hC)("edx.ui.lms.course_exit.visited",{org_key:e,courserun_key:t,is_staff:r,variant:s})},js=e=>{let{intl:t,variant:r}=e;const{courseId:s}=(0,h.useSelector)((e=>e.courseware)),{org:i}=(0,E.tT)("courseHomeMeta",s),{administrator:o}=(0,k.IC)(),a=(0,v.jsx)(ts.ZP,{style:{textDecoration:"underline"},destination:`${(0,n.getConfig)().LMS_BASE_URL}/dashboard`,className:"text-reset",onClick:()=>xs(i,s,o,"dashboard_footnote",{variant:r}),children:t.formatMessage(as.dashboardLink)});return(0,v.jsx)(ps,{icon:T.IV,text:(0,v.jsx)(Ke.Z,{id:"courseCelebration.dashboardInfo",defaultMessage:"You can access this course and its materials on your {dashboardLink}.",description:"Text that precedes link to learner's dashboard",values:{dashboardLink:a}})})};js.propTypes={intl:M.gm.isRequired,variant:_().string.isRequired};const ws=(0,f.Z)(js),Ss=e=>{let{deadline:t,href:r,intl:s}=e;const{courseId:i}=(0,h.useSelector)((e=>e.courseware)),{org:n}=(0,E.tT)("courseHomeMeta",i),{administrator:o}=(0,k.IC)(),a=(0,v.jsx)(ts.ZP,{style:{textDecoration:"underline"},destination:r,className:"text-reset",onClick:()=>xs(n,i,o,"upgrade_footnote"),children:s.formatMessage(as.upgradeLink)}),c=(0,v.jsx)(N.Ji,{day:"numeric",month:"long",year:"numeric",value:t});return(0,v.jsx)(ps,{icon:T.IV,text:(0,v.jsx)(Ke.Z,{id:"courseExit.upgradeFootnote",defaultMessage:"Access to this course and its materials are available on your dashboard until {expirationDate}. To extend access, {upgradeLink}.",values:{expirationDate:c,upgradeLink:a},description:"Message body to tell learner until when the materiel will be available, and to suggest to upgrade"})})};Ss.propTypes={deadline:_().instanceOf(Date).isRequired,href:_().string.isRequired,intl:M.gm.isRequired};const Os=(0,f.Z)(Ss);var ks=r(74851),Ms=r(49312),Ps=r(91669),Cs=r(52761),Ts=r(78245),Ns=r(37183),Is=r(55498),_s=r(46848);const Es=(0,N.vU)({defaultEmailBody:{id:"learning.celebration.emailBody",defaultMessage:"What are you spending your time learning?",description:"Body when sharing course progress via email"},shareEmail:{id:"learning.social.shareEmail",defaultMessage:"Share your progress via email.",description:"Text email share button"},shareService:{id:"learning.social.shareService",defaultMessage:"Share your progress on {service}."}}),qs=e=>{let{analyticsId:t,className:r,courseId:s,emailBody:i,emailSubject:o,hashtags:a,intl:c,socialMessage:l}=e;const{marketingUrl:d}=(0,E.tT)("coursewareMeta",s),{org:u,title:p}=(0,E.tT)("courseHomeMeta",s);if(!d)return null;const g=(0,n.getConfig)().TWITTER_URL,m=g&&g.substring(g.lastIndexOf("/")+1),f=e=>{if(!t)return;const{administrator:r}=(0,k.IC)();(0,O.hC)(t,{org_key:u,courserun_key:s,course_id:s,is_staff:r,service:e})},h=(0,n.getConfig)().SOCIAL_UTM_MILESTONE_CAMPAIGN?`utm_campaign=${(0,n.getConfig)().SOCIAL_UTM_MILESTONE_CAMPAIGN}&`:"",b=`${d}?${h}utm_medium=social`;return(0,v.jsxs)("div",{className:`social-icons ${r}`,children:[(0,v.jsxs)(ks.Z,{beforeOnClick:()=>f("linkedin"),url:`${b}&utm_source=linkedin`,children:[(0,v.jsx)(Ms.Z,{round:!0,size:32}),(0,v.jsx)("span",{className:"sr-only",children:c.formatMessage(Es.shareService,{service:"LinkedIn"})})]}),m&&(0,v.jsxs)(Ps.Z,{beforeOnClick:()=>f("twitter"),className:"ml-2",hashtags:a,title:l?c.formatMessage(l,{platform:`@${m}`,title:p}):"",url:`${b}&utm_source=twitter`,children:[(0,v.jsx)(Cs.Z,{round:!0,size:32}),(0,v.jsx)("span",{className:"sr-only",children:c.formatMessage(Es.shareService,{service:"Twitter"})})]}),(0,v.jsxs)(Ts.Z,{beforeOnClick:()=>f("facebook"),className:"ml-2",quote:l?c.formatMessage(l,{platform:(0,n.getConfig)().SITE_NAME,title:p}):"",url:`${b}&utm_source=facebook`,children:[(0,v.jsx)(Ns.Z,{round:!0,size:32}),(0,v.jsx)("span",{className:"sr-only",children:c.formatMessage(Es.shareService,{service:"Facebook"})})]}),(0,v.jsxs)(Is.Z,{beforeOnClick:()=>f("email"),body:i?`${c.formatMessage(i)}\n\n`:"",className:"ml-2",subject:o?c.formatMessage(o,{platform:(0,n.getConfig)().SITE_NAME,title:p}):"",url:`${d}?${h}utm_medium=email&utm_source=email`,children:[(0,v.jsx)(_s.Z,{round:!0,size:32}),(0,v.jsx)("span",{className:"sr-only",children:c.formatMessage(Es.shareEmail)})]})]})};qs.defaultProps={analyticsId:"",className:"",emailBody:Es.defaultEmailBody,emailSubject:null,hashtags:[(0,n.getConfig)().TWITTER_HASHTAG],socialMessage:null},qs.propTypes={analyticsId:_().string,className:_().string,courseId:_().string.isRequired,emailBody:_().shape({}),emailSubject:_().shape({}),hashtags:_().arrayOf(_().string),intl:M.gm.isRequired,socialMessage:_().shape({})};const Rs=(0,f.Z)(qs),Zs=e=>{let{intl:t}=e;return(0,v.jsx)(ts.ZP,{variant:"muted",isInline:!0,destination:`${(0,n.getConfig)().LMS_BASE_URL}/dashboard`,children:t.formatMessage(as.dashboardLink)})};Zs.propTypes={intl:M.gm.isRequired};const Ds=e=>{let{intl:t}=e;return(0,n.getConfig)().SUPPORT_URL_ID_VERIFICATION?(0,v.jsx)(ts.ZP,{variant:"muted",isInline:!0,destination:(0,n.getConfig)().SUPPORT_URL_ID_VERIFICATION,children:t.formatMessage(as.idVerificationSupportLink)}):null};Ds.propTypes={intl:M.gm.isRequired};const As=e=>{let{intl:t}=e;const{username:r}=(0,k.IC)();return(0,v.jsx)(ts.ZP,{variant:"muted",isInline:!0,destination:`${(0,n.getConfig)().LMS_BASE_URL}/u/${r}`,children:t.formatMessage(as.profileLink)})};As.propTypes={intl:M.gm.isRequired};const Ls=(0,f.Z)(Zs),Bs=(0,f.Z)(Ds),Us=(0,f.Z)(As);var Hs=r(96416),$s=r(63422);const Fs="loading",Gs="loaded",Ws="failed",Vs=(0,Ce.createSlice)({courseId:null,name:"recommendations",initialState:{recommendationsStatus:Fs},reducers:{fetchCourseRecommendationsRequest:(e,t)=>{let{payload:r}=t;e.courseId=r.courseId,e.recommendationsStatus=Fs},fetchCourseRecommendationsSuccess:(e,t)=>{let{payload:r}=t;e.courseId=r.courseId,e.recommendationsStatus=Gs},fetchCourseRecommendationsFailure:(e,t)=>{let{payload:r}=t;e.courseId=r.courseId,e.recommendationsStatus=Ws}}}),{fetchCourseRecommendationsRequest:zs,fetchCourseRecommendationsSuccess:Ys,fetchCourseRecommendationsFailure:Qs}=Vs.actions,{reducer:Ks}=Vs;var Js=r(88480);const Xs=e=>{let{intl:t,variant:r}=e;const{courseId:s}=(0,h.useSelector)((e=>e.courseware)),{org:i}=(0,E.tT)("courseHomeMeta",s),{administrator:o}=(0,k.IC)(),a=(0,v.jsx)(ts.ZP,{style:{textDecoration:"underline"},destination:(0,n.getConfig)().SEARCH_CATALOG_URL,className:"text-reset",onClick:()=>xs(i,s,o,"catalog_search",{variant:r}),children:t.formatMessage(as.searchOurCatalogLink)});return(0,v.jsx)("div",{className:"row w-100 mx-0 my-2 justify-content-center","data-testid":"catalog-suggestion",children:(0,v.jsxs)("div",{className:"col col-md-8 p-4 bg-info-100 text-center",children:[(0,v.jsx)(C.G,{icon:Js.wn,style:{width:"20px"}})," ",(0,v.jsx)(Ke.Z,{id:"courseExit.catalogSearchSuggestion",defaultMessage:"Looking to learn more? {searchOurCatalogLink} to find more courses and programs to explore.",values:{searchOurCatalogLink:a},description:"Suggesting to learner to explore other course. Shown when they finish the course"})]})})};Xs.propTypes={intl:M.gm.isRequired,variant:_().string.isRequired};const ei=(0,f.Z)(Xs);class ti extends d.Component{renderSrMessage(){return this.props.srMessage?(0,v.jsx)("span",{className:"sr-only",children:this.props.srMessage}):null}render(){return(0,v.jsx)("div",{children:(0,v.jsx)("div",{className:"d-flex justify-content-center align-items-center flex-column",style:{height:"50vh"},children:(0,v.jsx)(fr.Z,{animation:"border",variant:"primary",screenReaderText:this.renderSrMessage()})})})}}function ri(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function si(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ri(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ri(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}ti.propTypes={srMessage:_().node.isRequired};const ii=(0,N.vU)({recommendationsHeading:{id:"courseCelebration.recommendations.heading",description:"Header for recommendations section of course celebration",defaultMessage:"Keep building your skills with these courses!"},recommendationsCourseFooter:{id:"courseCelebration.recommendations.label",description:"Label on a discovery-card that lets a user know that it is a course card",defaultMessage:"Course"},listJoin:{id:"courseCelebration.recommendations.formatting.list_join",description:"Joining mark or word for a list of items, use the {sp} placeholder to include space before the joining word",defaultMessage:"{style, select, punctuation {, } conjunction { {sp}and } other { }}"},browseCatalog:{id:"courseCelebration.recommendations.browse_catalog",description:"Link to course catalog in course celebration",defaultMessage:"Explore more courses"},loadingRecommendations:{id:"courseCelebration.recommendations.loading_recommendations",description:"Screen-reader text for the loading screen for recommendations",defaultMessage:"Loading recommendations"}}),ni=e=>{let{original:{title:t,image:r,owners:s,marketingUrl:i,onClick:n},intl:o}=e;const a=("punctuation",s.map((e=>e.key)).join(o.formatMessage(ii.listJoin,{style:"punctuation",sp:" "})));const c=(0,v.jsx)(Ke.Z,{id:"courseCelebration.recommendations.card.schools.label",description:"Screenreader label for the Schools and Partners running the course.",defaultMessage:"Schools and Partners",children:e=>(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("span",{className:"sr-only",children:[e,": "]}),(0,or.Z)(a,40,{reserveLastWord:-1})]})});return(0,v.jsx)("div",{role:"group","aria-label":t,children:(0,v.jsx)(ts.ZP,{destination:i,className:"text-decoration-none",onClick:n,children:(0,v.jsxs)(Y.ZP,{isClickable:!0,style:{width:"21rem",height:"100%"},children:[(0,v.jsx)(Y.ZP.ImageCap,{src:r.src}),(0,v.jsx)(Y.ZP.Header,{title:(0,or.Z)(t,70,{reserveLastWord:-1}),subtitle:c,size:"sm"}),(0,v.jsxs)(Y.ZP.Section,{children:[" ",(0,v.jsx)(v.Fragment,{})," "]}),(0,v.jsx)(Y.ZP.Footer,{textElement:o.formatMessage(ii.recommendationsCourseFooter),children:(0,v.jsx)(v.Fragment,{})})]})})})};ni.propTypes={original:_().shape({marketingUrl:_().string,title:_().string,image:_().shape({src:_().string}),owners:_().arrayOf(_().shape({key:_().string})),onClick:_().func}).isRequired,intl:M.gm.isRequired};const oi=(0,f.Z)(ni),ai=e=>{let{intl:t,variant:r}=e;const{courseId:s,recommendationsStatus:i}=(0,h.useSelector)((e=>si(si({},e.recommendations),e.courseware))),{recommendations:o}=(0,E.tT)("coursewareMeta",s),{org:a,number:c}=(0,E.tT)("courseHomeMeta",s),l=(0,h.useDispatch)(),u=`${a}+${c}`,{administrator:p}=(0,k.IC)();(0,d.useEffect)((()=>{l(function(e,t){return async r=>{r(zs({courseId:t}));try{const s=await async function(e){const t=(0,n.getConfig)().DISCOVERY_API_BASE_URL;if(!t)return[];const r=new URL(`${t}/api/v1/course_recommendations/${e}?exclude_utm=true`),s=new URL(`${(0,n.getConfig)().LMS_BASE_URL}/api/enrollment/v1/enrollment`),[i,o]=await Promise.all([(0,k.kj)().get(r),(0,k.kj)().get(s)]);return function(e,t){let{data:{uuid:r,recommendations:s}}=e,{data:i}=t;const n=i.map((e=>{let{courseDetails:{courseId:t}}=e;return t}));return s.filter((e=>{let{uuid:t,courseRunKeys:s}=e;return t!==r&&s.every((e=>!n.includes(e)))}))}((0,vr.u3)(i),(0,vr.u3)(o))}(e);r((0,E.QB)({modelType:"coursewareMeta",model:{id:t,recommendations:s}})),r(Ys({courseId:t}))}catch(e){(0,xr.H)(e),r(Qs({courseId:t}))}}}(u,s))}),[l]);const g=o?o.length:0;if(i&&i!==Fs&&(0,O.hC)("edx.ui.lms.course_exit.recommendations.viewed",{course_key:u,recommendations_status:i,recommendations_length:g}),i===Ws||i===Gs&&g<2)return(0,v.jsx)(ei,{variant:r});if(i===Fs)return(0,v.jsx)(ti,{srMessage:t.formatMessage(ii.loadingRecommendations)});const m=o.map((e=>{return si(si({},e),{},{onClick:(t=e.marketingUrl,e=>{e.preventDefault(),xs(a,s,p,"recommendation_discovery_card"),setTimeout((()=>{window.location.href=t}),200)})});var t}));return(0,v.jsxs)("div",{className:"course-recommendations d-flex flex-column align-items-center","data-testid":"course-recommendations",children:[(0,v.jsx)("h2",{className:"text-center mb-3",children:t.formatMessage(ii.recommendationsHeading)}),(0,v.jsx)("div",{className:"mb-2 mt-3",children:(0,v.jsx)(Hs.Z,{isPaginated:!0,itemCount:g,data:m,columns:[{Header:"Title",accessor:"title"}],initialState:{pageSize:3,pageIndex:0},children:(0,v.jsx)($s.Z,{CardComponent:oi})})}),(0,v.jsx)(ts.ZP,{style:{textDecoration:"underline"},destination:(0,n.getConfig)().SEARCH_CATALOG_URL,className:"text-center",children:t.formatMessage(ii.browseCatalog)})]})};ai.propTypes={intl:M.gm.isRequired,variant:_().string.isRequired};const ci=(0,f.Z)(ai);function li(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}const di=e=>{let{intl:t}=e;const r=(0,Xr.Z)().width>=es.Z.medium.minWidth,{courseId:s}=(0,h.useSelector)((e=>e.courseware)),i=(0,h.useDispatch)(),{certificateData:o,end:a,linkedinAddToProfileUrl:c,marketingUrl:l,offer:u,relatedPrograms:p,title:f,verifyIdentityUrl:b,verificationStatus:y}=(0,E.tT)("coursewareMeta",s),{org:x,verifiedMode:j,canViewCertificate:w,userTimezone:S}=(0,E.tT)("courseHomeMeta",s),{certStatus:O,certWebViewUrl:M,certificateAvailableDate:T}=o||{},{administrator:I}=(0,k.IC)(),_=(0,v.jsx)(Ls,{}),q=(0,v.jsx)(Bs,{}),R=(0,v.jsx)(Us,{}),Z=S?{timeZone:S}:{};let D,A,L,B,U,H=null,$="outline-primary",F=null,G=null,W=ns,V="celebration_generic";switch(O){case"downloadable":U=t.formatMessage(as.certificateHeaderDownloadable),B=(0,v.jsx)("p",{children:(0,v.jsx)(Ke.Z,{id:"courseCelebration.certificateBody.available",defaultMessage:" Showcase your accomplishment on LinkedIn or your resumé today. You can download your certificate now and access it any time from your {dashboardLink} and {profileLink}.",values:{dashboardLink:_,profileLink:R},description:"Recommending an action for learner when course certificate is available"})}),M&&(D=`${(0,n.getConfig)().LMS_BASE_URL}${M}`,A=t.formatMessage(as.viewCertificateButton)),c&&(H=(0,v.jsxs)(P.ZP,{className:"mr-3",href:c,onClick:()=>xs(x,s,I,"linkedin_add_to_profile"),style:{backgroundColor:"#2867B2",border:"none"},children:[(0,v.jsx)(C.G,{icon:Jr.hw,className:"mr-3"}),`${t.formatMessage(as.linkedinAddToProfileButton)}`]})),F="view_cert",V="celebration_with_cert",L=(0,v.jsx)(ws,{variant:V});break;case"earned_but_not_available":{const e=(0,v.jsx)(N.Ji,{value:a,day:"numeric",month:"long",year:"numeric"}),r=(0,v.jsx)(N.Ji,{value:T,day:"numeric",month:"long",year:"numeric"});U=t.formatMessage(as.certificateHeaderNotAvailable),B=(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("p",{children:(0,v.jsx)(Ke.Z,{id:"courseCelebration.certificateBody.notAvailable.endDate.v2",defaultMessage:"This course ends on {endDate}. Final grades and any earned certificates are scheduled to be available after {certAvailableDate}.",values:{endDate:e,certAvailableDate:r},description:"This shown for leaner when they are eligible for certifcate but it't not available yet, it could because leaners just finished the course quickly!"})}),(0,v.jsx)("p",{children:t.formatMessage(as.certificateNotAvailableBodyAccessCert)})]}),V="celebration_with_unavailable_cert",L=(0,v.jsx)(ws,{variant:V});break}case"requesting":F="request_cert",H=(0,v.jsx)(P.ZP,{variant:$,onClick:()=>{xs(x,s,I,F),i((0,m.CW)(s))},children:t.formatMessage(as.requestCertificateButton)}),U=t.formatMessage(as.certificateHeaderRequestable),B=(0,v.jsx)("p",{children:t.formatMessage(as.requestCertificateBodyText)}),V="celebration_with_requestable_cert",L=(0,v.jsx)(ws,{variant:V});break;case"unverified":U=t.formatMessage(as.certificateHeaderUnverified),V="celebration_unverified",L=(0,v.jsx)(ws,{variant:V}),"pending"===y?B=(0,v.jsx)("p",{children:t.formatMessage(as.verificationPending)}):(A=t.formatMessage(as.verifyIdentityButton),F="verify_id",D=b,B=(0,v.jsx)("p",{children:(0,v.jsx)(Ke.Z,{id:"courseCelebration.certificateBody.unverified",defaultMessage:"In order to generate a certificate, you must complete ID verification. {idVerificationSupportLink} now.",values:{idVerificationSupportLink:q},description:"Its shown when learner are not verified thus it recommends going over the verification process"})}));break;case"audit_passing":case"honor_passing":j?(U=t.formatMessage(as.certificateHeaderUpgradable),B=(0,v.jsxs)("p",{children:[(0,v.jsx)(Ke.Z,{id:"courseCelebration.certificateBody.upgradable",defaultMessage:"It’s not too late to upgrade. For {price} you will unlock access to all graded assignments in this course. Upon completion, you will receive a verified certificate which is a valuable credential to improve your job prospects and advance your career, or highlight your certificate in school applications.",values:{price:(0,v.jsx)(vt,{inline:!0,offer:u,verifiedMode:j})},description:"Body text when the learner needs to upgrade to earn a certifcate and they have passed the course"}),(0,v.jsx)("br",{}),(0,n.getConfig)().SUPPORT_URL_VERIFIED_CERTIFICATE&&(0,v.jsx)(ts.ZP,{className:"text-gray-700",style:{textDecoration:"underline"},destination:(0,n.getConfig)().SUPPORT_URL_VERIFIED_CERTIFICATE,children:t.formatMessage(as.verifiedCertificateSupportLink)})]}),A=t.formatMessage(as.upgradeButton),F="upgrade",D=j.upgradeUrl,$="primary",u&&(G=(0,v.jsx)("span",{className:"ml-2 align-middle",children:(0,v.jsx)(Ke.Z,{id:"courseCelebration.upgradeDiscountCodePrompt",defaultMessage:"Use code {code} at checkout for {percent}% off!",values:{code:(0,v.jsx)("b",{children:u.code}),percent:u.percentage},description:"Shown if learner can use a discount code when they upgrade the course"})})),W=os,V="celebration_upgrade",L=j.accessExpirationDate?(0,v.jsx)(Os,{deadline:j.accessExpirationDate,href:j.upgradeUrl}):(0,v.jsx)(ws,{variant:V})):V="celebration_audit_no_upgrade";break;default:if(!w){V="celebration_with_unavailable_cert",U=t.formatMessage(as.certificateHeaderNotAvailable);const e=t.formatDate(a,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?li(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):li(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({year:"numeric",month:"long",day:"numeric"},Z));B=(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("p",{children:t.formatMessage(as.certificateNotAvailableEndDateBody,{endDate:e})}),(0,v.jsx)("p",{children:t.formatMessage(as.certificateNotAvailableBodyAccessCert)})]})}}return(0,d.useEffect)((()=>vs(x,s,I,V)),[x,s,I,V]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(g.q,{children:(0,v.jsx)("title",{children:`${t.formatMessage(as.congratulationsHeader)} | ${f} | ${(0,n.getConfig)().SITE_NAME}`})}),(0,v.jsxs)("div",{className:"row w-100 mx-0 mb-4 px-5 py-4 border border-light",children:[(0,v.jsx)("div",{className:"col-12 p-0 h2 text-center",children:t.formatMessage(as.congratulationsHeader)}),(0,v.jsxs)("div",{className:"col-12 p-0 font-weight-normal lead text-center",children:[t.formatMessage(as.completedCourseHeader),l&&` ${t.formatMessage(as.shareMessage)}`,(0,v.jsx)(Rs,{analyticsId:"edx.ui.lms.course_exit.social_share.clicked",className:"mt-2",courseId:s,emailSubject:as.socialMessage,socialMessage:as.socialMessage})]}),(0,v.jsxs)("div",{className:"col-12 mt-3 mb-4 px-0 px-md-5 text-center",children:[!r&&(0,v.jsx)("img",{src:ss,alt:`${t.formatMessage(as.congratulationsImage)}`,className:"img-fluid"}),r&&(0,v.jsx)("img",{src:is,alt:`${t.formatMessage(as.congratulationsImage)}`,className:"img-fluid",style:{width:"36rem"}})]}),(0,v.jsxs)("div",{className:"col-12 px-0 px-md-5",children:[U&&(0,v.jsx)(lt.Z,{variant:"success",icon:rs.Z,children:(0,v.jsxs)("div",{className:"row w-100 m-0",children:[(0,v.jsxs)("div",{className:"col order-1 order-md-0 pl-0 pr-0 pr-md-5",children:[(0,v.jsx)("div",{className:"h4",children:U}),B,(0,v.jsxs)("div",{className:"mt-2",children:[H,D&&(0,v.jsx)(P.ZP,{variant:$,href:D,className:"w-xs-100 w-md-auto",onClick:()=>xs(x,s,I,F),children:A}),G]})]}),"unverified"!==O&&(0,v.jsx)("div",{className:"col-12 order-0 col-md-3 order-md-1 w-100 mb-3 p-0 text-center",children:(0,v.jsx)("img",{src:W,alt:`${t.formatMessage(as.certificateImage)}`,className:"w-100",style:{maxWidth:"13rem"}})})]})}),p&&p.map((e=>(0,v.jsx)(ds,{progress:e.progress,title:e.title,type:e.slug,url:e.url},e.uuid))),L,(0,v.jsx)(ci,{variant:V})]})]})]})};di.propTypes={intl:M.gm.isRequired};const ui=(0,f.Z)(di),pi=e=>{let{intl:t}=e;const{courseId:r}=(0,h.useSelector)((e=>e.courseware)),{org:s,tabs:i,title:o}=(0,E.tT)("courseHomeMeta",r),{administrator:a}=(0,k.IC)(),c=i.find((e=>"dates"===e.slug)),l=c&&c.url;return(0,d.useEffect)((()=>vs(s,r,a,"in_progress")),[s,r,a]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(g.q,{children:(0,v.jsx)("title",{children:`${t.formatMessage(as.endOfCourseTitle)} | ${o} | ${(0,n.getConfig)().SITE_NAME}`})}),(0,v.jsxs)("div",{className:"row w-100 mx-0 mb-4 px-5 py-4 border border-light justify-content-center",children:[(0,v.jsx)("div",{className:"col-12 p-0 h2 text-center",children:t.formatMessage(as.courseInProgressHeader)}),(0,v.jsx)(lt.Z,{variant:"primary",className:"mt-4",children:(0,v.jsxs)("div",{className:"row w-100 m-0 align-items-start",children:[(0,v.jsx)("div",{className:"col-md p-0",children:t.formatMessage(as.courseInProgressDescription)}),l&&(0,v.jsx)(P.ZP,{variant:"primary",className:"mt-3 my-md-0 mb-1 ml-md-5 w-xs-100 w-md-auto",href:l,onClick:()=>xs(s,r,a,"view_dates_tab"),children:t.formatMessage(as.viewCourseScheduleButton)})]})}),(0,v.jsx)(ws,{variant:"in_progress"}),(0,v.jsx)(ei,{variant:"in_progress"})]})]})};pi.propTypes={intl:M.gm.isRequired};const gi=(0,f.Z)(pi),mi=e=>{let{intl:t}=e;const{courseId:r}=(0,h.useSelector)((e=>e.courseware)),{org:s,tabs:i,title:o}=(0,E.tT)("courseHomeMeta",r),{administrator:a}=(0,k.IC)(),c=i.find((e=>"progress"===e.slug)),l=c&&c.url;return(0,d.useEffect)((()=>vs(s,r,a,"nonpassing")),[s,r,a]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(g.q,{children:(0,v.jsx)("title",{children:`${t.formatMessage(as.endOfCourseTitle)} | ${o} | ${(0,n.getConfig)().SITE_NAME}`})}),(0,v.jsxs)("div",{className:"row w-100 mx-0 mb-4 px-5 py-4 border border-light justify-content-center",children:[(0,v.jsx)("div",{className:"col-12 p-0 h2 text-center",children:t.formatMessage(as.endOfCourseHeader)}),(0,v.jsx)(lt.Z,{variant:"primary",className:"col col-lg-10 mt-4",children:(0,v.jsxs)("div",{className:"row w-100 m-0 align-items-start",children:[(0,v.jsx)("div",{className:"flex-grow-1 col-sm p-0",children:t.formatMessage(as.endOfCourseDescription)}),l&&(0,v.jsx)(P.ZP,{variant:"primary",className:"flex-shrink-0 mt-3 mt-sm-0 mb-1 mb-sm-0 ml-sm-5",href:l,onClick:()=>xs(s,r,a,"view_grades"),children:t.formatMessage(as.viewGradesButton)})]})}),(0,v.jsx)(ws,{variant:"nonpassing"}),(0,v.jsx)(ei,{variant:"nonpassing"})]})]})};mi.propTypes={intl:M.gm.isRequired};const fi=(0,f.Z)(mi),hi=e=>{let{intl:t}=e;const{courseId:r}=(0,h.useSelector)((e=>e.courseware)),{certificateData:s,courseExitPageIsActive:i,courseGoals:o,enrollmentMode:a,hasScheduledContent:c,isEnrolled:l,userHasPassingGrade:u}=(0,E.tT)("coursewareMeta",r),{isMasquerading:g,canViewCertificate:m}=(0,E.tT)("courseHomeMeta",r),f=bs(s,c,l,u,i,m);o&&"audit"===a&&!g&&(0,d.useEffect)((()=>{!async function(e,t,r){(async function(e){const t=new URL(`${(0,n.getConfig)().LMS_BASE_URL}/api/course_home/save_course_goal`);(0,k.kj)().post(t.href,{course_id:e,subscribed_to_reminders:!1})})(e)}(r)}),[]);let b=null;if(f===ms.nonPassing)b=(0,v.jsx)(fi,{});else if(f===ms.inProgress)b=(0,v.jsx)(gi,{});else{if(f!==ms.celebration)return(0,v.jsx)(p.Fg,{to:`/course/${r}`,replace:!0});b=(0,v.jsx)(ui,{})}return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"row w-100 mt-2 mb-4 justify-content-end",children:(0,v.jsx)(P.ZP,{variant:"outline-primary",href:`${(0,n.getConfig)().LMS_BASE_URL}/dashboard`,children:t.formatMessage(as.viewCoursesButton)})}),b]})};hi.propTypes={intl:M.gm.isRequired};const bi=(0,f.Z)(hi);var yi=r(88713),xi=r(25643),vi=r(30351),ji=r(35373),wi=r(21373),Si=r(27349);const Oi=(0,N.vU)({failure:{id:"learning.loading.failure",defaultMessage:"There was an error loading this course.",description:"Can be because internet connection or any technical other reason"},loading:{id:"learning.loading",defaultMessage:"Loading course page…",description:"When content of the course is still loading...etc"}});var ki=r(24113);const Mi=(0,N.vU)({courseMaterial:{id:"learn.navigation.course.tabs.label",defaultMessage:"Course Material",description:"The accessible label for course tabs navigation"}});var Pi=r(43350);const Ci={position:"absolute",left:0,pointerEvents:"none",visibility:"hidden",maxWidth:"100%"};function Ti(){const e=(0,d.useRef)(null),t=(0,d.useRef)(null),r=(0,d.useRef)({}),[s,i]=(0,d.useState)(-1),n=(0,Xr.Z)();return(0,d.useLayoutEffect)((()=>{const s=e.current.getBoundingClientRect();if(!s.width===r.current.width)return;r.current=s;const n=Array.prototype.slice.call(e.current.children),{nextIndexOfLastVisibleChild:o}=n.filter((e=>e!==t.current)).reduce(((e,t,r)=>(e.sumWidth+=Math.floor(t.getBoundingClientRect().width),e.sumWidth<=s.width&&(e.nextIndexOfLastVisibleChild=r),e)),{sumWidth:t.current?t.current.getBoundingClientRect().width:0,nextIndexOfLastVisibleChild:-1});i(o)}),[n,e.current]),[s,e,Ci,t]}const Ni=["children","className"];function Ii(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function _i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ii(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ii(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Ei=e=>{let{children:t,className:r}=e,s=function(e,t){if(null==e)return{};var r,s,i=function(e,t){if(null==e)return{};var r,s,i={},n=Object.keys(e);for(s=0;s<n.length;s++)r=n[s],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,Ni);const[i,n,o,a]=Ti(),c=(0,d.useMemo)((()=>{const e=d.Children.toArray(t),r=i+1,s=e.map(((e,t)=>d.cloneElement(e,{style:t>i?o:null}))),n=e.slice(r).map((e=>d.cloneElement(e,{className:"dropdown-item"})));return s.splice(r,0,(0,v.jsx)("div",{className:"nav-item flex-shrink-0",style:r>=d.Children.count(t)?o:null,ref:a,children:(0,v.jsxs)(Pi.ZP,{className:"h-100",children:[(0,v.jsx)(Pi.ZP.Toggle,{variant:"link",className:"nav-link h-100",id:"learn.course.tabs.navigation.overflow.menu",children:(0,v.jsx)(Ke.Z,{id:"learn.course.tabs.navigation.overflow.menu",description:"The title of the overflow menu for course tabs",defaultMessage:"More..."})}),(0,v.jsx)(Pi.ZP.Menu,{className:"dropdown-menu-right",children:n})]})},"overflow")),s}),[t,i,o,a]);return(0,v.jsx)("nav",_i(_i({},s),{},{className:ge()("nav flex-nowrap",r),ref:n,children:c}))};Ei.propTypes={children:_().node,className:_().string},Ei.defaultProps={children:null,className:void 0};const qi=Ei;var Ri=r(26319);const Zi=(0,N.vU)({searchOpenAction:{id:"learn.coursewareSerch.openAction",defaultMessage:"Search within this course",description:"Aria-label for a button that will pop up Courseware Search."},searchSubmitLabel:{id:"learn.coursewareSerch.submitLabel",defaultMessage:"Search",description:"Button label that will submit Courseware Search."},searchClearAction:{id:"learn.coursewareSerch.clearAction",defaultMessage:"Clear search",description:"Button label that will the current Courseware Search input."},searchCloseAction:{id:"learn.coursewareSerch.closeAction",defaultMessage:"Close the search form",description:"Aria-label for a button that will close Courseware Search."},searchModuleTitle:{id:"learn.coursewareSerch.searchModuleTitle",defaultMessage:"Search this course",description:"Title for the Courseware Search module."},searchBarPlaceholderText:{id:"learn.coursewareSerch.searchBarPlaceholderText",defaultMessage:"Search",description:"Placeholder text for the Courseware Search input control"},loading:{id:"learn.coursewareSerch.loading",defaultMessage:"Searching...",description:"Screen reader text to use on the spinner while the search is performing."},searchResultsNone:{id:"learn.coursewareSerch.searchResultsNone",defaultMessage:"No results found.",description:"Text to show when the Courseware Search found no results matching the criteria."},searchResultsLabel:{id:"learn.coursewareSerch.searchResultsLabel",defaultMessage:'Results for "{keyword}":',description:"Text to show above the search results response list."},searchResultsError:{id:"learn.coursewareSerch.searchResultsError",defaultMessage:"There was an error on the search process. Please try again in a few minutes. If the problem persists, please contact the support team.",description:"Error message to show to the users when there's an error with the endpoint or the returned payload format."},"filter:all":{id:"learn.coursewareSerch.filter:all",defaultMessage:"All content",description:"Label for the search results filter that shows all content (no filter)."},"filter:text":{id:"learn.coursewareSerch.filter:text",defaultMessage:"Text",description:"Label for the search results filter that shows results with text content."},"filter:video":{id:"learn.coursewareSerch.filter:video",defaultMessage:"Video",description:"Label for the search results filter that shows results with video content."},"filter:sequence":{id:"learn.coursewareSerch.filter:sequence",defaultMessage:"Section",description:"Label for the search results filter that shows results with section content."},"filter:other":{id:"learn.coursewareSerch.filter:other",defaultMessage:"Other",description:"Label for the search results filter that shows results with other content."}});var Di=r(53059);function Ai(){const{courseId:e}=(0,p.UO)(),[t,r]=(0,d.useState)(!1);return(0,d.useEffect)((()=>{(0,m.Al)(e).then((e=>r(e.enabled)))}),[e]),t}const Li={q:"",f:""};function Bi(){const[e,t]=(0,Qe.lr)(Li),r=e.get("q"),s=e.get("f")?.toLowerCase();return{query:r,filter:s,setQuery:e=>t((t=>({q:e,f:t.get("f")}))),setFilter:e=>t((t=>({q:t.get("q"),f:e}))),clearSearchParams:()=>t(Li)}}const Ui=e=>{let{intl:t}=e;const r=(0,h.useDispatch)(),s=Ai(),{query:i}=Bi(),n=()=>{r((0,ye.xZ)(!0))};return(0,d.useEffect)((()=>{s&&i&&n()}),[s]),s?(0,v.jsx)("div",{className:"courseware-searc-toggle",children:(0,v.jsx)(P.ZP,{variant:"tertiary",size:"sm",className:"p-1 mt-2 mr-2 rounded-lg","aria-label":t.formatMessage(Zi.searchOpenAction),onClick:n,"data-testid":"courseware-search-open-button",children:(0,v.jsx)(re.Z,{src:Ri.Z})})}):null};Ui.propTypes={intl:M.gm.isRequired};const Hi=(0,f.Z)(Ui);var $i=r(77979);const Fi=e=>{let{intl:t,searchTerm:r,onSubmit:s,onChange:i,placeholder:n}=e;return(0,v.jsxs)($i.ZP.Advanced,{value:r,onSubmit:s,onChange:i,submitButtonLocation:"external",className:"courseware-search-form",screenReaderText:{label:t.formatMessage(Zi.searchSubmitLabel),clearButton:t.formatMessage(Zi.searchClearAction),submitButton:null},children:[(0,v.jsxs)("div",{className:"pgn__searchfield_wrapper","data-testid":"courseware-search-form",children:[(0,v.jsx)($i.ZP.Label,{}),(0,v.jsx)($i.ZP.Input,{placeholder:n,autoFocus:!0}),(0,v.jsx)($i.ZP.ClearButton,{})]}),(0,v.jsx)($i.ZP.SubmitButton,{buttonText:t.formatMessage(Zi.searchSubmitLabel),submitButtonLocation:"external","data-testid":"courseware-search-form-submit"})]})};Fi.propTypes={intl:M.gm.isRequired,searchTerm:_().string,onSubmit:_().func,onChange:_().func,placeholder:_().string},Fi.defaultProps={searchTerm:void 0,onSubmit:void 0,onChange:void 0,placeholder:void 0};const Gi=(0,f.Z)(Fi);var Wi=r(16532),Vi=r(25053),zi=r(82356),Yi=r(33091),Qi=r(56189),Ki=r(83194);const Ji=e=>{let{intl:t}=e;return(0,v.jsx)("div",{className:"courseware-search-results",children:(0,v.jsx)("p",{className:"courseware-search-results__empty","data-testid":"no-results",children:t.formatMessage(Zi.searchResultsNone)})})};Ji.propTypes={intl:M.gm.isRequired};const Xi=(0,f.Z)(Ji);function en(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function tn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?en(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):en(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const rn={text:zi.Z,video:Yi.Z,sequence:Qi.Z,other:Ki.Z},sn=Ki.Z,nn=e=>{let{results:t=[]}=e;if(!t?.length)return(0,v.jsx)(Xi,{});const r=`${(0,n.getConfig)().LMS_BASE_URL}`;return(0,v.jsx)("div",{className:"courseware-search-results","data-testid":"search-results",children:t.map((e=>{let{id:t,title:s,type:i,location:n,url:o,contentHits:a}=e;const c=i.toLowerCase(),l=rn[c]||sn,d=o.startsWith("/")?{href:`${r}${o}`}:{href:o,target:"_blank",rel:"nofollow"};return(0,v.jsxs)("a",tn(tn({className:"courseware-search-results__item"},d),{},{children:[(0,v.jsx)("div",{className:"courseware-search-results__icon",children:(0,v.jsx)(re.Z,{src:l})}),(0,v.jsxs)("div",{className:"courseware-search-results__info",children:[(0,v.jsxs)("div",{className:"courseware-search-results__title",children:[(0,v.jsx)("span",{children:s}),a?(0,v.jsx)("em",{children:a}):null]}),n?.length?(0,v.jsx)("ul",{className:"courseware-search-results__breadcrumbs",children:n.map(((e,t)=>(0,v.jsx)("li",{children:(0,v.jsx)("div",{children:e})},`${t}:${e}`)))}):null]})]}),t)}))})};nn.propTypes={results:_().arrayOf(_().shape({id:_().string,title:_().string,type:_().string,location:_().arrayOf(_().string),url:_().string,contentHits:_().number}))},nn.defaultProps={results:[]};const on=nn,an=["type"];function cn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function ln(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cn(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const dn="all",un=["text","video","sequence"],pn="other",gn=[dn,...un,pn],mn=e=>{let{intl:t}=e;const{courseId:r}=(0,p.UO)(),s=(0,E.tT)("contentSearchResults",r),{filter:i,setFilter:n}=Bi();if(!s)return null;const{results:o=[]}=s;if(!o.length)return(0,v.jsx)(on,{});const a=(0,d.useMemo)((()=>{const e=o.reduce(((e,t)=>{let{type:r}=t,s=function(e,t){if(null==e)return{};var r,s,i=function(e,t){if(null==e)return{};var r,s,i={},n=Object.keys(e);for(s=0;s<n.length;s++)r=n[s],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(t,an);const i=un.includes(r)?r:pn;return e[dn].push(ln({type:i},s)),e[i]=[...e[i]||[],ln({type:i},s)],e}),{[dn]:[]}),t={};return gn.forEach((r=>{e[r]&&(t[r]=e[r])})),t}),[s]),c=Object.keys(a);if(c.length<3)return(0,v.jsx)(on,{results:a[dn]});const l=(0,d.useMemo)((()=>c.map((e=>({key:e,label:t.formatMessage(Zi[`filter:${e}`]),count:a[e].length})))),[a]),u=gn.includes(i)?i:dn;return(0,v.jsx)(Wi.ZP,{id:"courseware-search-results-tabs",className:"courseware-search-results-tabs","data-testid":"courseware-search-results-tabs",variant:"tabs",activeKey:u,onSelect:n,children:l.filter((e=>{let{count:t}=e;return t>0})).map((e=>{let{key:t,label:r}=e;return(0,v.jsx)(Vi.Z,{eventKey:t,title:r,"data-testid":`courseware-search-results-tabs-${t}`,children:(0,v.jsx)(on,{results:a[t]})},t)}))})};mn.propTypes={intl:M.gm.isRequired};const fn=(0,f.Z)(mn),hn=["intl"];function bn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function yn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bn(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const xn=e=>{let{intl:t}=e,s=function(e,t){if(null==e)return{};var r,s,i=function(e,t){if(null==e)return{};var r,s,i={},n=Object.keys(e);for(s=0;s<n.length;s++)r=n[s],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,hn);const{courseId:i}=(0,p.UO)(),{query:n,setQuery:o,clearSearchParams:a}=Bi(),c=(0,h.useDispatch)(),{org:l}=(0,E.tT)("courseHomeMeta",i),{loading:u,searchKeyword:g,errors:f,total:b}=(0,E.tT)("contentSearchResults",i);(0,d.useLayoutEffect)((()=>(window.scrollTo(0,0),document.body.classList.add("_search-no-scroll"),()=>{document.body.classList.remove("_search-no-scroll")})),[]);const y=function(e){const[t,s]=(0,d.useState)(void 0),i=document.getElementById(e);if(i)return(0,d.useLayoutEffect)((()=>{const e=(0,Di.debounce)((function(){const e=i.getBoundingClientRect();s(e)}),100,{leading:!0});return r.g.addEventListener("resize",e),r.g.addEventListener("scroll",e),e(),()=>{r.g.removeEventListener("resize",e),r.g.removeEventListener("scroll",e)}}),[]),t;console.warn(`useElementBoundingBox(): Unable to find element with id='${e}' in the document.`)}("courseTabsNavigation"),x=y?`${Math.floor(y.top)}px`:0,j=()=>{a(),c((0,E.QB)({modelType:"contentSearchResults",model:{id:i,searchKeyword:"",results:[],errors:void 0,loading:!1}}))},w=e=>{e?((0,O.eb)("edx.course.home.courseware_search.submit",{org_key:l,courserun_key:i,event_type:"searchKeyword",keyword:e}),c((0,m.T5)(i,e)),o(e)):j()};(0,d.useEffect)((()=>{w(n)}),[]);let S="idle";return u?S="loading":f?S="error":g&&(S="results"),(0,v.jsxs)("section",yn(yn({className:"courseware-search",style:{"--modal-top-position":x},"data-testid":"courseware-search-section"},s),{},{children:[(0,v.jsx)("div",{className:"courseware-search__close",children:(0,v.jsx)(P.ZP,{variant:"tertiary",className:"p-1","aria-label":t.formatMessage(Zi.searchCloseAction),onClick:()=>{j(),c((0,ye.xZ)(!1))},"data-testid":"courseware-search-close-button",children:(0,v.jsx)(re.Z,{src:ht.Z})})}),(0,v.jsx)("div",{className:"courseware-search__outer-content",children:(0,v.jsxs)("div",{className:"courseware-search__content",children:[(0,v.jsx)("h1",{className:"h2",children:t.formatMessage(Zi.searchModuleTitle)}),(0,v.jsx)(Gi,{searchTerm:n,onSubmit:w,onChange:e=>{e!==n&&(e||j())},placeholder:t.formatMessage(Zi.searchBarPlaceholderText)}),"loading"===S?(0,v.jsx)("div",{className:"courseware-search__spinner","data-testid":"courseware-search-spinner",children:(0,v.jsx)(fr.Z,{animation:"border",variant:"light",screenReaderText:t.formatMessage(Zi.loading)})}):null,"error"===S&&(0,v.jsx)(lt.Z,{className:"mt-4",variant:"danger","data-testid":"courseware-search-error",children:t.formatMessage(Zi.searchResultsError)}),"results"===S?(0,v.jsxs)(v.Fragment,{children:[b>0?(0,v.jsx)("div",{className:"courseware-search__results-summary","aria-live":"polite","aria-relevant":"all","aria-atomic":"true","data-testid":"courseware-search-summary",children:t.formatMessage(Zi.searchResultsLabel,{total:b,keyword:g})}):null,(0,v.jsx)(fn,{})]}):null]})})]}))};xn.propTypes={intl:M.gm.isRequired};const vn=(0,f.Z)(xn),jn=e=>{let{activeTabSlug:t,className:r,tabs:s,intl:i}=e;const{show:n}=function(){const e=Ai(),t=(0,h.useSelector)((e=>e.courseHome.showSearch));return{show:e&&t}}();return(0,v.jsxs)("div",{id:"courseTabsNavigation",className:ge()("course-tabs-navigation",r),children:[(0,v.jsx)("div",{className:"container-xl",children:(0,v.jsx)(qi,{className:"nav-underline-tabs","aria-label":i.formatMessage(Mi.courseMaterial),children:s.map((e=>{let{url:r,title:s,slug:i}=e;return(0,v.jsx)("a",{className:ge()("nav-item flex-shrink-0 nav-link",{active:i===t}),href:r,children:s},i)}))})}),(0,v.jsx)("div",{className:"course-tabs-navigation__search-toggle",children:(0,v.jsx)(Hi,{})}),n&&(0,v.jsx)(vn,{})]})};jn.propTypes={activeTabSlug:_().string,className:_().string,tabs:_().arrayOf(_().shape({title:_().string.isRequired,slug:_().string.isRequired,url:_().string.isRequired})).isRequired,intl:M.gm.isRequired},jn.defaultProps={activeTabSlug:void 0,className:null};const wn=(0,f.Z)(jn);var Sn=r(36341),On=r(84447),kn=r(3500);const Mn=r.p+"b69837871e2ef32b6802932f909dd089.png",Pn=r.p+"1a0e59bbcf5275b2cf9957f81a555867.png",Cn=(0,N.vU)({congratulations:{id:"learning.streakCelebration.congratulations",defaultMessage:"Congratulations!",description:"Shown to learners when are using the learning app for X days in a row"},streakBody:{id:"learning.streakCelebration.body",defaultMessage:"Keep it up, you’re on a roll!"},streakButton:{id:"learning.streakCelebration.button",defaultMessage:"Keep it up",description:"Text on the button which closes the celebration dialog"},streakButtonSrOnly:{id:"learning.streakCelebration.buttonSrOnly",defaultMessage:"Close modal and continue",description:"Screenreader label for streakButton text"},streakButtonAA759:{id:"learning.streakCelebration.buttonAA759",defaultMessage:"Continue with course"},streakHeader:{id:"learning.streakCelebration.header",defaultMessage:"day streak",description:"Will come after a number. For example, 3 day streak"},streakFactoidABoldedSection:{id:"learning.streakCelebration.factoidABoldedSection",defaultMessage:"are 20x more likely to pass their course",description:"This bolded section is in the following sentence: Users who learn 3 days in a row {bolded_section} than those who don't."},streakFactoidBBoldedSection:{id:"learning.streakCelebration.factoidBBoldedSection",defaultMessage:"complete 5x as much course content on average",description:"This bolded section is in the following sentence: Users who learn 3 days in a row {bolded_section} vs. those who don't."},streakDiscountMessage:{id:"learning.streakCelebration.streakDiscountMessage",defaultMessage:"You’ve unlocked a {percent}% off discount when you upgrade this course for a limited time only.",description:"This message describes a discount the user becomes eligible for when they hit their three day streak"}});function Tn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function Nn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tn(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const In=["courseId","metadataModel","streakLengthToCelebrate","intl","isStreakCelebrationOpen","closeStreakCelebration","streakDiscountCouponEnabled","verifiedMode"];function _n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function En(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_n(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const qn=e=>{let{intl:t}=e;return(0,v.jsxs)("span",{children:[t.formatMessage(Cn.streakButton),(0,v.jsxs)("span",{className:"sr-only",children:[". ",t.formatMessage(Cn.streakButtonSrOnly)]})]})},Rn=e=>{let{courseId:t,metadataModel:r,streakLengthToCelebrate:s,intl:i,isStreakCelebrationOpen:o,closeStreakCelebration:a,streakDiscountCouponEnabled:c,verifiedMode:l}=e,u=function(e,t){if(null==e)return{};var r,s,i=function(e,t){if(null==e)return{};var r,s,i={},n=Object.keys(e);for(s=0;s<n.length;s++)r=n[s],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,In);const{org:p,celebrations:g,username:m}=(0,E.tT)("courseHomeMeta",t),f=function(e,t){const r=e.formatMessage(Cn.streakFactoidABoldedSection),s=e.formatMessage(Cn.streakFactoidBBoldedSection),i=[(0,v.jsx)(Ke.Z,{id:"learning.streakcelebration.factoida",defaultMessage:"Users who learn {streak_length} days in a row {bolded_section} than those who don’t.",values:{bolded_section:(0,v.jsx)("b",{children:r}),streak_length:t}}),(0,v.jsx)(Ke.Z,{id:"learning.streakcelebration.factoidb",defaultMessage:"Users who learn {streak_length} days in a row {bolded_section} vs. those who don’t.",values:{bolded_section:(0,v.jsx)("b",{children:s}),streak_length:t}})];return i[Math.floor(Math.random()*i.length)]}(i,s),[b,y]=(0,d.useState)(f),x="ZGY11119949",[j,w]=(0,d.useState)(-1),S=j<0,M=(0,Xr.Z)().width>=es.Z.small.minWidth,P=(0,h.useDispatch)();if((0,d.useEffect)((()=>{o&&function(e,t){const{administrator:r}=(0,k.IC)();(0,O.hC)("edx.ui.lms.celebration.streak.opened",{org_key:e,courserun_key:t,is_staff:r})}(p,t)}),[o,p,t]),(0,d.useEffect)((()=>{c&&l&&(0,n.getConfig)().ECOMMERCE_BASE_URL?async function(e,t,r){const s=`${(0,n.getConfig)().ECOMMERCE_BASE_URL}/api/v2/baskets/calculate/?code=${e}&sku=${t}&username=${r}`;return(0,k.kj)().get(s).then((e=>(0,vr.u3)(e)))}(x,l.sku,m).then((e=>{const{totalInclTax:r,totalInclTaxExclDiscounts:s}=e.data;s&&r!==s?(w(1-r/s),(0,O.hC)("edx.bi.course.streak_discount_enabled",{course_id:t,sku:l.sku})):w(0)}),(()=>{w(0)})):w(0)}),[c,m,l]),!o)return null;let C,T,N;if(l&&(C=`${l.upgradeUrl}`,T={currencySymbol:l.currencySymbol,price:l.price,upgradeUrl:C},j>0)){const e=1-j;N={discountedPrice:`${l.currencySymbol}${(T.price*e).toFixed(2).toString()}`,originalPrice:`${l.currencySymbol}${T.price.toString()}`,upgradeUrl:`${T.upgradeUrl}&code=${x}`}}const I=`${s} ${i.formatMessage(Cn.streakHeader)}`,_=N&&c;return(0,v.jsxs)(kn.Z,En(En({className:"streak-modal modal-dialog-centered",title:I,onClose:()=>{a(),function(e,t,r,s){s((0,E.QB)({modelType:"courseHomeMeta",model:{id:r,celebrations:Nn(Nn({},e),{},{streakLengthToCelebrate:null})}}))}(g,0,t,P)},isOpen:o,isFullscreenScroll:!0},u),{},{children:[(0,v.jsx)(kn.Z.Header,{className:"modal-header",children:(0,v.jsx)(kn.Z.Title,{className:"mr-0 modal-title",children:I})}),(0,v.jsxs)(kn.Z.Body,{className:"modal-body",children:[(0,v.jsx)("p",{className:"text-center",children:i.formatMessage(Cn.streakBody)}),(0,v.jsxs)("p",{className:"modal-image text-center",children:[!M&&(0,v.jsx)("img",{src:Mn,alt:"",className:"img-fluid"}),M&&(0,v.jsx)("img",{src:Pn,alt:"",className:"img-fluid"})]}),S&&(0,v.jsx)(fr.Z,{animation:"border",variant:"primary"}),!S&&!_&&(0,v.jsxs)("div",{className:"d-flex py-3 bg-light-300",children:[(0,v.jsx)(re.Z,{className:"col-small ml-3",src:Sn.Z}),(0,v.jsx)("div",{className:"col-11 factoid-wrapper",children:b})]}),!S&&_&&(0,v.jsx)(lt.Z,{variant:"success",className:"px-0",children:(0,v.jsxs)("div",{className:"d-flex",children:[(0,v.jsx)(re.Z,{className:"col-small ml-3 text-success-500",src:On.Z}),(0,v.jsxs)("div",{className:"col-11 factoid-wrapper",children:[(0,v.jsx)("b",{children:i.formatMessage(Cn.congratulations)})," ",i.formatMessage(Cn.streakDiscountMessage,{percent:(100*j).toFixed(0)})," ",(0,v.jsx)(Ke.Z,{id:"learning.streakCelebration.streakCelebrationCouponEndDateMessage",defaultMessage:"Ends {date}.",values:{date:new Date(Date.now()+12096e5).toLocaleDateString({timeZone:"UTC"})}})]})]})})]}),(0,v.jsxs)(kn.Z.Footer,{className:"modal-footer d-block",children:[!S&&_&&(0,v.jsxs)(v.Fragment,{children:[!M&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(Nt,{className:"upgrade mb-3",size:"sm",offer:N,variant:"brand",verifiedMode:T}),(0,v.jsx)(kn.Z.CloseButton,{variant:"outline-brand",className:"btn-sm",children:i.formatMessage(Cn.streakButtonAA759)})]}),M&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(Nt,{className:"upgrade mb-3",offer:N,variant:"brand",verifiedMode:T}),(0,v.jsx)(kn.Z.CloseButton,{variant:"outline-brand",children:i.formatMessage(Cn.streakButtonAA759)})]})]}),!S&&!_&&(0,v.jsx)(kn.Z.CloseButton,{className:"px-5",variant:"primary",children:(0,v.jsx)(qn,{intl:i})})]})]}))};Rn.defaultProps={isStreakCelebrationOpen:!1,streakDiscountCouponEnabled:!1,streakLengthToCelebrate:-1,verifiedMode:{}},Rn.propTypes={courseId:_().string.isRequired,metadataModel:_().string.isRequired,streakLengthToCelebrate:_().number,intl:M.gm.isRequired,isStreakCelebrationOpen:_().bool,closeStreakCelebration:_().func.isRequired,streakDiscountCouponEnabled:_().bool,verifiedMode:_().shape({currencySymbol:_().string,price:_().number,sku:_().string,upgradeUrl:_().string})};const Zn=(0,f.Z)(Rn);var Dn=r(13509),An=r(88624);const Ln=(0,N.vU)({genericError:{id:"masquerade-widget.userName.error.generic",defaultMessage:"An error has occurred; please try again.",description:"Message shown after a general error when attempting to masquerade"},placeholder:{id:"masquerade-widget.userName.input.placeholder",defaultMessage:"Username or email",description:"Placeholder text to prompt for a user to masquerade as"},userNameLabel:{id:"masquerade-widget.userName.input.label",defaultMessage:"Masquerade as this user",description:"Label for the masquerade user input"}}),Bn=["intl","onError","onSubmit"];function Un(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}class Hn extends d.Component{onError(){return this.props.onError(...arguments)}onKeyPress(e){return"Enter"!==e.key||this.onSubmit(e)}onSubmit(e){const t={role:"student",user_name:e.target.value};return this.props.onSubmit(t).then((e=>{if(e&&e.success)r.g.location.reload();else{const t=e&&e.error||"";this.onError(t)}})).catch((()=>{const e=this.props.intl.formatMessage(Ln.genericError);this.onError(e)})),!0}render(){const e=this.props,{intl:t,onError:r,onSubmit:s}=e,i=function(e,t){if(null==e)return{};var r,s,i=function(e,t){if(null==e)return{};var r,s,i={},n=Object.keys(e);for(s=0;s<n.length;s++)r=n[s],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,Bn);return(0,v.jsx)(An.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Un(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Un(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({"aria-labelledby":"masquerade-search-label",label:t.formatMessage(Ln.userNameLabel),onKeyPress:e=>this.onKeyPress(e),type:"text"},i))}}Hn.propTypes={intl:M.gm.isRequired,onError:_().func.isRequired,onSubmit:_().func.isRequired};const $n=(0,f.Z)(Hn);class Fn extends d.Component{onClick(e){e.target.parentNode.parentNode.click();const{groupId:t,role:s,userName:i,userPartitionId:n,userNameInputToggle:o}=this.props,a={};return i||""===i?(o(!0),!1):(s&&(a.role=s),t&&(a.group_id=parseInt(t,10),a.user_partition_id=parseInt(n,10)),this.props.onSubmit(a).then((()=>{r.g.location.reload()})),!0)}isSelected(){return["groupId","role","userName","userPartitionId"].reduce(((e,t)=>e&&this.props[t]===this.props.selected[t]),!0)}render(){const{groupName:e}=this.props;if(!e)return null;let t;return this.isSelected()&&(t="active"),(0,v.jsx)(Pi.ZP.Item,{className:t,href:"#",onClick:e=>this.onClick(e),children:e})}}Fn.propTypes={groupId:_().number,groupName:_().string.isRequired,onSubmit:_().func.isRequired,role:_().string,selected:_().shape({courseKey:_().string.isRequired,groupId:_().number,role:_().string,userName:_().string,userPartitionId:_().number}),userName:_().string,userNameInputToggle:_().func.isRequired,userPartitionId:_().number},Fn.defaultProps={groupId:null,role:null,selected:null,userName:null,userPartitionId:null};const Gn=Fn;class Wn extends d.Component{constructor(e){super(e),this.courseId=e.courseId,this.state={autoFocus:!1,masquerade:"Staff",options:[],shouldShowUserNameInput:!1,masqueradeUsername:null}}componentDidMount(){(async function(e){const t=new URL(`${(0,n.getConfig)().LMS_BASE_URL}/courses/${e}/masquerade`),{data:r}=await(0,k.kj)().get(t.href,{});return(0,vr.u3)(r)})(this.courseId).then((e=>{e.success?this.onSuccess(e):this.onError("Unable to get masquerade options")})).catch((e=>{console.error("Unable to get masquerade options",e)}))}onError(e){this.props.onError(e)}async onSubmit(e){this.clearError();const t=await async function(e,t){const r=new URL(`${(0,n.getConfig)().LMS_BASE_URL}/courses/${e}/masquerade`),{data:s}=await(0,k.kj)().post(r.href,t);return(0,vr.u3)(s)}(this.courseId,e);return t}onSuccess(e){const t=this.parseAvailableOptions(e);this.setState({options:t})}clearError(){this.props.onError("")}toggle(e){this.setState((t=>({autoFocus:!0,masquerade:"Specific Student...",shouldShowUserNameInput:void 0===e?!t.shouldShowUserNameInput:e})))}parseAvailableOptions(e){var t=this;const r=e||{},s=r.active||{},i=(r.available||[]).map((e=>(0,v.jsx)(Gn,{groupId:e.groupId,groupName:e.name,role:e.role,selected:s,userName:e.userName,userPartitionId:e.userPartitionId,userNameInputToggle:function(){return t.toggle(...arguments)},onSubmit:e=>this.onSubmit(e)},e.name)));return s.userName?this.setState({autoFocus:!1,masquerade:"Specific Student...",masqueradeUsername:s.userName,shouldShowUserNameInput:!0}):s.groupName?this.setState({masquerade:s.groupName}):"student"===s.role&&this.setState({masquerade:"Learner"}),i}render(){const{autoFocus:e,masquerade:t,options:r,shouldShowUserNameInput:s,masqueradeUsername:i}=this.state,n=this.props.intl.formatMessage(Ln.placeholder);return(0,v.jsxs)("div",{className:"flex-grow-1",children:[(0,v.jsxs)("div",{className:"row",children:[(0,v.jsx)("span",{className:"col-auto col-form-label pl-3",children:"View this course as:"}),(0,v.jsxs)(Pi.ZP,{className:"flex-shrink-1 mx-1",children:[(0,v.jsx)(Pi.ZP.Toggle,{id:"masquerade-widget-toggle",variant:"inverse-outline-primary",children:t}),(0,v.jsx)(Pi.ZP.Menu,{children:r})]})]}),s&&(0,v.jsxs)("div",{className:"row mt-2",children:[(0,v.jsx)("span",{className:"col-auto col-form-label pl-3",id:"masquerade-search-label",children:`${n}:`}),(0,v.jsx)($n,{id:"masquerade-search",className:"col-4 form-control",autoFocus:e,defaultValue:i,onError:e=>this.onError(e),onSubmit:e=>this.onSubmit(e)})]})]})}}Wn.propTypes={courseId:_().string.isRequired,intl:M.gm.isRequired,onError:_().func.isRequired},Wn.contextType=S.h1;const Vn=(0,f.Z)(Wn),zn=d.lazy((()=>r.e(724).then(r.bind(r,32724))));function Yn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function Qn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yn(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Kn=e=>{const[t,r]=(0,d.useState)(!1);(0,d.useEffect)((()=>(r(!0),()=>r(!1))));const{courseId:s,unitId:i,tab:o}=e,a=function(e){const t=(0,n.getConfig)().INSIGHTS_BASE_URL;let r;return t&&(r=`${t}/courses`,e&&(r+=`/${e}`)),r}(s),c=function(e,t){const r=(0,n.getConfig)().STUDIO_BASE_URL;let s;return r&&(t?s=`${r}/container/${t}`:e&&(s=`${r}/course/${e}`)),s}(s,i),[l,u]=(0,d.useState)(null),p=function(e,t){const{userTimezone:r}=(0,E.tT)("courseHomeMeta",e),{accessExpiration:s}=(0,E.tT)(t,e),i=s&&s.masqueradingExpiredCourse,n=s&&s.expirationDate,o=(0,d.useMemo)((()=>({expirationDate:n,userTimezone:r})),[n,r]);return(0,S.VY)(i,{code:"clientAccessExpirationMasqueradeBanner",payload:o,topic:"instructor-toolbar-alerts"}),{clientAccessExpirationMasqueradeBanner:zn}}(s,o),g=function(e,t){const{isMasquerading:r}=(0,E.tT)("courseHomeMeta",e),s=r&&"progress"===t&&tr(e),i=(0,d.useMemo)((()=>({courseId:e})),[e]);return(0,S.VY)(s,{code:"clientCourseStartMasqueradeBanner",payload:i,topic:"instructor-toolbar-alerts"}),{clientCourseStartMasqueradeBanner:er}}(s,o);return t?(0,v.jsxs)("div",{"data-testid":"instructor-toolbar",children:[(0,v.jsx)("div",{className:"bg-primary text-white",children:(0,v.jsxs)("div",{className:"container-xl py-3 d-md-flex justify-content-end align-items-start",children:[(0,v.jsx)("div",{className:"align-items-center flex-grow-1 d-md-flex mx-1 my-1",children:(0,v.jsx)(Vn,{courseId:s,onError:u})}),(c||a)&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("hr",{className:"border-light"}),(0,v.jsx)("span",{className:"mr-2 mt-1 col-form-label",children:"View course in:"})]}),c&&(0,v.jsx)("span",{className:"mx-1 my-1",children:(0,v.jsx)("a",{className:"btn btn-inverse-outline-primary",href:c,children:"Studio"})}),a&&(0,v.jsx)("span",{className:"mx-1 my-1",children:(0,v.jsx)("a",{className:"btn btn-inverse-outline-primary",href:a,children:"Insights"})})]})}),l&&(0,v.jsx)("div",{className:"container-xl mt-3",children:(0,v.jsx)(Dn.Z,{type:S.CH.ERROR,dismissible:!1,children:l})}),(0,v.jsx)(S.UW,{topic:"instructor-toolbar-alerts",customAlerts:Qn(Qn({},p),g)})]}):null};Kn.propTypes={courseId:_().string,unitId:_().string,tab:_().string},Kn.defaultProps={courseId:void 0,unitId:void 0,tab:""};const Jn=Kn,Xn=d.lazy((()=>r.e(35).then(r.bind(r,34777)))),eo=d.lazy((()=>r.e(443).then(r.bind(r,60443))));var to=r(89798);const ro=()=>(0,v.jsx)(Ke.Z,{id:"tours.button.dismiss",defaultMessage:"Dismiss",description:"A button used to close the tour of the website"}),so=()=>(0,v.jsx)(Ke.Z,{id:"tours.button.next",defaultMessage:"Next",description:"A button used within a tour of the website to advance to the next piece of information"}),io=()=>(0,v.jsx)(Ke.Z,{id:"tours.button.okay",defaultMessage:"Okay",description:"A button used to end the tour of the website"}),no=e=>{let{enabled:t,onEnd:r}=e;return{checkpoints:[{body:(0,v.jsx)(Ke.Z,{id:"tours.abandonTour.launchTourCheckpoint.body",defaultMessage:"Feeling lost? Launch the tour any time for some quick tips to get the most out of the experience."}),placement:"left",target:"#courseHome-launchTourLink"}],enabled:t,endButtonText:(0,v.jsx)(io,{}),onEnd:r,onEscape:r,tourId:"abandonTour"}},oo=e=>{let{enabled:t,onEnd:r}=e;return{checkpoints:[{body:(0,v.jsx)(Ke.Z,{id:"tours.sequenceNavigationCheckpoint.body",defaultMessage:"The top bar within your course allows you to easily jump to different sections and shows you what’s coming up."}),placement:"bottom",target:"#courseware-sequence-navigation"}],enabled:t,endButtonText:(0,v.jsx)(io,{}),onEnd:r,onEscape:r,tourId:"coursewareTour"}},ao=e=>{let{enabled:t,onEnd:r}=e;return{checkpoints:[{body:(0,v.jsx)(Ke.Z,{id:"tours.existingUserTour.launchTourCheckpoint.body",defaultMessage:"We’ve recently added a few new features to the course experience. Want some help looking around? Take a tour to learn more."}),placement:"left",target:"#courseHome-launchTourLink"}],enabled:t,endButtonText:(0,v.jsx)(io,{}),onEnd:r,onEscape:r,tourId:"existingUserCourseHomeTour"}},co={body:(0,v.jsx)(Ke.Z,{id:"tours.datesCheckpoint.body",defaultMessage:"Important dates can help you stay on track."}),placement:"left",target:"#courseHome-dates",title:(0,v.jsx)(Ke.Z,{id:"tours.datesCheckpoint.title",defaultMessage:"Keep on top of key dates"})},lo={body:(0,v.jsx)(Ke.Z,{id:"tours.outlineCheckpoint.body",defaultMessage:"You can explore sections of the course using the outline below."}),placement:"top",target:"#courseHome-outline",title:(0,v.jsx)(Ke.Z,{id:"tours.outlineCheckpoint.title",defaultMessage:"Take the course!"})},uo={body:(0,v.jsx)(Ke.Z,{id:"tours.tabNavigationCheckpoint.body",defaultMessage:"These tabs can be used to access other course materials, such as your progress, syllabus, etc."}),placement:"bottom",target:"#courseTabsNavigation",title:(0,v.jsx)(Ke.Z,{id:"tours.tabNavigationCheckpoint.title",defaultMessage:"Additional course resources"})},po={body:(0,v.jsx)(Ke.Z,{id:"tours.upgradeCheckpoint.body",defaultMessage:"Work towards a certificate and gain full access to course materials. Upgrade now!"}),placement:"left",target:"#courseHome-upgradeNotification",title:(0,v.jsx)(Ke.Z,{id:"tours.upgradeCheckpoint.title",defaultMessage:"Unlock your course"})},go={body:(0,v.jsx)(Ke.Z,{id:"tours.weeklyGoalsCheckpoint.body",defaultMessage:"Setting a goal makes you more likely to complete your course."}),placement:"left",target:"#courseHome-weeklyLearningGoal",title:(0,v.jsx)(Ke.Z,{id:"tours.weeklyGoalsCheckpoint.title",defaultMessage:"Set a course goal"})},mo=e=>{let{enabled:t,onDismiss:r,onEnd:s}=e;return{advanceButtonText:(0,v.jsx)(so,{}),checkpoints:[lo,co,uo,po,go],dismissButtonText:(0,v.jsx)(ro,{}),enabled:t,endButtonText:(0,v.jsx)(io,{}),onDismiss:r,onEnd:s,onEscape:r,tourId:"newUserCourseHomeTour"}};var fo=r(56860),ho=r(8637);const bo=r.p+"2649294b11a63f2f74a0e594104f2722.png",yo=e=>{let{intl:t,isOpen:r,onDismiss:s,onStartTour:i}=e;return(0,v.jsx)(fo.Z,{isOpen:r,title:"New user course home prompt",className:"new-user-tour-dialog",heroIsDark:!0,hasCloseButton:!1,heroNode:(0,v.jsxs)(kn.Z.Hero,{children:[(0,v.jsx)(kn.Z.Hero.Background,{backgroundSrc:bo}),(0,v.jsx)(kn.Z.Hero.Content,{style:{maxWidth:"20rem"},children:(0,v.jsx)(kn.Z.Title,{as:"h2",children:(0,v.jsx)(Ke.Z,{id:"tours.newUserModal.title",defaultMessage:"{welcome} {siteName} course!",values:{siteName:(0,n.getConfig)().SITE_NAME,welcome:(0,v.jsx)("span",{className:"text-accent-b",children:t.formatMessage(Ze.newUserModalTitleWelcome)})}})})})]}),footerNode:(0,v.jsxs)(ho.Z,{children:[(0,v.jsx)(P.ZP,{variant:"tertiary",onClick:s,children:t.formatMessage(Ze.skipForNow)}),(0,v.jsx)(P.ZP,{variant:"brand",onClick:i,children:t.formatMessage(Ze.beginTour)})]}),onClose:s,children:(0,v.jsx)("p",{className:"text-dark-900",children:t.formatMessage(Ze.newUserModalBody,{siteName:(0,n.getConfig)().SITE_NAME})})})};yo.propTypes={intl:M.gm.isRequired,isOpen:_().bool.isRequired,onDismiss:_().func.isRequired,onStartTour:_().func.isRequired};const xo=(0,f.Z)(yo);function vo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}async function jo(e,t){const r=`${(0,n.getConfig)().LMS_BASE_URL}/api/user_tours/v1/${e}`;return(0,k.kj)().patch(r,t)}function wo(){return async e=>e(_e())}function So(e){return async t=>{try{await jo(e,{course_home_tour_status:"no-tour"}),t(Ne())}catch(e){(0,xr.H)(e)}}}function Oo(e){return async t=>{try{await jo(e,{show_courseware_tour:!1}),t(Ie())}catch(e){(0,xr.H)(e)}}}const ko=e=>{let{activeTab:t,courseId:r,isStreakCelebrationOpen:s,org:i}=e;const{proctoringPanelStatus:o}=(0,h.useSelector)((e=>e.courseHome)),{showCoursewareTour:a,showExistingUserCourseHomeTour:c,showNewUserCourseHomeModal:l,showNewUserCourseHomeTour:u}=(0,h.useSelector)((e=>e.tours)),[p,g]=(0,d.useState)(!1),[m,f]=(0,d.useState)(!1),[b,y]=(0,d.useState)(!1),[x,j]=(0,d.useState)(!1),w=(0,h.useDispatch)(),{administrator:S,username:M}=(0,k.IC)()||{},P="courseware"===t,C="outline"===t;if((0,d.useEffect)((()=>{M&&(P||C&&"loaded"===o)&&w(function(e){return async t=>{try{const r=await async function(e){const t=`${(0,n.getConfig)().LMS_BASE_URL}/api/user_tours/v1/${e}`;try{const{data:e}=await(0,k.kj)().get(t);return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vo(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({toursEnabled:!0},(0,vr.u3)(e))}catch(e){const{httpErrorStatus:t}=e&&e.customAttributes;if(401===t||403===t||404===t)return{toursEnabled:!1};throw e}}(e);t(qe(r))}catch(e){(0,xr.H)(e)}}}(M))}),[o]),(0,d.useEffect)((()=>{P&&a&&f(!0)}),[a]),(0,d.useEffect)((()=>{C&&y(!!c)}),[c]),(0,d.useEffect)((()=>{C&&u&&(g(!1),j(!0))}),[u]),s)return null;const T=[no({enabled:p,onEnd:()=>g(!1)}),oo({enabled:m,onEnd:()=>{f(!1),(0,O.hC)("edx.ui.lms.courseware_tour.completed",{org_key:i,courserun_key:r,is_staff:S}),w(Oo(M))}}),ao({enabled:b,onEnd:()=>{y(!1),(0,O.hC)("edx.ui.lms.existing_user_tour.completed",{org_key:i,courserun_key:r,is_staff:S}),w(So(M))}}),mo({enabled:x,onDismiss:()=>{j(!1),g(!0),(0,O.hC)("edx.ui.lms.new_user_tour.dismissed",{org_key:i,courserun_key:r,is_staff:S}),w(So(M)),w(Oo(M))},onEnd:()=>{j(!1),(0,O.hC)("edx.ui.lms.new_user_tour.completed",{org_key:i,courserun_key:r,is_staff:S}),w(So(M))}})];return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(to.Z,{tours:T}),(0,v.jsx)(xo,{isOpen:C&&l,onDismiss:()=>{(0,O.hC)("edx.ui.lms.new_user_modal.dismissed",{org_key:i,courserun_key:r,is_staff:S}),w(wo()),g(!0),w(So(M))},onStartTour:()=>{(0,O.hC)("edx.ui.lms.new_user_tour.started",{org_key:i,courserun_key:r,is_staff:S}),w(wo()),j(!0)}})]})};ko.propTypes={activeTab:_().string.isRequired,courseId:_().string.isRequired,isStreakCelebrationOpen:_().bool.isRequired,org:_().string.isRequired};const Mo=ko;function Po(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function Co(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Po(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Po(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const To=e=>{let{activeTabSlug:t,children:r,courseId:s,metadataModel:i,unitId:o}=e;const{celebrations:a,org:c,originalUserIsStaff:l,tabs:u,title:p,verifiedMode:m}=(0,E.tT)("courseHomeMeta",s),f=function(e){const{authenticatedUser:t}=(0,d.useContext)(rr.Z),r=(0,E.tT)("outline",e),s=r&&r.courseBlocks&&!r.courseBlocks.courses,i=null===t&&s;return(0,S.VY)(i,{code:"clientLogistrationAlert",topic:"outline",dismissible:!1,type:S.CH.ERROR}),{clientLogistrationAlert:eo}}(s),h=function(e){const{authenticatedUser:t}=(0,d.useContext)(rr.Z),r=(0,E.tT)("courseHomeMeta",e),s=(0,E.tT)("outline",e),i=r&&void 0!==r.isEnrolled&&r.isEnrolled,n=s&&s.courseBlocks&&!s.courseBlocks.courses,o=!i&&null!==t&&n,a=(0,d.useMemo)((()=>({canEnroll:!(!s||!s.enrollAlert)&&s.enrollAlert.canEnroll,courseId:e,extraText:s&&s.enrollAlert?s.enrollAlert.extraText:"",isStaff:r&&r.isStaff})),[r,e,s]);return(0,S.VY)(o,{code:"clientEnrollmentAlert",payload:a,topic:"outline"}),{clientEnrollmentAlert:Xn}}(s),b=u.filter((e=>e.slug===t))[0],y=a&&a.streakLengthToCelebrate,x=a&&a.streakDiscountEnabled&&m,[j,,w]=(0,ki.Z)(y);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(Mo,{activeTab:t,courseId:s,isStreakCelebrationOpen:j,org:c}),(0,v.jsx)(g.q,{children:(0,v.jsx)("title",{children:`${b?`${b.title} | `:""}${p} | ${(0,n.getConfig)().SITE_NAME}`})}),l&&(0,v.jsx)(Jn,{courseId:s,unitId:o,tab:t}),(0,v.jsx)(Zn,{courseId:s,metadataModel:i,streakLengthToCelebrate:y,isStreakCelebrationOpen:!!j,closeStreakCelebration:w,streakDiscountCouponEnabled:x,verifiedMode:m}),(0,v.jsxs)("main",{id:"main-content",className:"d-flex flex-column flex-grow-1",children:[(0,v.jsx)(S.UW,{topic:"outline",className:"mx-5 mt-3",customAlerts:Co(Co({},h),f)}),(0,v.jsx)(wn,{tabs:u,className:"mb-3",activeTabSlug:t}),(0,v.jsx)("div",{className:"container-xl",children:r})]})]})};To.propTypes={activeTabSlug:_().string.isRequired,children:_().node,courseId:_().string.isRequired,metadataModel:_().string,unitId:_().string},To.defaultProps={children:null,metadataModel:"courseHomeMeta",unitId:null};const No=To,Io=["intl"];function _o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function Eo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_o(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const qo=e=>{let{intl:t}=e,r=function(e,t){if(null==e)return{};var r,s,i=function(e,t){if(null==e)return{};var r,s,i={},n=Object.keys(e);for(s=0;s<n.length;s++)r=n[s],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,Io);const{activeTabSlug:s,courseId:i,courseStatus:n,metadataModel:o}=r,{toastBodyLink:a,toastBodyText:c,toastHeader:l}=(0,h.useSelector)((e=>e.courseHome)),d=(0,h.useDispatch)(),{courseAccess:u,number:g,org:m,start:f,title:b}=(0,E.tT)("courseHomeMeta",i);if("denied"===n){const e=function(e,t,r,s){let i=null;switch(r.errorCode){case"audit_expired":i=`/redirect/dashboard?access_response_error=${r.additionalContextUserMessage}`;break;case"course_not_started":i=`/redirect/dashboard?notlive=${new Intl.DateTimeFormat((0,M.Kd)()).format(new Date(s))}`;break;case"course_not_started_enterprise_learner":i="/redirect/enterprise-learner-dashboard";break;case"survey_required":i=`/redirect/survey/${e}`;break;case"data_sharing_access_required":i=`/redirect/consent?consentPath=${encodeURIComponent(r.developerMessage)}`;break;case"incorrect_active_enterprise":i=`/course/${e}/access-denied`;break;case"unfulfilled_milestones":i="/redirect/dashboard";break;default:"outline"!==t&&(i=`/course/${e}/home`)}return i}(i,s,u,f);if(e)return(0,v.jsx)(p.Fg,{to:e,replace:!0})}return(0,v.jsxs)(v.Fragment,{children:[["loaded","denied"].includes(n)&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(wi.ZP,{action:c?{label:c,href:a}:null,closeLabel:t.formatMessage(ot.Z.close),onClose:()=>d((0,ye.OQ)({header:"",link:null,link_text:null})),show:!!l,children:l}),"courseHomeMeta"===o&&(0,v.jsx)(Ae,{srOnly:!0})]}),(0,v.jsx)(Si.wg,{courseOrg:m,courseNumber:g,courseTitle:b}),"loading"===n&&(0,v.jsx)(ti,{srMessage:t.formatMessage(Oi.loading)}),["loaded","denied"].includes(n)&&(0,v.jsx)(No,Eo({},r)),!["loading","loaded","denied"].includes(n)&&(0,v.jsx)("p",{className:"text-center py-5 mx-auto",style:{maxWidth:"30em"},children:t.formatMessage(Oi.failure)}),(0,v.jsx)(ji.ZP,{})]})};qo.defaultProps={courseId:null,unitId:null},qo.propTypes={activeTabSlug:_().string.isRequired,intl:M.gm.isRequired,courseId:_().string,courseStatus:_().string.isRequired,metadataModel:_().string.isRequired,unitId:_().string};const Ro=(0,f.Z)(qo),Zo=e=>{const{children:t,fetch:r,slice:s,tab:i,isProgressTab:n}=e,{courseId:o,targetUserId:a}=(0,p.UO)(),c=(0,h.useDispatch)();(0,d.useEffect)((()=>{c(n?r(o,a):r(o))}),[o,a]);const{courseId:l,courseStatus:u}=(0,h.useSelector)((e=>e[s]));return(0,v.jsxs)(Ro,{activeTabSlug:i,courseId:l,courseStatus:u,metadataModel:`${s}Meta`,children:[l&&(0,v.jsx)(vi.$j,{courseId:l}),t]})};Zo.propTypes={children:_().node.isRequired,fetch:_().func.isRequired,slice:_().string.isRequired,tab:_().string.isRequired,isProgressTab:_().bool},Zo.defaultProps={isProgressTab:!1};const Do=Zo,Ao=(0,N.vU)({entranceExamTextNotPassing:{id:"learn.sequence.entranceExamTextNotPassing",defaultMessage:"To access course materials, you must score {entranceExamMinimumScorePct}% or higher on this exam. Your current score is {entranceExamCurrentScore}%."},entranceExamTextPassed:{id:"learn.sequence.entranceExamTextPassed",defaultMessage:"Your score is {entranceExamCurrentScore}%. You have passed the entrance exam."}});var Lo=r(38121),Bo=r(21068),Uo=r(83332),Ho=r(38402),$o=r(71734),Fo=r(13691),Go=r(65036);const Wo=(0,N.vU)({"learn.course.license.allRightsReserved.text":{id:"learn.course.license.allRightsReserved.text",defaultMessage:"All Rights Reserved",description:"License text shown when using All Rights Reserved license type."},"learn.course.license.creativeCommons.terms.preamble":{id:"learn.course.license.creativeCommons.terms.preamble",defaultMessage:"Creative Commons licensed content, with terms as follows:",description:"Screen reader only text preamble before reading specific Creative Commons license terms."},"learn.course.license.creativeCommons.terms.by":{id:"learn.course.license.creativeCommons.terms.by",defaultMessage:"Attribution",description:"Creative Commons license text for Attribution term."},"learn.course.license.creativeCommons.terms.nc":{id:"learn.course.license.creativeCommons.terms.nc",defaultMessage:"Noncommercial",description:"Creative Commons license text for Noncommercial term."},"learn.course.license.creativeCommons.terms.nd":{id:"learn.course.license.creativeCommons.terms.nd",defaultMessage:"No Derivatives",description:"Creative Commons license text for No Derivatives term."},"learn.course.license.creativeCommons.terms.sa":{id:"learn.course.license.creativeCommons.terms.sa",defaultMessage:"Share Alike",description:"Creative Commons license text for Share Alike term."},"learn.course.license.creativeCommons.terms.zero":{id:"learn.course.license.creativeCommons.terms.zero",defaultMessage:"No terms",description:"Creative Commons license text for license with no terms."},"learn.course.license.creativeCommons.text":{id:"learn.course.license.creativeCommons.text",defaultMessage:"Some Rights Reserved",description:"License text shown when using all Creative Commons license types."}}),Vo={by:{intlMessagesId:"learn.course.license.creativeCommons.terms.by",icon:Uo.I4},nc:{intlMessagesId:"learn.course.license.creativeCommons.terms.nc",icon:Ho.lZ},nd:{intlMessagesId:"learn.course.license.creativeCommons.terms.nd",icon:$o.Xx},sa:{intlMessagesId:"learn.course.license.creativeCommons.terms.sa",icon:Fo.ts},zero:{intlMessagesId:"learn.course.license.creativeCommons.terms.zero",icon:Go.Uy}},zo=e=>{let{license:t,intl:r}=e;const[s,i,n]=function(e){if(!e)return["all-rights-reserved",{}];const t=e.indexOf(":");if(-1===t)return[e,{}];const r=e.slice(0,t).trim(),s=e.slice(t+1).trim();let i={},n="";return s.split(" ").forEach((e=>{let t="",r="";-1!==e.indexOf("=")?[t,r]=e.split("="):(t=e,r=!0),"ver"===t?n=r:i[t.toLowerCase()]=r})),0===Object.keys(i).length&&(n="1.0",i={zero:!0}),n=n||"4.0",[r,i,n]}(t);return(0,v.jsxs)("div",{className:"text-right small py-1",children:["all-rights-reserved"===s&&(0,v.jsxs)("div",{className:"text-gray-500",children:[(0,v.jsx)(C.G,{"aria-hidden":"true",className:"mr-1",icon:Lo.rU}),r.formatMessage(Wo["learn.course.license.allRightsReserved.text"])]}),"creative-commons"===s&&(o=Object.keys(i),a=n,(0,v.jsxs)("a",{className:"text-decoration-none text-gray-500",rel:"license noopener noreferrer",target:"_blank",href:`https://creativecommons.org/licenses/${o.join("-")}/${a}/`,children:[(0,v.jsxs)("span",{className:"sr-only",children:[r.formatMessage(Wo["learn.course.license.creativeCommons.terms.preamble"])," "]}),(0,v.jsx)(C.G,{"aria-hidden":"true",className:"mr-1",icon:Bo.Oq}),o.map((e=>(0,v.jsxs)("span",{children:[(0,v.jsxs)("span",{className:"sr-only",children:[r.formatMessage(Wo[Vo[e].intlMessagesId])," "]}),(0,v.jsx)(C.G,{"aria-hidden":"true",className:"mr-1",icon:Vo[e].icon})]},e))),r.formatMessage(Wo["learn.course.license.creativeCommons.text"])]}))]});var o,a};zo.propTypes={license:_().string,intl:M.gm.isRequired},zo.defaultProps={license:"all-rights-reserved"};const Yo=(0,f.Z)(zo),Qo=(0,N.vU)({notificationTray:{id:"notification.tray.container",defaultMessage:"Notification tray",description:"Notification tray container"},openNotificationTrigger:{id:"notification.open.button",defaultMessage:"Show notification tray",description:"Button to open the notification tray and show notifications"},closeNotificationTrigger:{id:"notification.close.button",defaultMessage:"Close notification tray",description:"Button for the learner to close the sidebar"},responsiveCloseNotificationTray:{id:"responsive.close.notification",defaultMessage:"Back to course",description:"Responsive button to go back to course and close the notification tray"},notificationTitle:{id:"notification.tray.title",defaultMessage:"Notifications",description:"Title text displayed for the notification tray"},noNotificationsMessage:{id:"notification.tray.no.message",defaultMessage:"You have no new notifications at this time.",description:"Text displayed when the learner has no notifications"}});var Ko=r(49541);const Jo=d.createContext({}),Xo=e=>{let{intl:t,title:r,ariaLabel:s,sidebarId:i,className:n,children:o,showTitleBar:a,width:c}=e;const{toggleSidebar:l,shouldDisplayFullScreen:u,currentSidebar:p}=(0,d.useContext)(Jo);return y("message",(0,d.useCallback)((e=>{let{data:t}=e;const{type:r}=t;"learning.events.sidebar.close"===r&&l(null)}),[i,l])),(0,v.jsxs)("section",{className:ge()("ml-0 ml-lg-4 border border-light-400 rounded-sm h-auto align-top zindex-0",{"bg-white m-0 border-0 fixed-top vh-100 rounded-0":u,"min-vh-100":!u,"d-none":p!==i},n),"data-testid":`sidebar-${i}`,style:{width:u?"100%":c},"aria-label":s,children:[u?(0,v.jsxs)("div",{className:"pt-2 pb-2.5 border-bottom border-light-400 d-flex align-items-center ml-2",onClick:()=>l(null),onKeyDown:()=>l(null),role:"button",tabIndex:"0",alt:t.formatMessage(Qo.responsiveCloseNotificationTray),children:[(0,v.jsx)(re.Z,{src:Ko.Z}),(0,v.jsx)("span",{className:"font-weight-bold m-2 d-inline-block",children:t.formatMessage(Qo.responsiveCloseNotificationTray)})]}):null,a&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"d-flex align-items-center",children:[(0,v.jsx)("span",{className:"p-2.5 d-inline-block",children:r}),u?null:(0,v.jsx)("div",{className:"d-inline-flex mr-2 mt-1.5 ml-auto",children:(0,v.jsx)(Fe.Z,{src:ht.Z,size:"sm",iconAs:re.Z,onClick:()=>l(null),variant:"primary",alt:t.formatMessage(Qo.closeNotificationTrigger)})})]}),(0,v.jsx)("div",{className:"py-1 bg-gray-100 border-top border-bottom border-light-400"})]}),o]})};Xo.propTypes={intl:M.gm.isRequired,title:_().string.isRequired,ariaLabel:_().string.isRequired,sidebarId:_().string.isRequired,className:_().string,children:_().element.isRequired,showTitleBar:_().bool,width:_().string},Xo.defaultProps={width:"31rem",showTitleBar:!0,className:""};const ea=(0,f.Z)(Xo),ta=e=>{let{onClick:t,ariaLabel:r,children:s}=e;return(0,v.jsx)("button",{className:"border border-light-400 bg-transparent align-items-center align-content-center d-flex notification-btn",type:"button",onClick:t,"aria-label":r,children:(0,v.jsx)("div",{className:"icon-container d-flex position-relative align-items-center",children:s})})};ta.propTypes={onClick:_().func.isRequired,ariaLabel:_().string.isRequired,children:_().element.isRequired};const ra=(0,f.Z)(ta);var sa=r(26016);const ia=e=>{let{intl:t,status:r,notificationColor:s}=e;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(re.Z,{src:sa.Z,className:"m-0 m-auto",alt:t.formatMessage(Qo.openNotificationTrigger)}),"active"===r?(0,v.jsx)("span",{className:ge()(s,"rounded-circle p-1 position-absolute"),"data-testid":"notification-dot",style:{top:"0.3rem",right:"0.55rem"}}):null]})};ia.defaultProps={status:null},ia.propTypes={intl:M.gm.isRequired,status:_().string,notificationColor:_().string.isRequired};const na=(0,f.Z)(ia),oa="NOTIFICATIONS",aa=e=>{let{intl:t,onClick:r}=e;const{courseId:s,notificationStatus:i,setNotificationStatus:n,upgradeNotificationCurrentState:o}=(0,d.useContext)(Jo);return(0,bt.$o)(`notificationStatus.${s}`)||(0,bt.qQ)(`notificationStatus.${s}`,"active"),(0,bt.$o)(`upgradeNotificationCurrentState.${s}`)||(0,bt.qQ)(`upgradeNotificationCurrentState.${s}`,"initialize"),(0,d.useEffect)((()=>{o&&(0,bt.$o)(`upgradeNotificationLastSeen.${s}`)!==o&&(n("active"),(0,bt.qQ)(`notificationStatus.${s}`,"active"),(0,bt.qQ)(`upgradeNotificationLastSeen.${s}`,o))})),(0,v.jsx)(ra,{onClick:r,ariaLabel:t.formatMessage(Qo.openNotificationTrigger),children:(0,v.jsx)(na,{status:i,notificationColor:"bg-danger-500"})})};aa.propTypes={intl:M.gm.isRequired,onClick:_().func.isRequired};const ca=(0,f.Z)(aa),la=e=>{let{intl:t}=e;const{courseId:r,onNotificationSeen:s,shouldDisplayFullScreen:i,upgradeNotificationCurrentState:n,setUpgradeNotificationCurrentState:o}=(0,d.useContext)(Jo),a=(0,E.tT)("coursewareMeta",r),{accessExpiration:c,contentTypeGatingEnabled:l,end:u,enrollmentEnd:p,enrollmentMode:g,enrollmentStart:m,marketingUrl:f,offer:h,start:b,timeOffsetMillis:y,userTimezone:x,verificationStatus:j}=a,{courseModes:w,org:S,verifiedMode:k,username:M}=(0,E.tT)("courseHomeMeta",r),P={course_end:u,course_modes:(0,d.useMemo)((()=>w?.map((e=>e.slug))),[w]),course_start:b,courserun_key:r,enrollment_end:p,enrollment_mode:g,enrollment_start:m,is_upgrade_notification_visible:!!k,name:"Old Sidebar Notification Tray",org_key:S,username:M,verification_status:j};return(0,d.useEffect)((()=>{setTimeout(s,3e3),(0,O.hC)("edx.ui.course.upgrade.old_sidebar.notifications",P)}),[]),(0,v.jsx)(ea,{title:t.formatMessage(Qo.notificationTitle),ariaLabel:t.formatMessage(Qo.notificationTray),sidebarId:oa,width:"50rem",className:ge()({"h-100":!k&&!i}),children:(0,v.jsx)("div",{children:k?(0,v.jsx)(Vt,{offer:h,verifiedMode:k,accessExpiration:c,contentTypeGatingEnabled:l,marketingUrl:f,upsellPageName:"in_course",userTimezone:x,shouldDisplayBorder:!1,timeOffsetMillis:y,courseId:r,org:S,upgradeNotificationCurrentState:n,setupgradeNotificationCurrentState:o}):(0,v.jsx)("p",{className:"p-3 small",children:t.formatMessage(Qo.noNotificationsMessage)})})})};la.propTypes={intl:M.gm.isRequired},la.Trigger=ca,la.ID=oa;const da=(0,f.Z)(la);var ua=r(27759);const pa=(0,N.vU)({discussionsTitle:{id:"discussions.sidebar.title",defaultMessage:"Discussions",description:"Title text for a forum where users are able to discuss course topics"},openDiscussionsTrigger:{id:"discussions.sidebar.open.button",defaultMessage:"Show discussions tray",description:"Alt text for a button that opens the discussions feature"}});(0,n.ensureConfig)(["DISCUSSIONS_MFE_BASE_URL"]);const ga="DISCUSSIONS",ma=e=>{let{intl:t,onClick:r}=e;const{unitId:s,courseId:i}=(0,d.useContext)(Jo),o=(0,h.useDispatch)(),{tabs:a}=(0,E.tT)("courseHomeMeta",i),c=(0,E.tT)("discussionTopics",s),l=(0,n.getConfig)().DISCUSSIONS_MFE_BASE_URL,u=(0,d.useMemo)((()=>a?.find((e=>"discussion"===e.slug))),[a]);return(0,d.useEffect)((()=>{l&&u&&o($r(i))}),[i,l]),c?.id&&c?.enabledInContext?(0,v.jsx)(ra,{onClick:r,ariaLabel:t.formatMessage(pa.openDiscussionsTrigger),children:(0,v.jsx)(re.Z,{src:ua.Z,className:"m-0 m-auto"})}):null};ma.propTypes={intl:M.gm.isRequired,onClick:_().func.isRequired};const fa=(0,f.Z)(ma);(0,n.ensureConfig)(["DISCUSSIONS_MFE_BASE_URL"]);const ha=e=>{let{intl:t}=e;const{unitId:r,courseId:s}=(0,d.useContext)(Jo),i=(0,E.tT)("discussionTopics",r),o=`${(0,n.getConfig)().DISCUSSIONS_MFE_BASE_URL}/${s}/category/${r}`;return i?.id&&i?.enabledInContext?(0,v.jsx)(ea,{title:t.formatMessage(pa.discussionsTitle),ariaLabel:t.formatMessage(pa.discussionsTitle),sidebarId:ga,width:"50rem",showTitleBar:!1,children:(0,v.jsx)("iframe",{src:`${o}?inContextSidebar`,className:"d-flex sticky-top vh-100 w-100 border-0",title:t.formatMessage(pa.discussionsTitle),allow:"clipboard-write",loading:"lazy"})}):null};ha.propTypes={intl:M.gm.isRequired},ha.Trigger=ha,ha.ID=ga;const ba=(0,f.Z)(ha),ya={[oa]:{ID:oa,Sidebar:da,Trigger:ca},[ga]:{ID:ga,Sidebar:ba,Trigger:fa}},xa=[ga,oa],va=()=>(0,v.jsx)(v.Fragment,{children:xa.map((e=>{const t=ya[e].Sidebar;return(0,v.jsx)(t,{},e)}))}),ja=d.createContext({}),wa="DISCUSSIONS",Sa="NOTIFICATIONS",Oa=(0,N.vU)({discussionsTitle:{id:"discussions.sidebar.title",defaultMessage:"Discussions",description:"Title text for a forum where users are able to discuss course topics"},discussionNotificationTray:{id:"discussions.notification.tray.container",defaultMessage:"Discussion and Notification tray",description:"Discussion and Notification tray container"},notificationTitle:{id:"notification.tray.title",defaultMessage:"Notifications",description:"Title text displayed for the notification tray"},closeTrigger:{id:"tray.close.button",defaultMessage:"Close tray",description:"Button for the learner to close the sidebar"},openSidebarTrigger:{id:"sidebar.open.button",defaultMessage:"Show sidebar tray",description:"Button to open the sidebar tray and shows notifications and didcussions"},responsiveCloseSidebarTray:{id:"responsive.close.sidebar",defaultMessage:"Back to course",description:"Responsive button to go back to course and close the sidebar tray"}}),ka=e=>{let{title:t,ariaLabel:r,sidebarId:s,className:i,children:n,showTitleBar:o,width:a,allowFullHeight:c,showBorder:l}=e;const u=(0,ft.Z)(),{toggleSidebar:p,shouldDisplayFullScreen:g,currentSidebar:m}=(0,d.useContext)(ja);return y("message",(0,d.useCallback)((e=>{let{data:t}=e;const{type:r}=t;"learning.events.sidebar.close"===r&&p(m,wa)}),[p])),(0,v.jsxs)("section",{className:ge()("ml-0 ml-lg-4 h-auto align-top zindex-0",{"min-vh-100":!g&&c,"bg-white m-0 border-0 fixed-top vh-100 rounded-0":g,"d-none":m!==s,"border border-light-400 rounded-sm":l},i),"data-testid":`sidebar-${s}`,style:{width:g?"100%":a},"aria-label":r,children:[g&&(0,v.jsxs)("div",{className:"pt-2 pb-2.5 border-bottom border-light-400 d-flex align-items-center ml-2",onClick:()=>p(null),onKeyDown:()=>p(null),role:"button",tabIndex:"0",alt:u.formatMessage(Oa.responsiveCloseSidebarTray),children:[(0,v.jsx)(re.Z,{src:Ko.Z}),(0,v.jsx)("span",{className:"font-weight-bold m-2 d-inline-block",children:u.formatMessage(Oa.responsiveCloseSidebarTray)})]}),o&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"d-flex align-items-center",children:[(0,v.jsx)("span",{className:"p-2.5 d-inline-block",children:t}),(0,v.jsx)("div",{className:"d-inline-flex mr-2 mt-1.5 ml-auto",children:(0,v.jsx)(Fe.Z,{src:ht.Z,size:"sm",iconAs:re.Z,onClick:()=>p(s),alt:u.formatMessage(Oa.closeTrigger),className:"icon-hover"})})]}),(0,v.jsx)("div",{className:"py-1 bg-gray-100 border-top border-bottom border-light-400"})]}),n]})};ka.propTypes={title:_().string,ariaLabel:_().string.isRequired,sidebarId:_().string.isRequired,className:_().string,children:_().element.isRequired,showTitleBar:_().bool,width:_().string,allowFullHeight:_().bool,showBorder:_().bool},ka.defaultProps={title:"",width:"50rem",allowFullHeight:!1,showTitleBar:!0,className:"",showBorder:!0};const Ma=ka;(0,n.ensureConfig)(["DISCUSSIONS_MFE_BASE_URL"]);const Pa=()=>{const e=(0,ft.Z)(),{unitId:t,courseId:r,hideDiscussionbar:s,isDiscussionbarAvailable:i,shouldDisplayFullScreen:o}=(0,d.useContext)(ja),a=`${(0,n.getConfig)().DISCUSSIONS_MFE_BASE_URL}/${r}/category/${t}`;return s||!i?null:(0,v.jsx)("iframe",{src:`${a}?inContextSidebar`,className:ge()("d-flex w-100 flex-fill border border-light-400 rounded-sm",{"vh-100":!o}),title:e.formatMessage(Oa.discussionsTitle),allow:"clipboard-write",loading:"lazy"})},Ca=()=>{const{courseId:e,onNotificationSeen:t,upgradeNotificationCurrentState:r,setUpgradeNotificationCurrentState:s,hideNotificationbar:i,toggleSidebar:n,isNotificationbarAvailable:o,currentSidebar:a}=(0,d.useContext)(ja),c=(0,E.tT)("coursewareMeta",e),{accessExpiration:l,contentTypeGatingEnabled:u,end:p,enrollmentEnd:g,enrollmentMode:m,enrollmentStart:f,marketingUrl:h,offer:b,start:y,timeOffsetMillis:x,userTimezone:j,verificationStatus:w}=c,{courseModes:S,org:k,verifiedMode:M,username:P}=(0,E.tT)("courseHomeMeta",e),C={course_end:p,course_modes:(0,d.useMemo)((()=>S?.map((e=>e.slug))),[S]),course_start:y,courserun_key:e,enrollment_end:g,enrollment_mode:m,enrollment_start:f,is_upgrade_notification_visible:!!M,name:"New Sidebar Notification Tray",org_key:k,username:P,verification_status:w};return(0,d.useEffect)((()=>{setTimeout(t,3e3),(0,O.hC)("edx.ui.course.upgrade.new_sidebar.notifications",C)}),[]),i||!o?null:(0,v.jsx)("div",{className:"border border-light-400 rounded-sm","data-testid":"notification-widget",children:(0,v.jsx)(Vt,{offer:b,verifiedMode:M,accessExpiration:l,contentTypeGatingEnabled:u,marketingUrl:h,upsellPageName:"in_course",userTimezone:j,shouldDisplayBorder:!1,timeOffsetMillis:x,courseId:e,org:k,upgradeNotificationCurrentState:r,setupgradeNotificationCurrentState:s,toggleSidebar:()=>n(a,Sa)})})};function Ta(e,t){try{r.g.sessionStorage&&r.g.sessionStorage.setItem(e,t)}catch(e){}}function Na(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function Ia(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Na(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Na(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const _a=e=>(0,v.jsx)("svg",Ia(Ia({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:(0,v.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 22V2h20v20H2ZM14 4H4v16h10V4Z",fill:"currentColor"})}));function Ea(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function qa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ea(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ea(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Ra=e=>(0,v.jsx)("svg",qa(qa({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:(0,v.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 2v20h20V2H2Zm18 2h-4v16h4V4ZM4 4h10v16H4V4Z",fill:"currentColor"})})),Za="DISCUSSIONS_NOTIFICATIONS",Da=e=>{let{onClick:t}=e;const{courseId:s,currentSidebar:i,setNotificationStatus:o,upgradeNotificationCurrentState:a,isNotificationbarAvailable:c,isDiscussionbarAvailable:l}=(0,d.useContext)(ja),u=(0,h.useDispatch)(),p=(0,ft.Z)(),{tabs:g}=(0,E.tT)("courseHomeMeta",s),m=(0,n.getConfig)().DISCUSSIONS_MFE_BASE_URL,f=(0,d.useMemo)((()=>g?.find((e=>"discussion"===e.slug))),[g]);return(0,d.useEffect)((()=>{m&&f&&u($r(s))}),[s,m,f]),(0,bt.$o)(`notificationStatus.${s}`)||(0,bt.qQ)(`notificationStatus.${s}`,"active"),(0,bt.$o)(`upgradeNotificationCurrentState.${s}`)||(0,bt.qQ)(`upgradeNotificationCurrentState.${s}`,"initialize"),(0,d.useEffect)((()=>{a&&(0,bt.$o)(`upgradeNotificationLastSeen.${s}`)!==a&&(o("active"),(0,bt.qQ)(`notificationStatus.${s}`,"active"),(0,bt.qQ)(`upgradeNotificationLastSeen.${s}`,a))})),l||c?(0,v.jsx)(Fe.Z,{src:i?_a:Ra,iconAs:re.Z,onClick:()=>{"open"===function(e){try{if(r.g.sessionStorage)return r.g.sessionStorage.getItem(e)}catch(e){}return null}(`notificationTrayStatus.${s}`)?Ta(`notificationTrayStatus.${s}`,"closed"):Ta(`notificationTrayStatus.${s}`,"open"),t()},alt:p.formatMessage(Oa.openSidebarTrigger),className:"icon-hover"}):null};Da.propTypes={onClick:_().func.isRequired};const Aa={[Za]:{ID:Za,Sidebar:()=>{const e=(0,ft.Z)(),{hideNotificationbar:t}=(0,d.useContext)(ja);return(0,v.jsx)("div",{className:"sticky-top vh-100",children:(0,v.jsxs)(Ma,{ariaLabel:e.formatMessage(Oa.discussionNotificationTray),sidebarId:Za,className:"d-flex flex-column flex-fill",showTitleBar:!1,showBorder:!1,children:[(0,v.jsx)(Ca,{}),!t&&(0,v.jsx)("div",{className:"my-1.5"}),(0,v.jsx)(Pa,{})]})})},Trigger:Da}},La=[Za],Ba=()=>{const{currentSidebar:e,isDiscussionbarAvailable:t,isNotificationbarAvailable:r}=(0,d.useContext)(ja);if(null===e||!t&&!r)return null;const s=Aa[e].Sidebar;return(0,v.jsx)(s,{})},Ua=()=>{const{toggleSidebar:e,currentSidebar:t}=(0,d.useContext)(Jo),r=(0,Xr.Z)().width<es.Z.small.minWidth;return(0,v.jsx)("div",{className:"d-flex ml-auto",children:xa.map((s=>{const{Trigger:i}=ya[s],n=s===t;return(0,v.jsx)("div",{className:ge()({"mt-3":!r,"border-primary-700":n}),style:{borderBottom:n?"2px solid":null},children:(0,v.jsx)(i,{onClick:()=>e(s)},s)},s)}))})};Ua.propTypes={};const Ha=Ua,$a=()=>{const{toggleSidebar:e}=(0,d.useContext)(ja);return(0,v.jsx)("div",{className:"d-flex ml-auto",children:La.map((t=>{const{Trigger:r}=Aa[t];return(0,v.jsx)(r,{onClick:()=>e(t)},t)}))})},Fa=(0,N.vU)({headerPlaceholder:{id:"learn.header.h2.placeholder",defaultMessage:"Level 2 headings may be created by course providers in the future.",description:"Message spoken by a screenreader indicating that the h2 tag is a placeholder."},loadFailure:{id:"learn.course.load.failure",defaultMessage:"There was an error loading this course.",description:"Message when a course fails to load"},loadingHonorCode:{id:"learn.loading.honor.codk",defaultMessage:"Loading honor code messaging...",description:"Message shown when an interface about the honor code is being loaded"},loadingLockedContent:{id:"learn.loading.content.lock",defaultMessage:"Loading locked content messaging...",description:"Message shown when an interface about locked content is being loaded"},loadingSequence:{id:"learn.loading.learning.sequence",defaultMessage:"Loading learning sequence...",description:"Message when learning sequence is being loaded"},noContent:{id:"learn.sequence.no.content",defaultMessage:"There is no content here.",description:"Message shown when there is no content to show a user inside a learning sequence."}});var Ga=r(42810);const Wa=(0,N.vU)({header:{id:"learn.hiddenAfterDue.header",defaultMessage:"The due date for this assignment has passed.",description:"Shown when content of a course is longer available because due date passed"},description:{id:"learn.hiddenAfterDue.description",defaultMessage:"Because the due date has passed, this assignment is no longer available.",description:"It explain why the content is not available"},gradeAvailable:{id:"learn.hiddenAfterDue.gradeAvailable",defaultMessage:"If you have completed this assignment, your grade is available on the {progressPage}.",description:"Text that precedes link that redirect to progress page"},progressPage:{id:"learn.hiddenAfterDue.progressPage",defaultMessage:"progress page",description:"This is the text for the link embedded in learn.hiddenAfterDue.gradeAvailable"}});function Va(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function za(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Va(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Va(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Ya=e=>{let{courseId:t,intl:r}=e;const{tabs:s}=(0,E.tT)("courseHomeMeta",t),i=s.find((e=>"progress"===e.slug)),n=i&&i.url&&(0,v.jsx)(ts.ZP,{style:{textDecoration:"underline"},destination:i.url,className:"text-reset",children:r.formatMessage(Wa.progressPage)});return(0,v.jsxs)(lt.Z,{variant:"info",icon:Ga.Z,children:[(0,v.jsx)("h3",{children:r.formatMessage(Wa.header)}),(0,v.jsxs)("p",{children:[r.formatMessage(Wa.description),n&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("br",{}),(0,v.jsx)(Ke.Z,za(za({},Wa.gradeAvailable),{},{values:{progressPage:n}}))]})]})]})};Ya.propTypes={intl:M.gm.isRequired,courseId:_().string.isRequired};const Qa=(0,f.Z)(Ya);var Ka=r(76811),Ja=r(93144),Xa=r(10241),ec=r(98308),tc=r(90395),rc=r(88450),sc=r(36592);const ic=e=>{let{type:t}=e,r=null;switch(t){case"video":r=Xa.Iy;break;case"other":default:r=ec.FL;break;case"vertical":r=rc.A8;break;case"problem":r=tc.Xc;break;case"lock":r=sc.by}return(0,v.jsx)(C.G,{className:"unit-icon",icon:r})};ic.propTypes={type:_().oneOf(["video","other","vertical","problem","lock"]).isRequired};const nc=ic;function oc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}const ac=e=>(0,v.jsx)(C.G,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oc(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:It.LE},e));function cc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}const lc=e=>(0,v.jsx)(C.G,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cc(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:je.xV},e));function dc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}const uc=e=>{let{onClick:t,title:r,contentType:s,isActive:i,bookmarked:n,complete:o,showCompletion:a,unitId:c,className:l,showTitle:u}=e;const{courseId:p,sequenceId:g}=(0,h.useSelector)((e=>e.courseware)),m=(0,d.useCallback)((()=>{t(c)}),[t,c]);return(0,v.jsxs)(P.ZP,{className:ge()({active:i,complete:a&&o},l),variant:"link",onClick:m,title:r,as:Qe.rU,to:`/course/${p}/${g}/${c}`,children:[(0,v.jsx)(nc,{type:s}),u&&(0,v.jsx)("span",{className:"unit-title",children:r}),a&&o?(0,v.jsx)(ac,{size:"sm",className:"text-success ml-2"}):null,n?(0,v.jsx)(lc,{className:"text-primary small position-absolute",style:{top:"-3px",right:"5px"}}):null]})};uc.propTypes={bookmarked:_().bool,className:_().string,complete:_().bool,contentType:_().string.isRequired,isActive:_().bool,onClick:_().func.isRequired,showCompletion:_().bool,showTitle:_().bool,title:_().string.isRequired,unitId:_().string.isRequired},uc.defaultProps={className:void 0,isActive:!1,bookmarked:!1,complete:!1,showTitle:!1,showCompletion:!0};const pc=(0,h.connect)(((e,t)=>t.unitId?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dc(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e.models.units[t.unitId]):{}))(uc),gc=e=>{let{unitId:t,onNavigate:r,showCompletion:s,unitIds:i}=e;return(0,v.jsxs)(Pi.ZP,{className:"sequence-navigation-dropdown",children:[(0,v.jsx)(Pi.ZP.Toggle,{id:"navigation-toggle",variant:"link",className:"font-weight-normal w-100 border-right-0",children:(0,v.jsx)(Ke.Z,{defaultMessage:"{current} of {total}",description:"The title of the mobile menu for sequence navigation of units",id:"learn.course.sequence.navigation.mobile.menu",values:{current:i.indexOf(t)+1,total:i.length}})}),(0,v.jsx)(Pi.ZP.Menu,{className:"w-100",children:i.map((e=>(0,v.jsx)(Pi.ZP.Item,{as:pc,className:"w-100",isActive:t===e,onClick:r,showCompletion:s,showTitle:!0,unitId:e},e)))})]})};gc.propTypes={unitId:_().string.isRequired,onNavigate:_().func.isRequired,showCompletion:_().bool.isRequired,unitIds:_().arrayOf(_().string).isRequired};const mc=gc;function fc(e,t){const r=(0,h.useSelector)(Fr),s=(0,E.tT)("sequences",e),i=(0,h.useSelector)((e=>e.courseware.courseId)),n=(0,h.useSelector)((e=>e.courseware.courseStatus)),o=(0,h.useSelector)((e=>e.courseware.sequenceStatus));if("loaded"!==n||"loaded"!==o||!e||!t)return{isFirstUnit:!1,isLastUnit:!1,navigationDisabledNextSequence:!1,navigationDisabledPrevSequence:!1};const a=r.indexOf(e),c=s.unitIds.indexOf(t),l=0===c,d=0===a&&l,u=a===r.length-1,p=c===s.unitIds.length-1,g=u&&p,m=s.navigationDisabled,f=m&&l,b=m&&p,y=a<r.length-1?r[a+1]:null,x=a>0?r[a-1]:null;let v,j;if(g)v=`/course/${i}/course-end`;else{const t=c+1;t<s.unitIds.length?v=`/course/${i}/${e}/${s.unitIds[t]}`:y&&(v=`/course/${i}/${y}/first`)}const w=c-1;return w>=0?j=`/course/${i}/${e}/${s.unitIds[w]}`:x&&(j=`/course/${i}/${x}/last`),{isFirstUnit:d,isLastUnit:g,nextLink:v,previousLink:j,navigationDisabledNextSequence:b,navigationDisabledPrevSequence:f}}const hc=e=>{let{unitIds:t,unitId:r,showCompletion:s,onNavigate:i}=e;const o="true"===(0,n.getConfig)().ENABLE_NEW_SIDEBAR?ja:Jo,{currentSidebar:a}=(0,d.useContext)(o),[c,l,u]=Ti(),p=(0,Xr.Z)().width>=es.Z.extraLarge.minWidth,g=-1===c;return(0,v.jsxs)("div",{style:{flexBasis:"100%",minWidth:0},children:[(0,v.jsx)("div",{ref:l,className:ge()("sequence-navigation-tabs-container",{"navigation-tab-width":p&&a}),children:(0,v.jsx)("div",{className:"sequence-navigation-tabs d-flex flex-grow-1",style:g?u:null,children:t.map((e=>(0,v.jsx)(pc,{unitId:e,isActive:r===e,showCompletion:s,onClick:i},e)))})}),g&&(0,v.jsx)(mc,{unitId:r,onNavigate:i,showCompletion:s,unitIds:t})]})};hc.propTypes={unitId:_().string.isRequired,onNavigate:_().func.isRequired,showCompletion:_().bool.isRequired,unitIds:_().arrayOf(_().string).isRequired};const bc=hc,yc=(0,N.vU)({nextButton:{id:"learn.sequence.navigation.next.button",defaultMessage:"Next",description:"Button to advance to the next section"},nextUpButton:{id:"learn.sequence.navigation.next.up.button",defaultMessage:"Next Up: {title}",description:"Button to advance to the next section, with title"},previousButton:{id:"learn.sequence.navigation.previous.button",defaultMessage:"Previous",description:"Button to return to the previous section"}}),xc=e=>{let{intl:t,unitId:r,sequenceId:s,className:i,onNavigate:n,nextHandler:o,previousHandler:a}=e;const c=(0,E.tT)("sequences",s),{isFirstUnit:l,isLastUnit:d,nextLink:u,previousLink:p,navigationDisabledPrevSequence:g,navigationDisabledNextSequence:m}=fc(s,r),{courseId:f,sequenceStatus:b}=(0,h.useSelector)((e=>e.courseware)),y=b===Mr?void 0!==c.gatedContent&&c.gatedContent.gated:void 0,x=(0,Xr.Z)().width<es.Z.small.minWidth;return b===Mr&&(0,v.jsxs)("nav",{id:"courseware-sequence-navigation","data-testid":"courseware-sequence-navigation",className:ge()("sequence-navigation",i,{"mr-2":x}),children:[(()=>{const e=l,r=(0,M.t6)((0,M.Kd)())?Ka.Z:Ja.Z;return g||(0,v.jsx)(P.ZP,{variant:"link",className:"previous-btn",onClick:a,disabled:e,iconBefore:r,as:e?void 0:Qe.rU,to:e?void 0:p,children:x?null:t.formatMessage(yc.previousButton)})})(),y?(0,v.jsx)(pc,{unitId:r,title:"",contentType:"lock",isActive:!0,onClick:()=>{}}):0===c.unitIds.length||null===r?(0,v.jsx)("div",{style:{flexBasis:"100%",minWidth:0,borderBottom:"solid 1px #EAEAEA"}}):(0,v.jsx)(bc,{unitIds:c.unitIds,unitId:r,showCompletion:c.showCompletion,onNavigate:n}),(()=>{const{exitActive:e,exitText:r}=ys(f,t),s=d&&r?r:t.formatMessage(yc.nextButton),i=d&&!e,n=(0,M.t6)((0,M.Kd)())?Ja.Z:Ka.Z;return m||(0,v.jsx)(P.ZP,{variant:"link",className:"next-btn",onClick:o,disabled:i,iconAfter:n,as:i?void 0:Qe.rU,to:i?void 0:u,children:x?null:s})})()]})};xc.propTypes={intl:M.gm.isRequired,sequenceId:_().string.isRequired,unitId:_().string,className:_().string,onNavigate:_().func.isRequired,nextHandler:_().func.isRequired,previousHandler:_().func.isRequired},xc.defaultProps={className:null,unitId:null};const vc=(0,f.Z)(xc);var jc=r(32333),wc=r(88148);const Sc=e=>{let{children:t,intl:r,sequenceId:s,unitId:i}=e;const n=(0,h.useSelector)(Fr),o=n.indexOf(s),a=o<n.length-1?n[o+1]:null,c=(0,E.tT)("sequences",s),l=(0,E.tT)("sequences",a);return c&&0!==Object.keys(c).length&&l&&0!==Object.keys(l).length&&c.unitIds.indexOf(i)===c.unitIds.length-1&&(l.effortActivities||l.effortTime)?(0,v.jsxs)("div",{className:"d-inline-block text-wrap",children:[r.formatMessage(yc.nextUpButton,{title:l.title}),(0,v.jsx)(tt,{className:"d-block mt-1",block:l})]}):t};Sc.propTypes={children:_().node,intl:M.gm.isRequired,sequenceId:_().string.isRequired,unitId:_().string},Sc.defaultProps={children:null,unitId:null};const Oc=(0,f.Z)(Sc),kc=e=>{let{intl:t,sequenceId:r,unitId:s,onClickPrevious:i,onClickNext:n}=e;const{isFirstUnit:o,isLastUnit:a,nextLink:c,previousLink:l}=fc(r,s),{courseId:d}=(0,h.useSelector)((e=>e.courseware));return(0,v.jsxs)("div",{className:"unit-navigation d-flex",children:[(()=>{const e=o,r=(0,M.t6)((0,M.Kd)())?wc._t:jc.A3;return(0,v.jsxs)(P.ZP,{variant:"outline-secondary",className:"previous-button mr-2 d-flex align-items-center justify-content-center",disabled:e,onClick:i,as:e?void 0:Qe.rU,to:e?void 0:l,children:[(0,v.jsx)(C.G,{icon:r,className:"mr-2",size:"sm"}),t.formatMessage(yc.previousButton)]})})(),(()=>{const{exitActive:e,exitText:i}=ys(d,t),o=a&&i?i:t.formatMessage(yc.nextButton),l=a&&!e,u=(0,M.t6)((0,M.Kd)())?jc.A3:wc._t;return(0,v.jsxs)(P.ZP,{variant:"outline-primary",className:"next-button d-flex align-items-center justify-content-center",onClick:n,disabled:l,as:l?void 0:Qe.rU,to:l?void 0:c,children:[(0,v.jsx)(Oc,{sequenceId:r,unitId:s,children:o}),(0,v.jsx)(C.G,{icon:u,className:"ml-2",size:"sm"})]})})()]})};kc.propTypes={intl:M.gm.isRequired,sequenceId:_().string.isRequired,unitId:_().string,onClickPrevious:_().func.isRequired,onClickNext:_().func.isRequired},kc.defaultProps={unitId:null};const Mc=(0,f.Z)(kc),Pc=(0,Ce.createSlice)({name:"plugin",initialState:{},reducers:{registerOverrideMethod:(e,t)=>{let{payload:r}=t;const{pluginName:s,methodName:i,method:n}=r;e[s]=e[s]||{},e[s][i]=n}}}),{registerOverrideMethod:Cc}=Pc.actions,{reducer:Tc}=Pc;var Nc=r(77040),Ic=r(38356),_c=r(73624);function Ec(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}const qc=e=>(0,v.jsx)(C.G,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ec(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ec(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:_c.xV},e)),Rc=()=>`${(0,n.getConfig)().LMS_BASE_URL}/api/bookmarks/v1/bookmarks/`;const Zc=(0,v.jsx)(Ke.Z,{id:"unit.bookmark.button.add.bookmark",defaultMessage:"Bookmark this page",description:"The button to bookmark a page"}),Dc=(0,v.jsx)(Ke.Z,{id:"unit.bookmark.button.remove.bookmark",defaultMessage:"Bookmarked",description:"The button to show a page is bookmarked and the button to remove that bookmark"}),Ac=e=>{let{isBookmarked:t,isProcessing:r,unitId:s}=e;const i=t?"bookmarked":"default",n=r?`${i}Processing`:i,o=(0,h.useDispatch)(),a=(0,d.useCallback)((()=>{o(t?function(e){return async t=>{t((0,E.QB)({modelType:"units",model:{id:e,bookmarked:!1,bookmarkedUpdateState:"loading"}}));try{await async function(e){const{username:t}=(0,k.IC)();return(0,k.kj)().delete(`${Rc()}${t},${e}/`)}(e),t((0,E.QB)({modelType:"units",model:{id:e,bookmarked:!1,bookmarkedUpdateState:"loaded"}}))}catch(r){(0,xr.H)(r),t((0,E.QB)({modelType:"units",model:{id:e,bookmarked:!0,bookmarkedUpdateState:"failed"}}))}}}(s):function(e){return async t=>{t((0,E.QB)({modelType:"units",model:{id:e,bookmarked:!0,bookmarkedUpdateState:"loading"}}));try{await async function(e){return(0,k.kj)().post(Rc(),{usage_id:e})}(e),t((0,E.QB)({modelType:"units",model:{id:e,bookmarked:!0,bookmarkedUpdateState:"loaded"}}))}catch(r){(0,xr.H)(r),t((0,E.QB)({modelType:"units",model:{id:e,bookmarked:!1,bookmarkedUpdateState:"failed"}}))}}}(s))}),[t,s]);return(0,v.jsx)(Ic.Z,{variant:"link",className:"px-1 ml-n1 btn-sm text-primary-500",onClick:a,state:n,disabledStates:["defaultProcessing","bookmarkedProcessing"],labels:{default:Zc,defaultProcessing:Zc,bookmarked:Dc,bookmarkedProcessing:Dc},icons:{default:(0,v.jsx)(qc,{className:"text-primary"}),defaultProcessing:(0,v.jsx)(qc,{className:"text-primary"}),bookmarked:(0,v.jsx)(lc,{className:"text-primary"}),bookmarkedProcessing:(0,v.jsx)(lc,{className:"text-primary"})}})};Ac.propTypes={unitId:_().string.isRequired,isBookmarked:_().bool,isProcessing:_().bool.isRequired},Ac.defaultProps={isBookmarked:!1};const Lc=Ac;var Bc=r(55877),Uc=r(53449);const Hc=(0,Bc.yL)({accessToken:"accessToken",blockAccess:"blockAccess"}),$c=(0,Bc.yL)({units:"units",coursewareMeta:"coursewareMeta"}),Fc=(0,Bc.yL)({student:"student_view",public:"public_view"}),Gc=(0,Bc.yL)({modal:"plugin.modal",resize:"plugin.resize",videoFullScreen:"plugin.videoFullScreen"}),Wc=((0,Bc.yL)({modelKeys:$c,views:Fc,loadingState:"loading",messageTypes:Gc}),e=>{const t=d.useState(0)[1];d.useLayoutEffect((()=>{t((e=>e+1))}),[e])}),Vc=(0,Bc.yL)({iframeHeight:"iframeHeight",hasLoaded:"hasLoaded",showError:"showError",windowTopOffset:"windowTopOffset"});function zc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function Yc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zc(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Qc=(0,Bc.yL)({isOpen:"isOpen",options:"options"}),Kc=(0,Bc.yL)({shouldDisplay:"shouldDisplay"}),Jc=e=>{let{id:t,courseId:r}=e;const[s,i]=(0,Bc.LE)(Kc.shouldDisplay,!1),{graded:n}=(0,E.tT)($c.units,t),{userNeedsIntegritySignature:o}=(0,E.tT)($c.coursewareMeta,r);return d.useEffect((()=>{i(o&&n)}),[i,o]),s};function Xc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function el(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xc(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const tl="microphone *; camera *; midi *; geolocation *; encrypted-media *, clipboard-write *",rl=(0,Bc.yL)({contentIFrame:"content-iframe-test-id",modalIFrame:"modal-iframe-test-id"}),sl=e=>{let{iframeUrl:t,shouldShowContent:r,loadingMessage:s,id:i,elementId:o,onLoaded:a,title:c}=e;const{handleIFrameLoad:u,hasLoaded:p,iframeHeight:g,showError:f}=(e=>{let{elementId:t,id:r,iframeUrl:s,onLoaded:i}=e;Wc(r);const o=(0,h.useDispatch)(),[a,c]=(0,Bc.LE)(Vc.iframeHeight,0),[l,u]=(0,Bc.LE)(Vc.hasLoaded,!1),[p,g]=(0,Bc.LE)(Vc.showError,!1),[f,b]=(0,Bc.LE)(Vc.windowTopOffset,null);return d.useEffect((()=>{const e=document.getElementById(t),{hash:r}=window.location;r&&e.contentWindow.postMessage({hashName:r},`${(0,n.getConfig)().LMS_BASE_URL}`)}),[r,i,a,l]),y("message",d.useCallback((e=>{let{data:t}=e;const{type:r,payload:s}=t;r===Gc.resize?(c(s.height),null!==f&&window.scrollTo(0,Number(f)),!l&&0===a&&s.height>0&&(u(!0),i&&i())):r===Gc.videoFullScreen?b(s.open?window.scrollY:null):t.offset&&window.scrollTo(0,t.offset+document.getElementById("unit-iframe").offsetTop)}),[r,i,l,u,a,c,f,b])),{iframeHeight:a,handleIFrameLoad:()=>{l||(g(!0),(0,xr.H)("Unit iframe failed to load. Server possibly returned 4xx or 5xx response.",{iframeUrl:s})),window.onmessage=e=>{e.data.event_name&&o((0,m.eP)(e.data,Hr))}},showError:p,hasLoaded:l}})({elementId:o,id:i,iframeUrl:t,onLoaded:a}),{modalOptions:b,handleModalClose:x}=(()=>{const[e,t]=(0,Bc.LE)(Qc.isOpen,!1),[r,s]=(0,Bc.LE)(Qc.options,{height:"100%"}),i=()=>{const e=document.querySelector("iframe");t(!1),e.contentWindow.postMessage({type:"plugin.modal-close"},"*")};return y("message",d.useCallback((e=>{const{type:r,payload:n}=e.data;r&&("plugin.modal"===r&&(s((e=>Yc(Yc({},e),n))),t(!0)),"plugin.modal-close"===r&&i())}),[])),{handleModalClose:i,modalOptions:Yc({isOpen:e},r)}})(),j={id:o,src:t,allow:tl,allowFullScreen:!0,height:g,scrolling:"no",referrerPolicy:"origin",onLoad:u};let w;return b.isOpen&&(w=b.body?(0,v.jsx)("div",{className:"unit-modal",children:b.body}):(0,v.jsx)("iframe",{title:b.title,allow:tl,frameBorder:"0",src:b.url,style:{width:"100%",height:b.height}})),(0,v.jsxs)(v.Fragment,{children:[r&&!p&&(f?(0,v.jsx)(l.Z,{}):(0,v.jsx)(ti,{srMessage:s})),r&&(0,v.jsx)("div",{className:"unit-iframe-wrapper",children:(0,v.jsx)("iframe",el(el({title:c},j),{},{"data-testid":rl.contentIFrame}))}),b.isOpen&&(b.isFullscreen?(0,v.jsx)(kn.Z,{dialogClassName:"modal-lti",onClose:x,size:"fullscreen",isOpen:!0,hasCloseButton:!1,children:(0,v.jsx)(kn.Z.Body,{className:b.modalBodyClassName,children:w})}):(0,v.jsx)(Uc.Z,{body:w,dialogClassName:"modal-lti",onClose:x,open:!0}))]})};sl.propTypes={iframeUrl:_().string,id:_().string.isRequired,shouldShowContent:_().bool.isRequired,loadingMessage:_().node.isRequired,elementId:_().string.isRequired,onLoaded:_().func,title:_().node.isRequired},sl.defaultProps={iframeUrl:null,onLoaded:()=>({})};const il=sl,nl=(0,N.vU)({"learn.honorCode.name":{id:"learn.honorCode.name",defaultMessage:"Honor Code",description:"Honor code name."},"learn.honorCode.cancel":{id:"learn.honorCode.cancel",defaultMessage:"Cancel",description:'"Cancel" button.'},"learn.honorCode.agree":{id:"learn.honorCode.agree",defaultMessage:"I agree",description:'"I agree" button.'}}),ol=e=>{let{intl:t,courseId:r}=e;const s=(0,p.s0)(),i=(0,h.useDispatch)(),{isMasquerading:o,username:a}=(0,E.tT)("courseHomeMeta",r),c=(0,k.IC)(),l=(0,n.getConfig)().SITE_NAME,d=`${(0,n.getConfig)().TERMS_OF_SERVICE_URL}#honor-code`;return(0,v.jsxs)(lt.Z,{variant:"light","aria-live":"off",children:[(0,v.jsxs)("h4",{"aria-level":"3",children:[l," ",t.formatMessage(nl["learn.honorCode.name"])]}),(0,v.jsx)("p",{children:(0,v.jsx)(Ke.Z,{id:"learn.honorCode.content",defaultMessage:"Honesty and academic integrity are important to {siteName} and the institutions providing courses and programs on the {siteName} site. By clicking “I agree” below, I confirm that I have read, understand, and will abide by the {link} for the {siteName} Site.",values:{siteName:l,link:(0,v.jsx)("a",{href:d,children:t.formatMessage(nl["learn.honorCode.name"])})},description:"This is shown to learner, when course author wants to learners to explicity agree on their (Term of use or conduct), hence it links honor code page. "})}),(0,v.jsxs)(ho.Z,{children:[(0,v.jsx)(ho.Z.Spacer,{}),(0,v.jsx)(P.ZP,{variant:"tertiary",onClick:()=>s(`/course/${r}/home`),children:t.formatMessage(nl["learn.honorCode.cancel"])}),(0,v.jsx)(P.ZP,{variant:"primary",onClick:()=>i(function(e,t){return async r=>{try{t||await async function(e){const{data:t}=await(0,k.kj)().post(`${(0,n.getConfig)().LMS_BASE_URL}/api/agreements/v1/integrity_signature/${e}`,{});return(0,vr.u3)(t)}(e),r((0,E.QB)({modelType:"coursewareMeta",model:{id:e,userNeedsIntegritySignature:!1}}))}catch(e){(0,xr.H)(e)}}}(r,o&&a!==c.username)),children:t.formatMessage(nl["learn.honorCode.agree"])})]})]})};ol.propTypes={intl:M.gm.isRequired,courseId:_().string.isRequired};const al=(0,f.Z)(ol);var cl=r(57680);const ll=(0,N.vU)({"learn.lockPaywall.title":{id:"learn.lockPaywall.title",defaultMessage:"Graded assignments are locked",description:"Heading for message shown to indicate that a piece of content is unavailable to audit track users."},"learn.lockPaywall.content":{id:"learn.lockPaywall.content",defaultMessage:"Upgrade to gain access to locked features like this one and get the most out of your course.",description:"Message shown to indicate that a piece of content is unavailable to audit track users."},"learn.lockPaywall.content.pastExpiration":{id:"learn.lockPaywall.content.pastExpiration",defaultMessage:"The upgrade deadline for this course passed. To upgrade, enroll in the next available session. ",description:"Message shown to indicate that a piece of content is unavailable to audit track users in a course where the expiration deadline has passed."},"learn.lockPaywall.courseDetails":{id:"learn.lockPaywall.courseDetails",defaultMessage:"View Course Details",description:"Link to the course details page for this course with a past expiration date."},"learn.lockPaywall.example.alt":{id:"learn.lockPaywall.example.alt",defaultMessage:"Example Certificate",description:"Alternate text displayed when the example certificate image cannot be displayed."},"learn.lockPaywall.list.intro":{id:"learn.lockPaywall.list.intro",defaultMessage:"When you upgrade, you:",description:"Text displayed to introduce the list of benefits from upgrading."}});function dl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function ul(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dl(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const pl=e=>{let{intl:t,courseId:r}=e;const{notificationTrayVisible:s}=(0,d.useContext)(Jo),i=(0,E.tT)("coursewareMeta",r),{accessExpiration:n,marketingUrl:o,offer:a}=i,{org:c,verifiedMode:l}=(0,E.tT)("courseHomeMeta",r),u=(0,Xr.Z)().width<=es.Z.large.minWidth,p=(0,Xr.Z)().width<=es.Z.extraLarge.minWidth&&s,g=(0,Xr.Z)().width<es.Z.large.minWidth&&s,m=(0,Xr.Z)().width<=es.Z.large.minWidth&&!s,f=(0,Xr.Z)().width>es.Z.extraSmall.minWidth,h=n?new Date(n.expirationDate):null,b=!!n&&new Date(Date.now())>h;if(!l)return null;const y={org_key:c,courserun_key:r};return(0,v.jsx)(lt.Z,{variant:"light","aria-live":"off",icon:cl.Z,className:"lock-paywall-container","data-testId":"lock-paywall-test-id",children:(0,v.jsxs)("div",{className:"row",children:[(0,v.jsxs)("div",{className:"col",children:[(0,v.jsx)("h4",{"aria-level":"3",children:(0,v.jsx)("span",{children:t.formatMessage(ll["learn.lockPaywall.title"])})}),b?(0,v.jsxs)("div",{className:"mb-2 upgrade-intro",children:[t.formatMessage(ll["learn.lockPaywall.content.pastExpiration"]),(0,v.jsx)(ts.ZP,{destination:o,onClick:()=>{(0,O.hC)("edx.bi.ecommerce.gated_content.past_expiration.link_clicked",ul(ul({},y),{},{linkCategory:"gated_content",linkName:"course_details",linkType:"link",pageName:"in_course"}))},target:"_blank",children:t.formatMessage(ll["learn.lockPaywall.courseDetails"])})]}):(0,v.jsx)("div",{className:"mb-2 upgrade-intro",children:t.formatMessage(ll["learn.lockPaywall.content"])}),(0,v.jsxs)("div",{className:ge()("d-inline-flex flex-row",{"flex-wrap":s||u}),children:[(0,v.jsx)("div",{style:{float:"left"},className:"mr-3 mb-2",children:(0,v.jsx)("img",{alt:t.formatMessage(ll["learn.lockPaywall.example.alt"]),src:os,className:"border-0 certificate-image-banner",style:{height:"128px",width:"175px"}})}),(0,v.jsxs)("div",{className:"mw-xs list-div",children:[(0,v.jsx)("div",{className:"mb-2",children:t.formatMessage(ll["learn.lockPaywall.list.intro"])}),(0,v.jsxs)("ul",{className:"fa-ul ml-4 pl-2",children:[(0,v.jsx)(Et,{}),(0,v.jsx)(qt,{}),(0,v.jsx)(Rt,{}),(0,v.jsx)(Zt,{})]})]})]})]}),b?null:(0,v.jsx)("div",{className:ge()("d-md-flex align-items-md-center text-right",{"col-md-5 mx-md-0":s,"col-md-4 mx-md-3 justify-content-center":!s&&!m,"col-md-11 justify-content-end":p&&!g,"col-md-6 justify-content-center":m}),children:(0,v.jsx)(kt,{offer:a,onClick:()=>{(0,O.hC)("edx.bi.ecommerce.upsell_links_clicked",ul(ul({},y),{},{linkCategory:"(none)",linkName:"in_course_upgrade",linkType:"link",pageName:"in_course"}))},verifiedMode:l,style:{whiteSpace:f?"nowrap":null}})})]})})};pl.propTypes={intl:M.gm.isRequired,courseId:_().string.isRequired};const gl=(0,f.Z)(pl),ml=e=>{let{courseId:t,id:r}=e;const{formatMessage:s}=(0,ft.Z)(),i=Jc({courseId:t,id:r}),n=(0,E.tT)($c.units,r),o=(0,E.tT)($c.coursewareMeta,t).contentTypeGatingEnabled&&n.containsContentTypeGatedContent,a=(e,r)=>(0,v.jsx)(d.Suspense,{fallback:(0,v.jsx)(ti,{srMessage:s(e)}),children:(0,v.jsx)(r,{courseId:t})});return(0,v.jsxs)(v.Fragment,{children:[o&&a(Fa.loadingLockedContent,gl),i&&a(Fa.loadingHonorCode,al)]})};ml.propTypes={courseId:_().string.isRequired,id:_().string.isRequired};const fl=ml;var hl=r(36575);function bl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function yl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bl(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const xl={show_title:0,show_bookmark:0,recheck_access:1},vl=e=>{let{courseId:t,format:r,onLoaded:s,id:i}=e;const{formatMessage:o}=(0,ft.Z)(),{authenticatedUser:a}=d.useContext(rr.Z),c=(e=>{let{id:t}=e;const r=(0,vi.HG)(),[s,i]=(0,Bc.LE)(Hc.blockAccess,r),n=(0,vi.R$)(),o=(0,vi.u1)();return d.useEffect((()=>{r&&n().finally((()=>{i(!1)})).catch((e=>{(0,xr.H)(e)}))}),[t]),{blockAccess:s,accessToken:o}})({id:i}),l=Jc({courseId:t,id:i}),u=(0,E.tT)($c.units,i),p="loading"===u.bookmarkedUpdateState,g=a?Fc.student:Fc.public;var m,f;const b=(m="getIFrameUrl",f=()=>(e=>{let{id:t,view:r,format:s,examAccess:i}=e;return`${(0,n.getConfig)().LMS_BASE_URL}/xblock/${t}?${(0,hl.stringify)(yl(yl(yl({},xl),{},{view:r},s&&{format:s}),!i.blockAccess&&{exam_access:i.accessToken}))}`})({id:i,view:g,format:r,examAccess:c}),(0,h.useSelector)((e=>()=>{let t=f();return Object.values(e.plugins).forEach((e=>{e[m]&&(t=e[m](t))})),t}),h.shallowEqual))();return(0,v.jsxs)("div",{className:"unit",children:[(0,v.jsxs)("div",{className:"mb-0",children:[(0,v.jsx)("h3",{className:"h3",children:u.title}),(0,v.jsx)(Nc.j7,{id:"unit_title_plugin",pluginProps:{courseId:t,unitId:i}})]}),(0,v.jsx)("h2",{className:"sr-only",children:o(Fa.headerPlaceholder)}),(0,v.jsx)(Lc,{unitId:u.id,isBookmarked:u.bookmarked,isProcessing:p}),(0,v.jsx)(fl,{courseId:t,id:i}),(0,v.jsx)(il,{elementId:"unit-iframe",id:i,iframeUrl:b,loadingMessage:o(Fa.loadingSequence),onLoaded:s,shouldShowContent:!l&&!c.blockAccess,title:u.title})]})};vl.propTypes={courseId:_().string.isRequired,format:_().string,id:_().string.isRequired,onLoaded:_().func},vl.defaultProps={format:null,onLoaded:void 0};const jl=vl,wl=d.lazy((()=>r.e(715).then(r.bind(r,60715)))),Sl=e=>{let{gated:t,intl:s,courseId:i,sequenceId:n,unitId:o,unitLoadedHandler:a}=e;const c=(0,E.tT)("sequences",n);if((0,d.useEffect)((()=>{r.g.scrollTo(0,0)}),[n,o]),t)return(0,v.jsx)(d.Suspense,{fallback:(0,v.jsx)(ti,{srMessage:s.formatMessage(Fa.loadingLockedContent)}),children:(0,v.jsx)(wl,{courseId:i,sequenceTitle:c.title,prereqSectionName:c.gatedContent.prereqSectionName,prereqId:c.gatedContent.prereqId})});const l=(0,E.tT)("units",o);return o&&l?(0,v.jsx)(jl,{courseId:i,format:c.format,id:o,onLoaded:a},o):(0,v.jsx)("div",{children:s.formatMessage(Fa.noContent)})};Sl.propTypes={gated:_().bool.isRequired,courseId:_().string.isRequired,sequenceId:_().string.isRequired,unitId:_().string,unitLoadedHandler:_().func.isRequired,intl:M.gm.isRequired},Sl.defaultProps={unitId:null};const Ol=(0,f.Z)(Sl),kl=e=>{let{unitId:t,sequenceId:s,courseId:i,unitNavigationHandler:o,nextSequenceHandler:a,previousSequenceHandler:c}=e;const l=(0,ft.Z)(),{canAccessProctoredExams:u,license:p}=(0,E.tT)("coursewareMeta",i),{isStaff:g,originalUserIsStaff:m}=(0,E.tT)("courseHomeMeta",i),f=(0,E.tT)("sequences",s),b=(0,E.tT)("units",t),y=(0,h.useSelector)((e=>e.courseware.sequenceStatus)),x=(0,h.useSelector)((e=>e.courseware.sequenceMightBeUnit)),j=(0,Xr.Z)().width<es.Z.small.minWidth,w=(0,n.getConfig)().ENABLE_NEW_SIDEBAR,k=()=>{const e=f.unitIds.indexOf(t)+1;if(e<f.unitIds.length){const t=f.unitIds[e];P(t)}else a()},M=()=>{const e=f.unitIds.indexOf(t)-1;if(e>=0){const t=f.unitIds[e];P(t)}else c()},P=e=>{o(e)},C=(e,r,s)=>{const i={current_tab:(f.unitIds.length>0?f.unitIds.indexOf(t):0)+1,id:t,tab_count:f.unitIds.length,widget_placement:r};if(s){const e=f.unitIds.indexOf(s);i.target_tab=e+1}(0,O.hC)(e,i),(0,O.eb)(e,i)};!function(e){const t=(0,E.tT)("sequences",e),r=(0,h.useSelector)((e=>e.courseware.sequenceStatus));(0,S.VY)("loaded"===r&&t.bannerText,{code:null,dismissible:!1,text:t.bannerText,type:S.CH.INFO,topic:"sequence"})}(s),function(e,t,r){const s=(0,E.tT)("coursewareMeta",e),i=(0,E.tT)("sequences",t),n=(0,h.useSelector)((e=>e.courseware.sequenceStatus)),{entranceExamCurrentScore:o,entranceExamEnabled:a,entranceExamId:c,entranceExamMinimumScorePct:l,entranceExamPassed:d}=s.entranceExamData||{},u="loaded"===n&&a&&c===i.sectionId;let p;p=d?r.formatMessage(Ao.entranceExamTextPassed,{entranceExamCurrentScore:100*o}):r.formatMessage(Ao.entranceExamTextNotPassing,{entranceExamCurrentScore:100*o,entranceExamMinimumScorePct:100*l}),(0,S.VY)(u,{code:null,dismissible:!1,text:p,type:S.CH.INFO,topic:"sequence"})}(i,s,l),(0,d.useEffect)((()=>{r.g.addEventListener("message",(function(e){const{type:t}=e.data;"entranceExam.passed"===t&&r.g.location.reload()}))}),[]);const[T,N]=(0,d.useState)(!1);if((0,d.useEffect)((()=>{b&&N(!1)}),[(b||{}).id]),"loading"===y||"failed"===y&&x)return s?(0,v.jsx)(ti,{srMessage:l.formatMessage(Fa.loadingSequence)}):(0,v.jsxs)("div",{children:[" ",l.formatMessage(Fa.noContent)," "]});if("loaded"===y&&f.isHiddenAfterDue)return(0,v.jsx)(Qa,{courseId:i});const I=f&&void 0!==f.gatedContent&&f.gatedContent.gated,_=(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"sequence-container d-inline-flex flex-row w-100",children:[(0,v.jsxs)("div",{className:ge()("sequence w-100",{"position-relative":j}),children:[(0,v.jsxs)("div",{className:"sequence-navigation-container",children:[(0,v.jsx)(vc,{sequenceId:s,unitId:t,className:"mb-4",nextHandler:()=>{C("edx.ui.lms.sequence.next_selected","top"),k()},onNavigate:e=>{C("edx.ui.lms.sequence.tab_selected","top",e),P(e)},previousHandler:()=>{C("edx.ui.lms.sequence.previous_selected","top"),M()}}),j&&("true"===w?(0,v.jsx)($a,{}):(0,v.jsx)(Ha,{}))]}),(0,v.jsxs)("div",{className:"unit-container flex-grow-1",children:[(0,v.jsx)(Ol,{courseId:i,gated:I,sequenceId:s,unitId:t,unitLoadedHandler:()=>{N(!0)}}),T&&(0,v.jsx)(Mc,{sequenceId:s,unitId:t,onClickPrevious:()=>{C("edx.ui.lms.sequence.previous_selected","bottom"),M()},onClickNext:()=>{C("edx.ui.lms.sequence.next_selected","bottom"),k()}})]})]}),"true"===w?(0,v.jsx)(Ba,{}):(0,v.jsx)(va,{})]}),(0,v.jsx)("div",{id:"whole-course-translation-feedback-widget"})]});return"loaded"===y?(0,v.jsxs)("div",{children:[(0,v.jsx)(vi.ZP,{sequence:f,courseId:i,isStaff:g,originalUserIsStaff:m,canAccessProctoredExams:u,children:_}),(0,v.jsx)(Yo,{license:p||void 0})]}):(0,v.jsx)("p",{className:"text-center py-5 mx-auto",style:{maxWidth:"30em"},children:l.formatMessage(Fa.loadFailure)})};kl.propTypes={unitId:_().string,sequenceId:_().string,courseId:_().string.isRequired,unitNavigationHandler:_().func.isRequired,nextSequenceHandler:_().func.isRequired,previousSequenceHandler:_().func.isRequired},kl.defaultProps={sequenceId:null,unitId:null};const Ml=kl;var Pl=r(36766);const Cl=r.p+"5d807cf236c139fbbba42662e57fd7d7.gif",Tl=r.p+"3e27683222187b61655f1e0b82e12596.gif",Nl=(0,N.vU)({completed:{id:"learning.celebration.completed",defaultMessage:"You just completed the first section of your course.",description:"Shown only once to leaner when they complete their first section"},congrats:{id:"learning.celebration.congrats",defaultMessage:"Congratulations!",description:"Greeting for learners when they complete their weekly goal or finish the first section"},earned:{id:"learning.celebration.earned",defaultMessage:"You earned it!",description:"Shown below congrats messaging when leaner complete a goal"},emailSubject:{id:"learning.celebration.emailSubject",defaultMessage:"I'm on my way to completing {title} online with {platform}!",description:"Subject when sharing course progress via email"},forward:{id:"learning.celebration.forward",defaultMessage:"Keep going",description:"Button to close celebration dialog and get back to course"},goalMet:{id:"learning.celebration.goalMet",defaultMessage:"You met your goal!",description:"Headline for (weekly gaol celebration) section in courseware"},keepItUp:{id:"learning.celebration.keepItUp",defaultMessage:"Keep it up",description:"Button to close celebration dialog and get back to course"},share:{id:"learning.celebration.share",defaultMessage:"Take a moment to celebrate and share your progress.",description:"Text that precedes the (sharing icon) for goal accomplishment "},socialMessage:{id:"learning.celebration.social",defaultMessage:"I’m on my way to completing {title} online with {platform}. What are you spending your time learning?",description:"Shown when sharing course progress on a social network"}});function Il(e,t){const r=new URL(`${(0,n.getConfig)().LMS_BASE_URL}/api/courseware/celebration/${e}`);(0,k.kj)().post(r.href,t)}function _l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function El(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_l(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const ql="CelebrationModal.showOnSectionLoad",Rl=["courseId","intl","isOpen","onClose"];function Zl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function Dl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zl(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Al=e=>{let{courseId:t,intl:r,isOpen:s,onClose:i}=e,n=function(e,t){if(null==e)return{};var r,s,i=function(e,t){if(null==e)return{};var r,s,i={},n=Object.keys(e);for(s=0;s<n.length;s++)r=n[s],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,Rl);const{org:o,celebrations:a}=(0,E.tT)("courseHomeMeta",t),c=(0,h.useDispatch)(),l=(0,Xr.Z)().width>=es.Z.small.minWidth;return(0,d.useEffect)((()=>{s&&function(e,t,r,s){Il(t,{first_section:!1}),s((0,E.QB)({modelType:"courseHomeMeta",model:{id:t,celebrations:El(El({},r),{},{firstSection:!1})}}));const{administrator:i}=(0,k.IC)();(0,O.hC)("edx.ui.lms.celebration.first_section.opened",{org_key:e,courserun_key:t,course_id:t,is_staff:i})}(o,t,a,c)}),[s]),(0,v.jsx)(Pl.Z,Dl(Dl({footerNode:(0,v.jsx)(ho.Z,{isStacked:!0,className:"pb-2",children:(0,v.jsx)(P.ZP,{onClick:i,children:r.formatMessage(Nl.forward)})}),hasCloseButton:!1,isOpen:s,onClose:i,title:(0,v.jsx)("p",{className:"h2 text-center mr-n5 pt-4",children:r.formatMessage(Nl.congrats)})},n),{},{children:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("p",{className:"text-center",children:r.formatMessage(Nl.completed)}),!l&&(0,v.jsx)("img",{src:Cl,alt:"",className:"img-fluid"}),l&&(0,v.jsx)("img",{src:Tl,alt:"",className:"img-fluid w-100"}),(0,v.jsxs)("p",{className:"mt-3 text-center",children:[(0,v.jsx)("strong",{children:r.formatMessage(Nl.earned)})," ",r.formatMessage(Nl.share)]}),(0,v.jsx)(Rs,{analyticsId:"edx.ui.lms.celebration.social_share.clicked",courseId:t,emailSubject:Nl.emailSubject,socialMessage:Nl.socialMessage})]})}))};Al.propTypes={courseId:_().string.isRequired,intl:M.gm.isRequired,isOpen:_().bool.isRequired,onClose:_().func.isRequired};const Ll=(0,f.Z)(Al),Bl=r.p+"576c66a8c6641bf4ae79601dcb8f6d07.svg",Ul=["courseId","daysPerWeek","intl","isOpen","onClose"];function Hl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function $l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hl(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Fl=e=>{let{courseId:t,daysPerWeek:r,intl:s,isOpen:i,onClose:n}=e,o=function(e,t){if(null==e)return{};var r,s,i=function(e,t){if(null==e)return{};var r,s,i={},n=Object.keys(e);for(s=0;s<n.length;s++)r=n[s],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,Ul);const{org:a}=(0,E.tT)("courseHomeMeta",t);return(0,d.useEffect)((()=>{i&&function(e,t){Il(t,{weekly_goal:!1});const{administrator:r}=(0,k.IC)();(0,O.hC)("edx.ui.lms.celebration.weekly_goal.opened",{org_key:e,courserun_key:t,is_staff:r})}(a,t)}),[i]),(0,v.jsx)(Pl.Z,$l($l({footerNode:(0,v.jsx)(ho.Z,{isStacked:!0,className:"pb-2",children:(0,v.jsx)(P.ZP,{onClick:n,children:s.formatMessage(Nl.keepItUp)})}),hasCloseButton:!1,isOpen:i,onClose:n,title:(0,v.jsx)("p",{className:"h2 text-center mr-n5 pt-4",children:s.formatMessage(Nl.goalMet)})},o),{},{children:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"text-center px-3",children:(0,v.jsx)(Ke.Z,{id:"learning.celebration.goalCongrats",defaultMessage:"Congratulations, you met your learning goal of {nTimes} a week.",description:"Greeting for learners for their weekly goal, it as well indicate their gaol, i.e. (1,3 or 5 time(s) a week)",values:{nTimes:(0,v.jsxs)("strong",{children:[r," ",1===r?"time":"times"]})}})}),(0,v.jsx)("div",{className:"d-flex justify-content-center py-4.5",children:(0,v.jsx)("img",{src:Bl,alt:""})}),(0,v.jsxs)("div",{className:"py-3 pl-3 bg-light-300 small d-inline-flex",children:[(0,v.jsx)(re.Z,{src:Sn.Z,className:"mr-2",style:{height:"21px",width:"22px"}}),(0,v.jsx)("div",{children:(0,v.jsx)(Ke.Z,{id:"learning.celebration.setGoal",defaultMessage:"Setting a goal can help you {strongText} in your course.",description:"It explain the advantages of setting goal",values:{strongText:(0,v.jsx)("strong",{children:"achieve higher performance"})}})})]})]})}))};Fl.propTypes={courseId:_().string.isRequired,daysPerWeek:_().number.isRequired,intl:M.gm.isRequired,isOpen:_().bool.isRequired,onClose:_().func.isRequired};const Gl=(0,f.Z)(Fl);var Wl=r(85864);const Vl={ACCESS_DENIED:"/course/:courseId/access-denied",HOME:"/course/:courseId/home",LIVE:"/course/:courseId/live",DATES:"/course/:courseId/dates",DISCUSSION:"/course/:courseId/discussion/:path/*",PROGRESS:["/course/:courseId/progress/:targetUserId/","/course/:courseId/progress"],COURSE_END:"/course/:courseId/course-end",COURSEWARE:["/course/:courseId/:sequenceId/:unitId","/course/:courseId/:sequenceId","/course/:courseId"],REDIRECT_HOME:"home/:courseId",REDIRECT_SURVEY:"survey/:courseId"},zl="dashboard-redirect",Yl="enterprise-learner-dashboard-redirect",Ql="consent-redirect",Kl="home-redirect",Jl=["professional","verified","no-id-professional","credit","masters","executive-education","paid-executive-education","paid-bootcamp"],Xl=e=>{let{enabled:t,enrollmentMode:r,isStaff:s,courseId:i,contentToolsEnabled:n,unitId:o}=e;const{activeAttempt:a,exam:c}=(0,h.useSelector)((e=>e.specialExams)),l=(0,E.tT)("coursewareMeta",i),d=null!=r&&Jl.includes(r),p=t&&(d||s)&&(()=>{const e=(new Date).toISOString(),t=l.start||e,r=l.end||e;return t<=e&&e<=r})()&&!(a?.attempt_id||c?.id);return(0,v.jsx)(v.Fragment,{children:p&&(0,u.createPortal)((0,v.jsx)(Wl.t0,{courseId:i,contentToolsEnabled:n,unitId:o}),document.body)})};Xl.propTypes={isStaff:_().bool.isRequired,enabled:_().bool.isRequired,enrollmentMode:_().string,courseId:_().string.isRequired,contentToolsEnabled:_().bool.isRequired,unitId:_().string.isRequired},Xl.defaultProps={enrollmentMode:null};const ed=(0,f.Z)(Xl);var td=r(2914),rd=r(8404),sd=r(59678),id=r(69041);const nd=(0,N.vU)({"calculator.button.label":{id:"calculator.button.label",defaultMessage:"Calculator",description:"Button label to expand or close the calculator"},"calculator.input.field.label":{id:"calculator.input.field.label",defaultMessage:"Calculator Input",description:"label for calculator input"},"calculator.submit.button.label":{id:"calculator.submit.button.label",defaultMessage:"Calculate",description:"Submit button label to execute the calculator"},"calculator.result.field.label":{id:"calculator.result.field.label",defaultMessage:"Calculator Result",description:"label for calculator result"},"calculator.result.field.placeholder":{id:"calculator.result.field.placeholder",defaultMessage:"Result",description:"placeholder for calculator result"}});class od extends d.Component{constructor(e){super(e),this.state={equation:"",result:""},this.handleSubmit=this.handleSubmit.bind(this)}async handleSubmit(e){e.preventDefault(),e.stopPropagation();const t=new URLSearchParams;t.append("equation",this.state.equation);const r=await(0,k.kj)().get(`${(0,n.getConfig)().LMS_BASE_URL}/calculate?${t.toString()}`);this.setState((()=>({result:r.data.result})))}changeEquation(e){this.setState((()=>({equation:e})))}render(){return(0,v.jsxs)($e.Z.Advanced,{className:"calculator",children:[(0,v.jsx)("div",{className:"text-right",children:(0,v.jsxs)($e.Z.Trigger,{tag:"a",className:"trigger btn",children:[(0,v.jsx)($e.Z.Visible,{whenOpen:!0,children:(0,v.jsx)(C.G,{icon:sd.nY,"aria-hidden":"true",className:"mr-2"})}),(0,v.jsx)($e.Z.Visible,{whenClosed:!0,children:(0,v.jsx)(C.G,{icon:td.lT,"aria-hidden":"true",className:"mr-2"})}),this.props.intl.formatMessage(nd["calculator.button.label"])]})}),(0,v.jsxs)($e.Z.Body,{className:"calculator-content pt-4",children:[(0,v.jsxs)("form",{onSubmit:this.handleSubmit,className:"container-xl form-inline flex-nowrap",children:[(0,v.jsx)("input",{type:"text",placeholder:this.props.intl.formatMessage(nd["calculator.input.field.label"]),"aria-label":this.props.intl.formatMessage(nd["calculator.input.field.label"]),className:"form-control w-100",onChange:e=>this.changeEquation(e.target.value)}),(0,v.jsx)("button",{className:"btn btn-primary mx-3","aria-label":this.props.intl.formatMessage(nd["calculator.submit.button.label"]),type:"submit",children:(0,v.jsx)(C.G,{icon:id.Lv,"aria-hidden":"true"})}),(0,v.jsx)("input",{type:"text",tabIndex:"-1",readOnly:!0,"aria-live":"polite",placeholder:this.props.intl.formatMessage(nd["calculator.result.field.placeholder"]),"aria-label":this.props.intl.formatMessage(nd["calculator.result.field.label"]),className:"form-control w-50",value:this.state.result})]}),(0,v.jsxs)($e.Z.Advanced,{children:[(0,v.jsx)("div",{className:"container-xl",children:(0,v.jsxs)($e.Z.Trigger,{className:"btn btn-link btn-sm px-0 d-inline-flex align-items-center",children:[(0,v.jsx)($e.Z.Visible,{whenOpen:!0,children:(0,v.jsx)(C.G,{icon:sd.nY,"aria-hidden":"true",className:"mr-2"})}),(0,v.jsx)($e.Z.Visible,{whenClosed:!0,children:(0,v.jsx)(C.G,{icon:rd.sp,"aria-hidden":"true",className:"mr-2"})}),(0,v.jsx)(Ke.Z,{id:"calculator.instructions.button.label",defaultMessage:"Calculator Instructions"})]})}),(0,v.jsxs)($e.Z.Body,{className:"container-xl pt-3",style:{maxHeight:"50vh",overflow:"auto"},children:[(0,v.jsx)(Ke.Z,{tagName:"h6",id:"calculator.instructions",defaultMessage:"For detailed information, see the {expressions_link}.",description:"Text that precedes the link which redirects to help page calculator",values:{expressions_link:(0,v.jsx)("a",{href:(0,n.getConfig)().SUPPORT_URL_CALCULATOR_MATH,children:(0,v.jsx)(Ke.Z,{id:"calculator.instructions.support.title",defaultMessage:"Help Center",description:"Anchor text for link which redirects to help page calculator"})})}}),(0,v.jsx)("p",{children:(0,v.jsx)("strong",{children:(0,v.jsx)(Ke.Z,{id:"calculator.instructions.useful.tips",defaultMessage:"Useful tips:",description:"Headline for the (list of tips) about using the calculator"})})}),(0,v.jsxs)("ul",{children:[(0,v.jsx)("li",{className:"hint-item",id:"hint-paren",children:(0,v.jsx)(Ke.Z,{id:"calculator.hint1",defaultMessage:"Use parentheses () to make expressions clear. You can use parentheses inside other parentheses.",description:"The text indicate that the calculator supports parentheses"})}),(0,v.jsx)("li",{className:"hint-item",id:"hint-spaces",children:(0,v.jsx)(Ke.Z,{id:"calculator.hint2",defaultMessage:"Do not use spaces in expressions.",description:"It indicate that using a space might cause un expected behavior"})}),(0,v.jsx)("li",{className:"hint-item",id:"hint-howto-constants",children:(0,v.jsx)(Ke.Z,{id:"calculator.hint3",defaultMessage:"For constants, indicate multiplication explicitly (example: 5*c).",description:"It indicate the style of math notation"})}),(0,v.jsx)("li",{className:"hint-item",id:"hint-howto-maffixes",children:(0,v.jsx)(Ke.Z,{id:"calculator.hint4",defaultMessage:"For affixes, type the number and affix without a space (example: 5c)."})}),(0,v.jsx)("li",{className:"hint-item",id:"hint-howto-functions",children:(0,v.jsx)(Ke.Z,{id:"calculator.hint5",defaultMessage:"For functions, type the name of the function, then the expression in parentheses.",description:"It indicate how to use a math function, e.g. exp(4)."})})]}),(0,v.jsxs)("table",{className:"table small",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{scope:"col",children:(0,v.jsx)(Ke.Z,{id:"calculator.instruction.table.to.use.heading",defaultMessage:"To Use",description:"Column header which indicate  calculator functionality"})}),(0,v.jsx)("th",{scope:"col",children:(0,v.jsx)(Ke.Z,{id:"calculator.instruction.table.type.heading",defaultMessage:"Type",description:"Column header which indicate the supported type(s) of a the calculator functionality"})}),(0,v.jsx)("th",{scope:"col",children:(0,v.jsx)(Ke.Z,{id:"calculator.instruction.table.examples.heading",defaultMessage:"Examples",description:"Column header which list examples of  calculator functionality"})})]})}),(0,v.jsxs)("tbody",{children:[(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{scope:"row",children:(0,v.jsx)(Ke.Z,{id:"calculator.instruction.table.to.use.numbers",defaultMessage:"Numbers",description:"A calculator functionality"})}),(0,v.jsx)("td",{children:(0,v.jsxs)("ul",{className:"list-unstyled m-0",children:[(0,v.jsx)("li",{children:(0,v.jsx)(Ke.Z,{id:"calculator.instruction.table.to.use.numbers.type1",defaultMessage:"Integers",description:"Type of numbers that is supported the calculator"})}),(0,v.jsx)("li",{children:(0,v.jsx)(Ke.Z,{id:"calculator.instruction.table.to.use.numbers.type2",defaultMessage:"Fractions",description:"Type of numbers that is supported by the calculator"})}),(0,v.jsx)("li",{children:(0,v.jsx)(Ke.Z,{id:"calculator.instruction.table.to.use.numbers.type3",defaultMessage:"Decimals",description:"Type of numbers that is supported by the calculator"})})]})}),(0,v.jsx)("td",{dir:"auto",children:(0,v.jsxs)("ul",{className:"list-unstyled m-0",children:[(0,v.jsx)("li",{children:"2520"}),(0,v.jsx)("li",{children:"2/3"}),(0,v.jsx)("li",{children:"3.14, .98"})]})})]}),(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{scope:"row",children:(0,v.jsx)(Ke.Z,{id:"calculator.instruction.table.to.use.operators",defaultMessage:"Operators",description:"A calculator functionality"})}),(0,v.jsx)("td",{dir:"auto",children:(0,v.jsxs)("ul",{className:"list-unstyled m-0",children:[(0,v.jsxs)("li",{children:[" + - * / ",(0,v.jsx)(Ke.Z,{id:"calculator.instruction.table.to.use.operators.type1",defaultMessage:"(add, subtract, multiply, divide)",description:"Type of opprators that are supported by the calculator"})]}),(0,v.jsxs)("li",{children:["^ ",(0,v.jsx)(Ke.Z,{id:"calculator.instruction.table.to.use.operators.type2",defaultMessage:"(raise to a power)",description:"It indicate that symbol (^) is being used to raise power, e.g. 2^2 = 4"})]}),(0,v.jsxs)("li",{children:["|| ",(0,v.jsx)(Ke.Z,{id:"calculator.instruction.table.to.use.operators.type3",defaultMessage:"(parallel resistors)",description:"It indicate that the sympol (||) is being used to calculate (parallel resistor), it is a concept in electrical/electronic engineering"})]})]})}),(0,v.jsx)("td",{dir:"auto",children:(0,v.jsxs)("ul",{className:"list-unstyled m-0",children:[(0,v.jsx)("li",{children:"x+(2*y)/x-1"}),(0,v.jsx)("li",{children:"x^(n+1)"}),(0,v.jsx)("li",{children:"v_IN+v_OUT"}),(0,v.jsx)("li",{children:"1||2"})]})})]}),(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{scope:"row",children:(0,v.jsx)(Ke.Z,{id:"calculator.instruction.table.to.use.constants",defaultMessage:"Constants",description:"It indicate that the calculator support constants, e.g. the speed of light"})}),(0,v.jsx)("td",{dir:"auto",children:"e, pi"}),(0,v.jsx)("td",{dir:"auto",children:(0,v.jsxs)("ul",{className:"list-unstyled m-0",children:[(0,v.jsx)("li",{children:"20*e"}),(0,v.jsx)("li",{children:"418*pi"})]})})]}),(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{scope:"row",children:(0,v.jsx)(Ke.Z,{id:"calculator.instruction.table.to.use.affixes",defaultMessage:"Affixes"})}),(0,v.jsx)("td",{dir:"auto",children:(0,v.jsx)(Ke.Z,{id:"calculator.instruction.table.to.use.affixes.type",defaultMessage:"Percent sign (%)"})}),(0,v.jsx)("td",{dir:"auto",children:(0,v.jsx)("ul",{className:"list-unstyled m-0",children:(0,v.jsx)("li",{children:"20%"})})})]}),(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{scope:"row",children:(0,v.jsx)(Ke.Z,{id:"calculator.instruction.table.to.use.basic.functions",defaultMessage:"Basic functions",description:"It indicate that calculator supports mathematical function"})}),(0,v.jsx)("td",{dir:"auto",children:"abs, exp, fact, factorial, ln, log2, log10, sqrt"}),(0,v.jsx)("td",{dir:"auto",children:(0,v.jsxs)("ul",{className:"list-unstyled m-0",children:[(0,v.jsx)("li",{children:"abs(x+y)"}),(0,v.jsx)("li",{children:"sqrt(x^2-y)"})]})})]}),(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{scope:"row",children:(0,v.jsx)(Ke.Z,{id:"calculator.instruction.table.to.use.trig.functions",defaultMessage:"Trigonometric functions",description:"Type of mathematical function that is supported by the calculator"})}),(0,v.jsx)("td",{dir:"auto",children:(0,v.jsxs)("ul",{className:"list-unstyled m-0",children:[(0,v.jsx)("li",{children:"sin, cos, tan, sec, csc, cot"}),(0,v.jsx)("li",{children:"arcsin, sinh, arcsinh"})]})}),(0,v.jsx)("td",{dir:"auto",children:(0,v.jsxs)("ul",{className:"list-unstyled m-0",children:[(0,v.jsx)("li",{children:"sin(4x+y)"}),(0,v.jsx)("li",{children:"arccsch(4x+y)"})]})}),(0,v.jsx)("td",{dir:"auto"})]}),(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{scope:"row",children:(0,v.jsx)(Ke.Z,{id:"calculator.instruction.table.to.use.scientific.notation",defaultMessage:"Scientific notation",description:"It indicate that calculator supports scientific notation"})}),(0,v.jsx)("td",{dir:"auto",children:(0,v.jsx)(Ke.Z,{id:"calculator.instruction.table.to.use.scientific.notation.type1",defaultMessage:"{exponentSyntax} and the exponent",description:"Type of scientific notation that is  supported by the calculator",values:{exponentSyntax:"10^"}})}),(0,v.jsx)("td",{dir:"auto",children:"10^-9"})]}),(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{scope:"row",children:(0,v.jsx)(Ke.Z,{id:"calculator.instruction.table.to.use.scientific.notation.type2",defaultMessage:"{notationSyntax} notation",description:"It indicate that calculator supports (e) to be used in notation",values:{notationSyntax:"e"}})}),(0,v.jsx)("td",{dir:"auto",children:(0,v.jsx)(Ke.Z,{id:"calculator.instruction.table.to.use.scientific.notation.type3",defaultMessage:"{notationSyntax} and the exponent",description:"An example for using (e) in notation",values:{notationSyntax:"1e"}})}),(0,v.jsx)("td",{dir:"auto",children:"1e-9"})]})]})]})]})]})]})]})}}od.propTypes={intl:M.gm.isRequired};const ad=(0,f.Z)(od);var cd=r(86206);const ld=(0,N.vU)({"notes.button.show":{id:"notes.button.show",defaultMessage:"Show Notes",description:"Message for toggling notes visibility"},"notes.button.hide":{id:"notes.button.hide",defaultMessage:"Hide Notes",description:"Message for toggling notes visibility"}});class dd extends d.Component{constructor(e){var t,r,s,i;super(e),t=this,s=()=>{const e={visibility:!this.state.visible};(0,k.kj)().put(this.visibilityUrl,e).then((()=>{this.setState((e=>({visible:!e.visible}))),document.getElementById("unit-iframe").contentWindow.postMessage("tools.toggleNotes",(0,n.getConfig)().LMS_BASE_URL)}))},(r="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r="handleClick"))?i:i+"")in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,this.state={visible:e.course.notes.visible},this.visibilityUrl=`${(0,n.getConfig)().LMS_BASE_URL}/courses/${e.course.id}/edxnotes/visibility/`}render(){const e=this.state.visible?"notes.button.hide":"notes.button.show";return(0,v.jsxs)("button",{className:`trigger btn ${this.state.visible?"text-secondary":"text-success"}  mx-2 `,role:"switch",type:"button",onClick:this.handleClick,onKeyDown:this.handleClick,tabIndex:"-1","aria-checked":this.state.visible?"true":"false",children:[(0,v.jsx)(C.G,{icon:cd.UJ,"aria-hidden":"true",className:"mr-2"}),this.props.intl.formatMessage(ld[e])]})}}dd.propTypes={intl:M.gm.isRequired,course:_().shape({id:_().string.isRequired,notes:_().shape({visible:_().bool}).isRequired}).isRequired};const ud=(0,f.Z)(dd),pd=e=>{let{course:t}=e;const{sidebarIsOpen:r}=(0,h.useSelector)((e=>e.learningAssistant));return!r&&(0,v.jsx)("div",{className:"content-tools",children:(0,v.jsxs)("div",{className:"d-flex justify-content-end align-items-end m-0",children:[t.showCalculator&&(0,v.jsx)(ad,{}),t.notes.enabled&&(0,v.jsx)(ud,{course:t})]})})};pd.propTypes={course:_().shape({notes:_().shape({enabled:_().bool}),showCalculator:_().bool}).isRequired};const gd=pd;var md=r(50673),fd=r(5666),hd=r(27385);const bd=e=>{let{title:t,courseId:r,currentSequence:s,currentUnit:i,sequences:n,isDefault:o,onClick:a}=e;const c=(0,p.s0)();return(0,v.jsx)(Pi.ZP.Item,{active:o,onClick:e=>function(e){const l=o?`/course/${r}/${s}/${i}`:`/course/${r}/${n[0].id}`;!function(e){const s="edx.ui.lms.jump_nav.selected",i={target_name:t,id:e,current_id:r,widget_placement:"breadcrumb"};(0,O.hC)(s,i),(0,O.eb)(s,i)}(l),c(l),a&&a(e)}(e),children:t})},yd=_().shape({id:_().string.isRequired});bd.defaultProps={onClick:null},bd.propTypes={title:_().string.isRequired,sequences:_().arrayOf(yd).isRequired,isDefault:_().bool.isRequired,courseId:_().string.isRequired,currentSequence:_().string.isRequired,currentUnit:_().string.isRequired,onClick:_().func};const xd=bd,vd=e=>{let{content:t,withSeparator:r,courseId:s,sequenceId:i,unitId:o,isStaff:a}=e;const c=t.filter((e=>e.default))[0]||{id:s,label:"",sequences:[]},l="true"!==(0,n.getConfig)().ENABLE_JUMPNAV||t.length<2||!a,[u,p,g]=(0,ki.Z)(!1),[m,f]=(0,d.useState)(null);return(0,v.jsxs)(v.Fragment,{children:[r&&(0,v.jsx)("li",{className:"col-auto p-0 mx-2 text-primary-500 text-truncate text-nowrap",role:"presentation","aria-hidden":!0,children:"/"}),(0,v.jsx)("li",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},"data-testid":"breadcrumb-item",children:l?(0,v.jsx)(Qe.rU,{className:"text-primary-500",to:c.sequences.length?`/course/${s}/${c.sequences[0].id}`:`/course/${s}/${c.id}`,children:c.label}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("a",{className:"text-primary-500",onClick:p,ref:f,children:c.label}),(0,v.jsx)(fd.Z,{positionRef:m,isOpen:u,onClose:g,children:(0,v.jsx)(hd.Z,{children:t.map((e=>(0,v.jsx)(xd,{isDefault:e.default,sequences:e.sequences,courseId:s,title:e.label,currentSequence:i,currentUnit:o,onClick:g},e.label)))})})]})})]})};vd.propTypes={content:_().arrayOf(_().shape({default:_().bool,id:_().string,label:_().string})).isRequired,sequenceId:_().string,unitId:_().string,withSeparator:_().bool,courseId:_().string,isStaff:_().bool},vd.defaultProps={withSeparator:!1,sequenceId:null,unitId:null,courseId:null,isStaff:null};const jd=e=>{let{courseId:t,sectionId:r,sequenceId:s,unitId:i,isStaff:n}=e;const o=(0,E.tT)("coursewareMeta",t),a=(0,h.useSelector)((e=>e.courseware.courseStatus)),c=(0,h.useSelector)((e=>e.courseware.sequenceStatus)),l=Object.fromEntries((0,E.bP)("sections",o.sectionIds).map((e=>[e.id,{default:e.id===r,title:e.title,sequences:(0,E.bP)("sequences",e.sequenceIds)}]))),u=(0,d.useMemo)((()=>{const e=[],t=[];return"loaded"===a&&"loaded"===c&&Object.entries(l).forEach((r=>{let[i,n]=r;e.push({id:i,label:n.title,default:n.default,sequences:n.sequences}),n.default&&n.sequences.forEach((e=>{t.push({id:e.id,label:e.title,default:e.id===s,sequences:[e]})}))})),[e,t]}),[a,c,l]);return(0,v.jsx)("nav",{"aria-label":"breadcrumb",className:"d-inline-block col-sm-10",children:(0,v.jsxs)("ol",{className:"list-unstyled d-flex flex-nowrap align-items-center m-0",children:[(0,v.jsx)("li",{className:"list-unstyled col-auto m-0 p-0",children:(0,v.jsxs)(Qe.rU,{className:"flex-shrink-0 text-primary",to:`/course/${t}/home`,replace:!0,children:[(0,v.jsx)(C.G,{icon:md.J9,className:"mr-2"}),(0,v.jsx)(Ke.Z,{id:"learn.breadcrumb.navigation.course.home",description:"The course home link in breadcrumbs nav",defaultMessage:"Course"})]})}),u.map(((e,r)=>(0,v.jsx)(vd,{courseId:t,sequenceId:s,content:e,unitId:i,withSeparator:!0,isStaff:n},r)))]})})};jd.propTypes={courseId:_().string.isRequired,sectionId:_().string,sequenceId:_().string,unitId:_().string,isStaff:_().bool},jd.defaultProps={sectionId:null,sequenceId:null,unitId:null,isStaff:null};const wd=jd,Sd=e=>{let{courseId:t,unitId:r,children:s}=e;const{verifiedMode:i}=(0,E.tT)("courseHomeMeta",t),n=(0,Xr.Z)().width<es.Z.large.minWidth,o=(0,Xr.Z)().width>es.Z.medium.minWidth,a=new URLSearchParams(window.location.search),c=o||"true"===a.get("sidebar")?ya.DISCUSSIONS.ID:null,[l,u]=(0,d.useState)(c),[p,g]=(0,d.useState)((0,bt.$o)(`notificationStatus.${t}`)),[m,f]=(0,d.useState)((0,bt.$o)(`upgradeNotificationCurrentState.${t}`));(0,d.useEffect)((()=>{u(i?ya.NOTIFICATIONS.ID:ya.DISCUSSIONS.ID)}),[r]);const h=(0,d.useCallback)((()=>{g("inactive"),(0,bt.qQ)(`notificationStatus.${t}`,"inactive")}),[t]),b=(0,d.useCallback)((e=>{u(e===l?null:e)}),[l]),y=(0,d.useMemo)((()=>({toggleSidebar:b,onNotificationSeen:h,setNotificationStatus:g,currentSidebar:l,notificationStatus:p,upgradeNotificationCurrentState:m,setUpgradeNotificationCurrentState:f,shouldDisplaySidebarOpen:o,shouldDisplayFullScreen:n,courseId:t,unitId:r})),[t,l,p,h,n,o,b,r,m]);return(0,v.jsx)(Jo.Provider,{value:y,children:s})};Sd.propTypes={courseId:_().string.isRequired,unitId:_().string.isRequired,children:_().node},Sd.defaultProps={children:null};const Od=Sd;var kd=r(65455),Md=r.n(kd);const Pd=e=>{let{courseId:t,unitId:r,children:s}=e;const i=(0,Xr.Z)().width<es.Z.large.minWidth,n=(0,Xr.Z)().width>es.Z.medium.minWidth,o=new URLSearchParams(window.location.search),a=n||"true"===o.get("sidebar")?Aa.DISCUSSIONS_NOTIFICATIONS.ID:null,[c,l]=(0,d.useState)(a),[u,p]=(0,d.useState)((0,bt.$o)(`notificationStatus.${t}`)),[g,m]=(0,d.useState)(!1),[f,h]=(0,d.useState)(!1),[b,y]=(0,d.useState)((0,bt.$o)(`upgradeNotificationCurrentState.${t}`)),x=(0,E.tT)("discussionTopics",r),{verifiedMode:j}=(0,E.tT)("courseHomeMeta",t),w=x?.id&&x?.enabledInContext||!1,S=!Md()(j),O=(0,d.useCallback)((()=>{p("inactive"),(0,bt.qQ)(`notificationStatus.${t}`,"inactive")}),[t]);(0,d.useEffect)((()=>{m(!w),h(!S),l(Aa.DISCUSSIONS_NOTIFICATIONS.ID)}),[r,x]),(0,d.useEffect)((()=>{g&&f&&l(null)}),[g,f]);const k=(0,d.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t?(m((e=>t===wa||e)),h((e=>t===Sa||e))):(l((t=>e===t?null:e)),m(!w),h(!S))}),[w,S]),M=(0,d.useMemo)((()=>({toggleSidebar:k,onNotificationSeen:O,setNotificationStatus:p,currentSidebar:c,notificationStatus:u,upgradeNotificationCurrentState:b,setUpgradeNotificationCurrentState:y,shouldDisplaySidebarOpen:n,shouldDisplayFullScreen:i,courseId:t,unitId:r,hideDiscussionbar:g,hideNotificationbar:f,isNotificationbarAvailable:S,isDiscussionbarAvailable:w})),[t,c,u,O,i,n,k,r,b,g,f,S,w]);return(0,v.jsx)(ja.Provider,{value:M,children:s})};Pd.propTypes={courseId:_().string.isRequired,unitId:_().string.isRequired,children:_().node},Pd.defaultProps={children:null};const Cd=Pd;function Td(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function Nd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Td(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Td(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Id=e=>{let{courseId:t,sequenceId:r,unitId:s,nextSequenceHandler:i,previousSequenceHandler:o,unitNavigationHandler:a,windowWidth:c}=e;const l=(0,E.tT)("coursewareMeta",t),{celebrations:u,isStaff:p}=(0,E.tT)("courseHomeMeta",t),m=(0,E.tT)("sequences",r),f=(0,E.tT)("sections",m?m.sectionId:null),b=(0,n.getConfig)().ENABLE_NEW_SIDEBAR,y=m?.navigationDisabled??!1,x=[m,f,l].filter((e=>null!=e)).map((e=>e.title)),j=(0,h.useDispatch)(),[w,O]=(0,d.useState)(!1),[k,M]=(0,d.useState)(u&&!u.streakLengthToCelebrate&&u.weeklyGoal),P=c>=es.Z.small.minWidth,C=c>=es.Z.medium.minWidth,T=l?.courseGoals?.selectedGoal?.daysPerWeek;(0,d.useEffect)((()=>{const e=u&&u.firstSection;O(function(e,t,r,s,i){const n=(0,bt.$o)(ql);if(!n)return!1;const{prevSequenceId:o,nextSequenceId:a}=n,c=t===a;let l=c&&r;return l&&i.streakLengthToCelebrate&&(l=!1,Il(e,{first_section:!1})),t===o||c||((0,bt.ZL)(ql),s((0,E.QB)({modelType:"courseHomeMeta",model:{id:e,celebrations:El(El({},i),{},{firstSection:!1})}}))),l}(t,r,e,j,u))}),[r]);const N="true"===b?Cd:Od;return(0,v.jsxs)(N,{courseId:t,unitId:s,children:[(0,v.jsx)(g.q,{children:(0,v.jsx)("title",{children:`${x.join(" | ")} | ${(0,n.getConfig)().SITE_NAME}`})}),(0,v.jsxs)("div",{className:"position-relative d-flex align-items-center mb-4 mt-1",children:[y||(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(wd,{courseId:t,sectionId:f?f.id:null,sequenceId:r,isStaff:p,unitId:s})}),C&&(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(ed,{enabled:l.learningAssistantEnabled,enrollmentMode:l.enrollmentMode,isStaff:p,courseId:t,contentToolsEnabled:l.showCalculator||l.notes.enabled,unitId:s})}),P&&(0,v.jsx)(v.Fragment,{children:"true"===b?(0,v.jsx)($a,{}):(0,v.jsx)(Ha,{})})]}),(0,v.jsx)(S.UW,{topic:"sequence"}),(0,v.jsx)(Ml,{unitId:s,sequenceId:r,courseId:t,unitNavigationHandler:a,nextSequenceHandler:i,previousSequenceHandler:o}),(0,v.jsx)(Ll,{courseId:t,isOpen:w,onClose:()=>O(!1)}),(0,v.jsx)(Gl,{courseId:t,daysPerWeek:T,isOpen:k,onClose:()=>M(!1)}),(0,v.jsx)(gd,{course:l})]})};Id.propTypes={courseId:_().string,sequenceId:_().string,unitId:_().string,nextSequenceHandler:_().func.isRequired,previousSequenceHandler:_().func.isRequired,unitNavigationHandler:_().func.isRequired,windowWidth:_().number.isRequired},Id.defaultProps={courseId:null,sequenceId:null,unitId:null};const _d=e=>{const t=(0,Xr.Z)().width;return void 0===t?null:(0,v.jsx)(Id,Nd(Nd({},e),{},{windowWidth:t}))};function Ed(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function qd(e,t,r){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?s:s+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Rd=(0,xi.PW)(((e,t,r,s,i)=>{"loaded"!==e||r||async function(e){const t=new URL(`${(0,n.getConfig)().LMS_BASE_URL}/api/courseware/resume/${e}`),{data:r}=await(0,k.kj)().get(t.href,{});return(0,vr.u3)(r)}(t).then((e=>{e.sectionId&&e.unitId?i(`/course/${t}/${e.sectionId}/${e.unitId}`,{replace:!0}):s&&i(`/course/${t}/${s}`,{replace:!0})}))})),Zd=(0,xi.PW)(((e,t,r,s,i,n)=>{"loaded"===e&&"failed"===r&&s&&i&&n(`/course/${t}/${i}`,{replace:!0})})),Dd=(0,xi.PW)(((e,t,r,s,i,n)=>{"loaded"===e&&"failed"===r&&s&&!i&&(s.sequenceIds&&s.sequenceIds[0]?n(`/course/${t}/${s.sequenceIds[0]}`,{replace:!0}):n(`/course/${t}`,{replace:!0}))})),Ad=(0,xi.PW)(((e,t,r,s,i,o,a,c)=>{if("loaded"===e&&"failed"===r&&!o&&!a)if(s){const e=i;(async function(e,t){const r=(0,k.IC)(),s=new URL(`${(0,n.getConfig)().LMS_BASE_URL}/api/courses/v2/blocks/`);s.searchParams.append("course_id",e),s.searchParams.append("username",r?r.username:""),s.searchParams.append("depth",3),s.searchParams.append("requested_fields","children,discussions_url");const{data:i}=await(0,k.kj)().get(s.href,{}),o=Object.values(i.blocks).find((e=>"sequential"===e.type&&e.children.includes(t)));return o?.id})(t,e).then((r=>{c(r?`/course/${t}/${r}/${e}`:`/course/${t}`,{replace:!0})}),(()=>{c(`/course/${t}`,{replace:!0})}))}else c(`/course/${t}`,{replace:!0})})),Ld=(0,xi.PW)(((e,t,r,s,i)=>{if("loaded"===t&&r.id&&!s&&void 0!==r.unitIds&&r.unitIds.length>0){const t=r.unitIds[r.activeUnitIndex];i(`/course/${e}/${r.id}/${t}`,{replace:!0})}})),Bd=(0,xi.PW)(((e,t,r,s,i)=>{if("loaded"!==t||!r.id)return;const n=r.unitIds?.length>0;if("first"===s)if(n){const t=r.unitIds[0];i(`/course/${e}/${r.id}/${t}`,{replace:!0})}else i(`/course/${e}/${r.id}`,{replace:!0});else if("last"===s)if(n){const t=r.unitIds[r.unitIds.length-1];i(`/course/${e}/${r.id}/${t}`,{replace:!0})}else i(`/course/${e}/${r.id}`,{replace:!0})}));class Ud extends d.Component{constructor(){super(...arguments),qd(this,"checkSaveSequencePosition",(0,xi.PW)((e=>{const{courseId:t,sequenceId:r,sequenceStatus:s,sequence:i}=this.props;if("loaded"===s&&i.saveUnitPosition&&e){const s=i.unitIds.indexOf(e);this.props.saveSequencePosition(t,r,s)}}))),qd(this,"checkFetchCourse",(0,xi.PW)((e=>{this.props.fetchCourse(e)}))),qd(this,"checkFetchSequence",(0,xi.PW)((e=>{e&&this.props.fetchSequence(e)}))),qd(this,"handleUnitNavigationClick",(()=>{const{courseId:e,sequenceId:t,routeUnitId:r}=this.props;this.props.checkBlockCompletion(e,t,r)})),qd(this,"handleNextSequenceClick",(()=>{const{course:e,nextSequence:t,sequence:r,sequenceId:s}=this.props;null!==t&&e&&e.celebrations&&e.celebrations.firstSection&&r.sectionId!==t.sectionId&&function(e,t){(0,bt.qQ)(ql,{prevSequenceId:e,nextSequenceId:t})}(s,t.id)})),qd(this,"handlePreviousSequenceClick",(()=>{}))}componentDidMount(){const{routeCourseId:e,routeSequenceId:t}=this.props;this.checkFetchCourse(e),this.checkFetchSequence(t)}componentDidUpdate(){const{courseId:e,sequenceId:t,courseStatus:r,sequenceStatus:s,sequenceMightBeUnit:i,sequence:n,firstSequenceId:o,sectionViaSequenceId:a,routeCourseId:c,routeSequenceId:l,routeUnitId:d,navigate:u}=this.props;this.checkFetchCourse(c),this.checkFetchSequence(l),this.checkSaveSequencePosition(d),e===(c||null)&&t===(l||null)&&(Rd(r,e,t,o,u),Zd(r,e,s,a,d,u),Dd(r,e,s,a,d,u),Ad(u),Ld(e,s,n,d,u),Bd(e,s,n,d,u))}render(){const{courseStatus:e,courseId:t,sequenceId:r,routeUnitId:s}=this.props;return(0,v.jsx)(Ro,{activeTabSlug:"courseware",courseId:t,unitId:s,courseStatus:e,metadataModel:"coursewareMeta",children:(0,v.jsx)(_d,{courseId:t,sequenceId:r,unitId:s,nextSequenceHandler:this.handleNextSequenceClick,previousSequenceHandler:this.handlePreviousSequenceClick,unitNavigationHandler:this.handleUnitNavigationClick})})}}const Hd=_().shape({id:_().string.isRequired,unitIds:_().arrayOf(_().string),sectionId:_().string.isRequired,saveUnitPosition:_().any}),$d=_().shape({id:_().string.isRequired,sequenceIds:_().arrayOf(_().string).isRequired}),Fd=_().shape({celebrations:_().shape({firstSection:_().bool})});Ud.propTypes={routeCourseId:_().string.isRequired,routeSequenceId:_().string,routeUnitId:_().string,courseId:_().string,sequenceId:_().string,firstSequenceId:_().string,courseStatus:_().oneOf(["loaded","loading","failed","denied"]).isRequired,sequenceStatus:_().oneOf(["loaded","loading","failed"]).isRequired,sequenceMightBeUnit:_().bool.isRequired,nextSequence:Hd,previousSequence:Hd,sectionViaSequenceId:$d,course:Fd,sequence:Hd,saveSequencePosition:_().func.isRequired,checkBlockCompletion:_().func.isRequired,fetchCourse:_().func.isRequired,fetchSequence:_().func.isRequired,navigate:_().func.isRequired},Ud.defaultProps={courseId:null,sequenceId:null,routeSequenceId:null,routeUnitId:null,firstSequenceId:null,nextSequence:null,previousSequence:null,sectionViaSequenceId:null,course:null,sequence:null};const Gd=(0,yi.P1)((e=>e.models.coursewareMeta||{}),(e=>e.courseware.courseId),((e,t)=>e[t]?e[t]:null)),Wd=(0,yi.P1)((e=>e.models.sequences||{}),(e=>e.courseware.sequenceId),((e,t)=>e[t]?e[t]:null)),Vd=(0,yi.P1)((e=>e.courseware.courseStatus),Gd,(e=>e.models.sections),((e,t,r)=>{if("loaded"!==e)return[];const{sectionIds:s=[]}=t;return s.flatMap((e=>r[e].sequenceIds))})),zd=(0,yi.P1)(Vd,(e=>e.models.sequences||{}),(e=>e.courseware.sequenceId),((e,t,r)=>{if(!r||0===e.length)return null;const s=e.indexOf(r),i=s>0?e[s-1]:null;return null!==i?t[i]:null})),Yd=(0,yi.P1)(Vd,(e=>e.models.sequences||{}),(e=>e.courseware.sequenceId),((e,t,r)=>{if(!r||0===e.length)return null;const s=e.indexOf(r),i=s<e.length-1?e[s+1]:null;return null!==i?t[i]:null})),Qd=(0,yi.P1)((e=>e.courseware.courseStatus),Gd,(e=>e.models.sections||{}),((e,t,r)=>{if("loaded"!==e)return null;const{sectionIds:s=[]}=t;return 0===s.length?null:r[s[0]].sequenceIds[0]})),Kd=(0,yi.P1)((e=>e.models.sections||{}),(e=>e.courseware.sequenceId),((e,t)=>e[t]?e[t]:null)),Jd=(0,h.connect)((e=>{const{courseId:t,sequenceId:r,courseStatus:s,sequenceStatus:i,sequenceMightBeUnit:n}=e.courseware;return{courseId:t,sequenceId:r,courseStatus:s,sequenceStatus:i,sequenceMightBeUnit:n,course:Gd(e),sequence:Wd(e),previousSequence:zd(e),nextSequence:Yd(e),firstSequenceId:Qd(e),sectionViaSequenceId:Kd(e)}}),{checkBlockCompletion:function(e,t,r){return async(s,i)=>{const{models:n}=i();if(n.units[r].complete)return{};try{const i=await async function(e,t,r){const{data:s}=await(0,k.kj)().post(`${Or(e,t)}/get_completion`,{usage_key:r});return!0===s.complete}(e,t,r);return s((0,E.QB)({modelType:"units",model:{id:r,complete:i}})),i}catch(e){(0,xr.H)(e)}return{}}},saveSequencePosition:function(e,t,r){return async(s,i)=>{const{models:n}=i(),o=n.sequences[t].activeUnitIndex;s((0,E.QB)({modelType:"sequences",model:{id:t,activeUnitIndex:r}}));try{await async function(e,t,r){const{data:s}=await(0,k.kj)().post(`${Or(e,t)}/goto_position`,{position:r+1});return s}(e,t,r),s((0,E.QB)({modelType:"sequences",model:{id:t,activeUnitIndex:r}}))}catch(e){(0,xr.H)(e),s((0,E.QB)({modelType:"sequences",model:{id:t,activeUnitIndex:o}}))}}},fetchCourse:Hr,fetchSequence:function(e){return async t=>{t(Er({sequenceId:e}));try{const{sequence:r,units:s}=await async function(e){const{data:t}=await(0,k.kj)().get(`${(0,n.getConfig)().LMS_BASE_URL}/api/courseware/sequence/${e}`,{});return{sequence:{id:(r=t).item_id,blockType:r.tag,unitIds:r.items.map((e=>e.id)),bannerText:r.banner_text,format:r.format,title:r.display_name,gatedContent:(0,vr.u3)(r.gated_content),isTimeLimited:r.is_time_limited,isProctored:r.is_proctored,isHiddenAfterDue:r.is_hidden_after_due,activeUnitIndex:r.position?r.position-1:0,saveUnitPosition:r.save_position,showCompletion:r.show_completion,allowProctoringOptOut:r.allow_proctoring_opt_out,navigationDisabled:r.navigation_disabled},units:r.items.map((e=>({id:e.id,sequenceId:r.item_id,bookmarked:e.bookmarked,complete:e.complete,title:e.page_title,contentType:e.type,graded:e.graded,containsContentTypeGatedContent:e.contains_content_type_gated_content})))};var r}(e);"sequential"!==r.blockType?((0,xr.H)(`Requested sequence '${e}' has block type '${r.blockType}'; expected block type 'sequential'.`),t(Rr({sequenceId:e}))):(t((0,E.QB)({modelType:"sequences",model:r})),t((0,E.z$)({modelType:"units",models:s})),t(qr({sequenceId:e})))}catch(r){const s=422===r?.response?.status;s||(0,xr.H)(r),t(Rr({sequenceId:e,sequenceMightBeUnit:s}))}}}})((ru=Ud,e=>{const{courseId:t,sequenceId:r,unitId:s}=(0,p.UO)(),i=(0,p.s0)();return(0,v.jsx)(ru,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ed(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ed(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({routeCourseId:t,routeSequenceId:r,routeUnitId:s,navigate:i},e))})),Xd=[].concat(...Object.values(Vl).map((e=>Array.isArray(e)?e:[e]))),eu=e=>{const t=decodeURIComponent(e);return e===t?e:eu(t)},tu=e=>{let{children:t}=e,r=null;if(Xd.forEach((e=>{const t=(0,p.bS)(e);t&&(r=t)})),r){const{pathname:e,pattern:t,params:s}=r;Object.keys(s).forEach((e=>{s[e]=eu(s[e])}));const i=(0,b.Gn)(t.path,s);if(i!==e)return(0,v.jsx)(p.Fg,{to:i,replace:!0})}return(0,v.jsxs)(c.Z,{children:[" ",t," "]})};var ru;tu.propTypes={children:_().node.isRequired};const su=tu,iu=e=>{let{pattern:t,mode:s}=e;const{courseId:i}=(0,p.UO)(),o=(0,p.TH)(),{consentPath:a}=hl.parse(o?.search),{LMS_BASE_URL:c,ENTERPRISE_LEARNER_PORTAL_URL:l}=(0,n.getConfig)();switch(s){case zl:r.g.location.assign(`${c}${t}${o?.search}`);break;case Yl:r.g.location.assign(l);break;case Ql:r.g.location.assign(`${c}${a}`);break;case Kl:r.g.location.assign((0,b.Gn)(t,{courseId:i}));break;default:r.g.location.assign(`${c}${(0,b.Gn)(t,{courseId:i})}`)}return null};iu.propTypes={pattern:_().string,mode:_().string.isRequired},iu.defaultProps={pattern:null};const nu=iu,ou=()=>(0,v.jsxs)("div",{className:"flex-grow-1",children:[(0,v.jsx)(ti,{srMessage:(0,v.jsx)(Ke.Z,{id:"learn.redirect.interstitial.message",description:"The screen-reader message when a page is about to redirect",defaultMessage:"Redirecting..."})}),(0,v.jsxs)(p.Z5,{children:[(0,v.jsx)(p.AW,{path:Vl.REDIRECT_SURVEY,element:(0,v.jsx)(su,{children:(0,v.jsx)(nu,{pattern:"/courses/:courseId/survey",mode:"survey-redirect"})})}),(0,v.jsx)(p.AW,{path:"dashboard",element:(0,v.jsx)(c.Z,{children:(0,v.jsx)(nu,{pattern:"/dashboard",mode:zl})})}),(0,v.jsx)(p.AW,{path:"enterprise-learner-dashboard",element:(0,v.jsx)(c.Z,{children:(0,v.jsx)(nu,{mode:Yl})})}),(0,v.jsx)(p.AW,{path:"consent",element:(0,v.jsx)(c.Z,{children:(0,v.jsx)(nu,{mode:Ql})})}),(0,v.jsx)(p.AW,{path:Vl.REDIRECT_HOME,element:(0,v.jsx)(su,{children:(0,v.jsx)(nu,{pattern:"/course/:courseId/home",mode:Kl})})})]})]}),au=(0,N.vU)({completed:{id:"learning.dates.badge.completed",defaultMessage:"Completed",description:"shown as label for the assignments which learner has completed."},dueNext:{id:"learning.dates.badge.dueNext",defaultMessage:"Due next",description:"Shown as label for the assignment which date is in the future"},pastDue:{id:"learning.dates.badge.pastDue",defaultMessage:"Past due",description:"Shown as label for the assignments which deadline has passed"},title:{id:"learning.dates.title",defaultMessage:"Important dates",description:"The title of dates tab (course timeline)."},today:{id:"learning.dates.badge.today",defaultMessage:"Today",description:"Label used when the scheduled date for the assignment matches the current day"},unreleased:{id:"learning.dates.badge.unreleased",defaultMessage:"Not yet released",description:"Shown as label for assignments which date is unknown yet"},verifiedOnly:{id:"learning.dates.badge.verifiedOnly",defaultMessage:"Verified only",description:"Shown as label for assignments which learner has no access to."}});var cu=r(53126),lu=r(35416),du=r(94792),uu=r(71754);function pu(e){return e.learnerHasAccess}function gu(e){return e.complete}function mu(e){return!gu(e)&&new Date(e.date)<new Date}function fu(e){return!e.link}function hu(e,t,r,s){const i=new Date,n=s.filter(R),o=0===q(e,i),a=q(e,i)>0,c=[{message:au.today,shownForDay:o,bg:"bg-warning-300",className:"text-dark"},{message:au.completed,shownForDay:n.length&&n.every(gu),shownForItem:e=>R(e)&&gu(e),bg:"bg-light-500",className:"text-dark"},{message:au.pastDue,shownForDay:n.length&&n.every(mu),shownForItem:e=>R(e)&&mu(e),bg:"bg-dark-200",className:"text-dark"},{message:au.dueNext,shownForDay:!o&&n.some((e=>e.dueNext)),shownForItem:e=>e.dueNext,bg:"bg-gray-500",className:"text-white"},{message:au.unreleased,shownForDay:n.length&&n.every(fu),shownForItem:e=>R(e)&&fu(e),className:"border border-gray-500 text-gray-500"},{message:au.verifiedOnly,shownForDay:s.length&&s.every((e=>!pu(e))),shownForItem:e=>!pu(e),icon:sc.by,bg:"bg-dark-700",className:"text-white"}];let l=null;const d=(0,v.jsx)(v.Fragment,{children:c.map((e=>{let s=e.shownForDay;return r&&(s=!e.shownForDay&&e.shownForItem&&e.shownForItem(r)),s?(l||a||(l=e.bg),(0,v.jsxs)(uu.Z,{className:ge()("ml-2",e.bg,e.className),"data-testid":"dates-badge",children:[e.icon&&(0,v.jsx)(C.G,{icon:e.icon,className:"mr-1"}),t.formatMessage(e.message)]},e.message.id)):null}))});return!l&&a&&(l="bg-gray-900"),{color:l,badges:d}}function bu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function yu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bu(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const xu=e=>{let{date:t,first:r,intl:s,items:i,last:n}=e;const{courseId:o}=(0,h.useSelector)((e=>e.courseHome)),{userTimezone:a}=(0,E.tT)("courseHomeMeta",o),c=a?{timeZone:a}:{},{color:l,badges:d}=hu(t,s,null,i);return(0,v.jsxs)("li",{className:"dates-day pb-4","data-testid":"dates-day",children:[!r&&(0,v.jsx)("div",{className:"dates-line-top border-1 border-left border-gray-900 bg-gray-900"}),(0,v.jsx)("div",{className:ge()(l,"dates-dot border border-gray-900")}),!n&&(0,v.jsx)("div",{className:"dates-line-bottom border-1 border-left border-gray-900 bg-gray-900"}),(0,v.jsxs)("div",{className:"d-inline-block ml-3 pl-2",children:[(0,v.jsxs)("div",{className:"row w-100 m-0 mb-1 align-items-center text-primary-700","data-testid":"dates-header",children:[(0,v.jsx)(N.Ji,yu({value:t,day:"numeric",month:"short",weekday:"short",year:"numeric"},c)),d]}),i.map((e=>{const{badges:r}=hu(t,s,e,i),n="assignment-due-date"===e.dateType,o=e.link&&R(e)?(0,v.jsx)("u",{children:(0,v.jsx)("a",{href:e.link,className:"text-reset",children:e.title})}):e.title,a=!e.learnerHasAccess||!e.link&&R(e)?"text-gray-500":"text-primary-700";return(0,v.jsxs)("div",{className:ge()(a,"small pb-1"),"data-testid":"dates-item",children:[(0,v.jsxs)("div",{children:[(0,v.jsxs)("span",{className:"small",children:[(0,v.jsxs)("span",{className:"font-weight-bold",children:[e.assignmentType&&`${e.assignmentType}: `,o]}),n&&(0,v.jsxs)("span",{children:[(0,v.jsx)("span",{className:"mx-1",children:"due"}),(0,v.jsx)(N.qN,yu({value:t,timeZoneName:"short"},c))]})]}),r,e.extraInfo&&(0,v.jsx)(cu.O,{placement:"bottom",overlay:(0,v.jsx)(lu.Z,{children:e.extraInfo}),children:(0,v.jsx)(C.G,{icon:du.sq,className:"fa-xs ml-1 text-gray-700","data-testid":"dates-extra-info"})})]}),e.description&&(0,v.jsx)("div",{className:"small mb-2",children:e.description})]},e.title+e.date)}))]})]})};xu.propTypes={date:_().objectOf(Date).isRequired,first:_().bool,intl:M.gm.isRequired,items:_().arrayOf(_().shape({date:_().string,dateType:_().string,description:_().string,dueNext:_().bool,learnerHasAccess:_().bool,link:_().string,title:_().string})).isRequired,last:_().bool},xu.defaultProps={first:!1,last:!1};const vu=(0,f.Z)(xu);function ju(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function wu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ju(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ju(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Su=()=>{const{courseId:e}=(0,h.useSelector)((e=>e.courseHome)),{courseDateBlocks:t}=(0,E.tT)("dates",e),r=[],s=new Date;let i=!1,n=!1;return t.forEach((e=>{const t=wu({},e),o=new Date(t.date);if(!i&&o>=s&&R(t)&&!t.complete&&(i=!0,t.dueNext=!0),!n){const e=q(o,s);0===e?n=!0:e>0&&(n=!0,r.push({date:s,items:[]}))}0===r.length||0!==q(r[r.length-1].date,o)?r.push({date:o,items:[t],first:0===r.length}):r[r.length-1].items.push(t)})),n||r.push({date:s,items:[]}),r.length&&(r[r.length-1].last=!0),(0,v.jsx)("ul",{className:"list-unstyled m-0 mt-4 pt-2",children:r.map((e=>(0,v.jsx)(vu,wu({},e),e.date)))})},Ou=e=>{let{intl:t}=e;return(0,v.jsx)("p",{className:"large",children:t.formatMessage(pt.suggestedSchedule)})};Ou.propTypes={intl:M.gm.isRequired};const ku=(0,f.Z)(Ou),Mu=e=>{let{intl:t,logUpgradeLinkClick:s}=e;const{courseId:i}=(0,h.useSelector)((e=>e.courseHome)),{datesBannerInfo:n,hasEnded:o}=(0,E.tT)("dates",i),{contentTypeGatingEnabled:a,missedDeadlines:c,verifiedUpgradeLink:l}=n;return!a||c||o||!l?null:(0,v.jsx)(lt.Z,{className:"bg-light-200",children:(0,v.jsxs)(dt.Z,{className:"w-100 m-0",children:[(0,v.jsxs)(ut.Z,{xs:12,md:9,className:"small p-0 pr-md-2",children:[(0,v.jsx)(lt.Z.Heading,{children:t.formatMessage(pt.upgradeToCompleteHeader)}),t.formatMessage(pt.upgradeToCompleteBody)]}),(0,v.jsx)(ut.Z,{xs:12,md:3,className:"align-self-center text-right mt-3 mt-md-0 p-0",children:(0,v.jsx)(P.ZP,{variant:"brand",size:"sm",className:"w-xs-100 w-md-auto",onClick:()=>{s(),r.g.location.replace(l)},children:t.formatMessage(pt.upgradeToCompleteButton)})})]})})};Mu.propTypes={intl:M.gm.isRequired,logUpgradeLinkClick:_().func},Mu.defaultProps={logUpgradeLinkClick:()=>{}};const Pu=(0,f.Z)(Mu),Cu=e=>{let{intl:t}=e;const{courseId:r}=(0,h.useSelector)((e=>e.courseHome)),{isSelfPaced:s,org:i}=(0,E.tT)("courseHomeMeta",r),{courseDateBlocks:n}=(0,E.tT)("dates",r),o=n&&n.some((e=>"assignment-due-date"===e.dateType)),a=()=>{(0,O.hC)("edx.bi.ecommerce.upsell_links_clicked",{org_key:i,courserun_key:r,linkCategory:"personalized_learner_schedules",linkName:"dates_upgrade",linkType:"button",pageName:"dates_tab"})};return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{role:"heading","aria-level":"1",className:"h2 my-3",children:t.formatMessage(au.title)}),s&&o&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(mt,{model:"dates",fetch:m.zP}),(0,v.jsx)(ku,{}),(0,v.jsx)(Pu,{logUpgradeLinkClick:a}),(0,v.jsx)(Yt,{logUpgradeLinkClick:a,model:"dates"})]}),(0,v.jsx)(Su,{})]})};Cu.propTypes={intl:M.gm.isRequired};const Tu=(0,f.Z)(Cu),Nu=(0,N.vU)({contactSupport:{id:"learning.goals.unsubscribe.contact",defaultMessage:"contact support",description:"Its shown as a suggestion or recommendation for learner when their unsubscribing request has failed"},description:{id:"learning.goals.unsubscribe.description",defaultMessage:"You will no longer receive email reminders about your goal for {courseTitle}.",description:"It describes the consequences to learner when they unsubscribe of goal reminder service"},errorHeader:{id:"learning.goals.unsubscribe.errorHeader",defaultMessage:"Something went wrong",description:"It indicate that the unsubscribing request has failed"},goToDashboard:{id:"learning.goals.unsubscribe.goToDashboard",defaultMessage:"Go to dashboard",description:"Anchor text for button that redirects to dashboard page"},header:{id:"learning.goals.unsubscribe.header",defaultMessage:"You’ve unsubscribed from goal reminders",description:"It indicate that the unsubscribing request was successful"},loading:{id:"learning.goals.unsubscribe.loading",defaultMessage:"Unsubscribing…",description:"Message shown when the unsubscribing request is processing"}});var Iu,_u,Eu;function qu(){return qu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},qu.apply(this,arguments)}const Ru=e=>d.createElement("svg",qu({xmlns:"http://www.w3.org/2000/svg",width:167,height:153,fill:"none"},e),Iu||(Iu=d.createElement("path",{fill:"currentColor",d:"M140.25 25.5H12.75v102h127.5zM127.5 46l-51 31.875L25.5 46v-7.75l51 31.875 51-31.875z"})),_u||(_u=d.createElement("circle",{cx:134,cy:39,r:33,fill:"#fff",transform:"rotate(-90 134 39)"})),Eu||(Eu=d.createElement("path",{fill:"#D23228",d:"M134 11c-15.456 0-28 12.544-28 28s12.544 28 28 28 28-12.544 28-28-12.544-28-28-28m0 50.4c-12.376 0-22.4-10.024-22.4-22.4 0-5.18 1.764-9.94 4.732-13.72l31.388 31.388A22.13 22.13 0 0 1 134 61.4m17.668-8.68L120.28 21.332A22.13 22.13 0 0 1 134 16.6c12.376 0 22.4 10.024 22.4 22.4 0 5.18-1.764 9.94-4.732 13.72"}))),Zu=(r.p,e=>{let{courseTitle:t,error:r,intl:s}=e;const i=(0,v.jsx)(Ke.Z,{id:"learning.goals.unsubscribe.errorDescription",defaultMessage:"We were unable to unsubscribe you from goal reminder emails. Please try again later or {contactSupport} for help.",values:{contactSupport:(0,v.jsx)(ts.ZP,{className:"text-reset",style:{textDecoration:"underline"},destination:`${(0,n.getConfig)().CONTACT_URL}`,children:s.formatMessage(Nu.contactSupport)})}}),o=r?s.formatMessage(Nu.errorHeader):s.formatMessage(Nu.header),a=r?i:s.formatMessage(Nu.description,{courseTitle:t});return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(Ru,{className:"text-primary",alt:""}),(0,v.jsx)("div",{role:"heading","aria-level":"1",className:"h2",children:o}),(0,v.jsx)("div",{className:"row justify-content-center",children:(0,v.jsx)("div",{className:"col-xl-7 col-12 p-0",children:a})}),(0,v.jsx)(P.ZP,{variant:"brand",href:`${(0,n.getConfig)().LMS_BASE_URL}/dashboard`,className:"mt-4",children:s.formatMessage(Nu.goToDashboard)})]})});Zu.defaultProps={courseTitle:null,error:!1},Zu.propTypes={courseTitle:_().string,error:_().bool,intl:M.gm.isRequired};const Du=(0,f.Z)(Zu),Au=e=>{let{intl:t}=e;const{token:r}=(0,p.UO)(),[s,i]=(0,d.useState)(!1),[n,o]=(0,d.useState)(!0),[a,c]=(0,d.useState)({});return(0,d.useEffect)((()=>{(0,ur.il)(r).then((e=>{o(!1),c(e.data)}),(()=>{o(!1),i(!0)})),(0,O.hC)("edx.ui.lms.goal.unsubscribe",{token:r})}),[]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(Si.wg,{showUserDropdown:!1}),(0,v.jsxs)("main",{id:"main-content",className:"container my-5 text-center",children:[n&&(0,v.jsx)(ti,{srMessage:`${t.formatMessage(Nu.loading)}`}),!n&&(0,v.jsx)(Du,{error:s,courseTitle:a.courseTitle})]})]})};Au.propTypes={intl:M.gm.isRequired};const Lu=(0,f.Z)(Au);var Bu=r(45265);function Uu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function Hu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Uu(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const $u=e=>{let{intl:t}=e;const{courseId:r}=(0,h.useSelector)((e=>e.courseHome)),{isEnrolled:s,org:i,canViewCertificate:o,userTimezone:a}=(0,E.tT)("courseHomeMeta",r),{certificateData:c,end:l,enrollmentMode:u,gradingPolicy:{gradeRange:p},hasScheduledContent:g,userHasPassingGrade:f,verificationData:b,verifiedMode:y}=(0,E.tT)("progress",r),{certificateAvailableDate:x}=c||{},j=bs(c,g,s,f,null,o),w={org_key:i,courserun_key:r},S=(0,h.useDispatch)(),{administrator:M}=(0,k.IC)();let C,T;const I=a?{timeZone:a}:{};let _;c&&(C=c.certStatus,T=c.certWebViewUrl);let q,R,Z,D,A,L,B=C,U="not_passing";f&&(U=Object.entries(p).length>1?"passing_grades":"passing");const H=(0,v.jsx)(Ls,{}),$=(0,v.jsx)(Bs,{}),F=(0,v.jsx)(Us,{}),G="downloadable"===C;if(j===ms.disabled)B="certificate_status_disabled";else if(j!==ms.nonPassing||G)if(j!==ms.inProgress||G){if(j===ms.celebration||G)switch(C){case"requesting":_="requestable",R=()=>{S((0,m.CW)(r))},q=t.formatMessage(Bu.Z[`${_}Body`]),D=t.formatMessage(Bu.Z[`${_}Button`]);break;case"unverified":_="unverified","pending"===b.status?q=(0,v.jsx)("p",{children:t.formatMessage(Bu.Z.unverifiedPendingBody)}):(q=(0,v.jsx)(Ke.Z,{id:"progress.certificateStatus.unverifiedBody",defaultMessage:"In order to generate a certificate, you must complete ID verification. {idVerificationSupportLink}.",description:"Its shown when learner are not verified thus it recommends going over the verification process",values:{idVerificationSupportLink:$}}),Z=b.link,D=t.formatMessage(Bu.Z[`${_}Button`]));break;case"downloadable":_="downloadable",q=(0,v.jsx)(Ke.Z,{id:"progress.certificateStatus.downloadableBody",defaultMessage:" Showcase your accomplishment on LinkedIn or your resumé today. You can download your certificate now and access it any time from your {dashboardLink} and {profileLink}.",description:"Recommending an action for learner when course certificate is available",values:{dashboardLink:H,profileLink:F}}),T&&(B="earned_viewable",Z=`${(0,n.getConfig)().LMS_BASE_URL}${T}`,D=t.formatMessage(Bu.Z.viewableButton));break;case"earned_but_not_available":_="notAvailable",A=(0,v.jsx)(N.Ji,{value:l,day:"numeric",month:"long",year:"numeric"}),L=(0,v.jsx)(N.Ji,{value:x,day:"numeric",month:"long",year:"numeric"}),q=(0,v.jsx)(Ke.Z,{id:"progress.certificateStatus.notAvailable.endDate",defaultMessage:"This course ends on {endDate}. Final grades and any earned certificates are scheduled to be available after {certAvailabilityDate}.",description:"This shown for leaner when they are eligible for certifcate but it't not available yet, it could because leaners just finished the course quickly!",values:{endDate:A,certAvailabilityDate:L}});break;case"audit_passing":case"honor_passing":y?(_="upgrade",q=t.formatMessage(Bu.Z[`${_}Body`]),Z=y.upgradeUrl,D=t.formatMessage(Bu.Z[`${_}Button`])):(_=null,B="audit_passing_missed_upgrade_deadline");break;default:o?(_=null,B="no_certificate_status"):(_="notAvailable",A=t.formatDate(l,Hu({year:"numeric",month:"long",day:"numeric"},I)),q=t.formatMessage(Bu.Z.notAvailableEndDateBody,{endDate:A}))}}else _="inProgress",B="has_scheduled_content",q=t.formatMessage(Bu.Z[`${_}Body`]);else _="notPassing",B="not_passing",q=t.formatMessage(Bu.Z[`${_}Body`]);if((0,d.useEffect)((()=>{(0,O.hC)("edx.ui.lms.course_progress.visited",{org_key:i,courserun_key:r,is_staff:M,track_variant:u,grade_variant:U,certificate_status_variant:B})}),[]),!_)return null;const W=t.formatMessage(Bu.Z[`${_}Header`]);return(0,v.jsx)("section",{"data-testid":"certificate-status-component",className:"text-dark-700 mb-4",children:(0,v.jsxs)(Y.ZP,{className:"bg-light-200 raised-card",children:[(0,v.jsx)(Y.ZP.Header,{title:W}),(0,v.jsx)(Y.ZP.Section,{className:"small text-gray-700",children:q}),(0,v.jsx)(Y.ZP.Footer,{children:D&&(Z||R)&&(0,v.jsx)(P.ZP,{variant:"outline-brand",onClick:()=>{(0,O.hC)("edx.ui.lms.course_progress.certificate_status.clicked",{org_key:i,courserun_key:r,is_staff:M,certificate_status_variant:B}),"upgrade"===_&&(0,O.hC)("edx.bi.ecommerce.upsell_links_clicked",Hu(Hu({},w),{},{linkCategory:"(none)",linkName:"progress_certificate",linkType:"button",pageName:"progress"})),R&&R()},href:Z,block:!0,children:D})})]})})};$u.propTypes={intl:M.gm.isRequired};const Fu=(0,f.Z)($u);var Gu=r(83248);const Wu=(0,N.vU)({donutLabel:{id:"progress.completion.donut.label",defaultMessage:"completed",description:"Label text for progress donut chart"},completionBody:{id:"progress.completion.body",defaultMessage:"This represents how much of the course content you have completed. Note that some content may not yet be released.",description:"It explains the meaning of progress donut chart"},completeContentTooltip:{id:"progress.completion.tooltip.locked",defaultMessage:"Content that you have completed.",description:"It expalains the meaning of content that is completed"},courseCompletion:{id:"progress.completion.header",defaultMessage:"Course completion",description:"Header text for (completion donut chart) section of the progress tab"},incompleteContentTooltip:{id:"progress.completion.tooltip",defaultMessage:"Content that you have access to and have not completed.",description:"It explain the meaning for content is completed"},lockedContentTooltip:{id:"progress.completion.tooltip.complete",defaultMessage:"Content that is locked and available only to those who upgrade.",description:"It expalains the meaning of content that is locked"},percentComplete:{id:"progress.completion.donut.percentComplete",defaultMessage:"You have completed {percent}% of content in this course.",description:"It summarize the progress in the course (100% - %incomplete)"},percentIncomplete:{id:"progress.completion.donut.percentIncomplete",defaultMessage:"You have not completed {percent}% of content in this course that you have access to.",description:"It summarize the progress in the course (100% - %complete)"},percentLocked:{id:"progress.completion.donut.percentLocked",defaultMessage:"{percent}% of content in this course is locked and available only for those who upgrade.",description:"It indicate the relative size of content that is locked in the course (100% - %open_content)"}}),Vu=e=>{let{completePercentage:t,intl:r,lockedPercentage:s}=e;const[i,n]=(0,d.useState)(!1);if(!t)return null;const o=3.6*t/8;let a=t<100?-o:0;const c=s-75;return s>0&&(a=-3.6*(c+t)+90+o),(0,v.jsxs)("g",{className:"donut-segment-group",onBlur:()=>n(!1),onFocus:()=>n(!0),tabIndex:"-1",children:[(0,v.jsx)(cu.O,{show:i,placement:"top",overlay:(0,v.jsx)(Gu.ZP,{id:"complete-content-tooltip-popover","aria-hidden":"true",children:(0,v.jsx)(Gu.ZP.Content,{children:r.formatMessage(Wu.completeContentTooltip)})}),children:(0,v.jsx)("rect",{x:"19",y:"3",style:{transform:`rotate(${a}deg)`}})}),(0,v.jsx)("circle",{className:"donut-segment complete-stroke",cx:"21",cy:"21",r:"15.91549430918954",strokeDasharray:`${t} ${100-t}`,strokeDashoffset:c+t}),s>0&&s<100&&(0,v.jsx)("circle",{cx:"21",cy:"21",r:"15.91549430918954",className:"donut-segment divider-stroke",strokeDasharray:"0.3 99.7",strokeDashoffset:.15+c}),t<100&&s>0&&s<100&&s+t===100&&(0,v.jsx)("circle",{cx:"21",cy:"21",r:"15.91549430918954",className:"donut-segment divider-stroke",strokeDasharray:"0.3 99.7",strokeDashoffset:"25.15"})]})};Vu.propTypes={completePercentage:_().number.isRequired,intl:M.gm.isRequired,lockedPercentage:_().number.isRequired};const zu=(0,f.Z)(Vu),Yu=e=>{let{incompletePercentage:t,intl:r}=e;const[s,i]=(0,d.useState)(!1);if(!t)return null;const n=t<100?3.6*t/16:0;return(0,v.jsxs)("g",{className:"donut-segment-group",onBlur:()=>i(!1),onFocus:()=>i(!0),tabIndex:"-1",children:[(0,v.jsx)("circle",{className:"donut-ring incomplete-stroke",cx:"21",cy:"21",r:"15.91549430918954",strokeDasharray:`${t} ${100-t}`,strokeDashoffset:"25"}),(0,v.jsx)(cu.O,{show:s,placement:"top",overlay:(0,v.jsx)(Gu.ZP,{id:"incomplete-tooltip-popover","aria-hidden":"true",children:(0,v.jsx)(Gu.ZP.Content,{children:r.formatMessage(Wu.incompleteContentTooltip)})}),children:(0,v.jsx)("rect",{x:"19",y:"3",style:{transform:`rotate(${n}deg)`}})})]})};Yu.propTypes={incompletePercentage:_().number.isRequired,intl:M.gm.isRequired};const Qu=(0,f.Z)(Yu),Ku=e=>{let{intl:t,lockedPercentage:r}=e;const[s,i]=(0,d.useState)(!1);if(!r)return null;const n=r>8?3.6*r/8:3.6*r/5*2;return(0,v.jsxs)("g",{className:"donut-segment-group",onBlur:()=>i(!1),onFocus:()=>i(!0),tabIndex:"-1",children:[(0,v.jsx)("circle",{className:"donut-segment locked-stroke",cx:"21",cy:"21",r:"15.91549430918954",strokeDasharray:`${r} ${100-r}`,strokeDashoffset:r-75}),(0,v.jsx)(cu.O,{show:s,placement:"top",overlay:(0,v.jsx)(Gu.ZP,{id:"locked-tooltip-popover","aria-hidden":"true",children:(0,v.jsx)(Gu.ZP.Content,{children:t.formatMessage(Wu.lockedContentTooltip)})}),children:(0,v.jsx)("g",{width:"6",height:"21",viewBox:"0 0 21 6",style:{transformOrigin:"center",transform:`rotate(-${n}deg)`},children:(0,v.jsx)("path",{d:"M20 8.00002H17V6.21002C17 3.60002 15.09 1.27002 12.49 1.02002C9.51 0.740018 7 3.08002 7 6.00002V8.00002H4V22H20V8.00002ZM12 17C10.9 17 10 16.1 10 15C10 13.9 10.9 13 12 13C13.1 13 14 13.9 14 15C14 16.1 13.1 17 12 17ZM9 8.00002V6.00002C9 4.34002 10.34 3.00002 12 3.00002C13.66 3.00002 15 4.34002 15 6.00002V8.00002H9Z",fill:r>5?"white":"transparent",style:{transform:`scale(0.18) translate(5.8em, .7em) rotate(${n}deg)`}})})})]})};Ku.propTypes={intl:M.gm.isRequired,lockedPercentage:_().number.isRequired};const Ju=(0,f.Z)(Ku),Xu=e=>{let{intl:t}=e;const{courseId:r}=(0,h.useSelector)((e=>e.courseHome)),{completionSummary:{completeCount:s,incompleteCount:i,lockedCount:n}}=(0,E.tT)("progress",r),o=s+i+n,a=s?Number((s/o*100).toFixed(0)):0,c=n?Number((n/o*100).toFixed(0)):0,l=100-a-c,d=(0,M.t6)((0,M.Kd)());return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("svg",{role:"img",width:"50%",height:"100%",viewBox:"0 0 42 42",className:"donut",style:{maxWidth:"178px"},"aria-hidden":"true",children:[(0,v.jsx)("circle",{className:"donut-hole",fill:"#fff",cx:"21",cy:"21",r:"15.91549430918954"}),(0,v.jsxs)("g",{className:"donut-chart-text",children:[(0,v.jsxs)("text",{x:"50%",y:"50%",className:"donut-chart-number",children:[a,d&&"‏","%"]}),(0,v.jsx)("text",{x:"50%",y:"50%",className:"donut-chart-label",children:t.formatMessage(Wu.donutLabel)})]}),(0,v.jsx)(Qu,{incompletePercentage:l}),(0,v.jsx)(Ju,{lockedPercentage:c}),(0,v.jsx)(zu,{completePercentage:a,lockedPercentage:c})]}),(0,v.jsxs)("div",{className:"sr-only",children:[t.formatMessage(Wu.percentComplete,{percent:a}),t.formatMessage(Wu.percentIncomplete,{percent:l}),c>0&&(0,v.jsx)(v.Fragment,{children:t.formatMessage(Wu.percentLocked,{percent:c})})]})]})};Xu.propTypes={intl:M.gm.isRequired};const ep=(0,f.Z)(Xu),tp=e=>{let{intl:t}=e;return(0,v.jsx)("section",{className:"text-dark-700 mb-4 rounded raised-card p-4",children:(0,v.jsxs)("div",{className:"row w-100 m-0",children:[(0,v.jsxs)("div",{className:"col-12 col-sm-6 col-md-7 p-0",children:[(0,v.jsx)("h2",{children:t.formatMessage(Wu.courseCompletion)}),(0,v.jsx)("p",{className:"small",children:t.formatMessage(Wu.completionBody)})]}),(0,v.jsx)("div",{className:"col-12 col-sm-6 col-md-5 mt-sm-n3 p-0 text-center",children:(0,v.jsx)(ep,{})})]})})};tp.propTypes={intl:M.gm.isRequired};const rp=(0,f.Z)(tp);var sp=r(81434),ip=r(71145);const np=(0,N.vU)({assignmentType:{id:"progress.assignmentType",defaultMessage:"Assignment type",description:"Header for column that indicate type of the assignment in grade summary table"},backToContent:{id:"progress.footnotes.backToContent",defaultMessage:"Back to content",description:"Text for button that redirects to contnet"},courseGradeBody:{id:"progress.courseGrade.body",defaultMessage:"This represents your weighted grade against the grade needed to pass this course.",description:"This text is shown to explain the meaning of the (grade bar) chart"},courseGradeBarAltText:{id:"progress.courseGrade.gradeBar.altText",defaultMessage:"Your current grade is {currentGrade}%. A weighted grade of {passingGrade}% is required to pass in this course.",description:"Alt text for the grade chart bar"},courseGradeFooterGenericPassing:{id:"progress.courseGrade.footer.generic.passing",defaultMessage:"You’re currently passing this course",description:"This shown when learner weighted grade is greater or equal course passing grade"},courseGradeFooterNonPassing:{id:"progress.courseGrade.footer.nonPassing",defaultMessage:"A weighted grade of {passingGrade}% is required to pass in this course",description:"This shown when learner weighted grade is less than course passing grade"},courseGradeFooterPassingWithGrade:{id:"progress.courseGrade.footer.passing",defaultMessage:"You’re currently passing this course with a grade of {letterGrade} ({minGrade}-{maxGrade}%)",description:"This shown when learner weighted grade is greater or equal course passing grade amd course is using letter grade"},courseGradePreviewHeaderLocked:{id:"progress.courseGrade.preview.headerLocked",defaultMessage:"locked feature",description:"This when (progress page) feature is locked, sometimes learner needs to upgrade to get insight about their progress"},courseGradePreviewHeaderLimited:{id:"progress.courseGrade.preview.headerLimited",defaultMessage:"limited feature",description:"This when (progress page) feature is partially locked, it means leaners can see their progress but not get to a certificate"},courseGradePreviewHeaderAriaHidden:{id:"progress.courseGrade.preview.header.ariaHidden",defaultMessage:"Preview of a ",description:"This text precedes either (locked feature) or (limited feature)"},courseGradePreviewUnlockCertificateBody:{id:"progress.courseGrade.preview.body.unlockCertificate",defaultMessage:"Unlock to view grades and work towards a certificate.",description:"Recommending an action for learner when they need to upgrade to view progress and get a certificate"},courseGradePartialPreviewUnlockCertificateBody:{id:"progress.courseGrade.partialpreview.body.unlockCertificate",defaultMessage:"Unlock to work towards a certificate.",description:"Recommending an action for learner when they need to upgrade to get a certificate"},courseGradePreviewUpgradeDeadlinePassedBody:{id:"progress.courseGrade.preview.body.upgradeDeadlinePassed",defaultMessage:"The deadline to upgrade in this course has passed.",description:"Shown when learner no longer can upgrade"},courseGradePreviewUpgradeButton:{id:"progress.courseGrade.preview.button.upgrade",defaultMessage:"Upgrade now",description:"Text for button that redirects to the upgrade page"},courseGradeRangeTooltip:{id:"progress.courseGrade.gradeRange.tooltip",defaultMessage:"Grade ranges for this course:",description:"This shown when course is using (letter grade) to explain e.g. range for A, B, and C...etc"},courseOutline:{id:"progress.courseOutline",defaultMessage:"Course Outline",description:"Anchor text for link that redirects to (course outline) tab"},currentGradeLabel:{id:"progress.courseGrade.label.currentGrade",defaultMessage:"Your current grade",description:"Text label current leaner grade on (grade bar) chart"},detailedGrades:{id:"progress.detailedGrades",defaultMessage:"Detailed grades",description:"Headline for the (detailed grade) section in the progress tab"},detailedGradesEmpty:{id:"progress.detailedGrades.emptyTable",defaultMessage:"You currently have no graded problem scores.",description:"It indicate that there are no problem or assignments to be scored"},footnotesTitle:{id:"progress.footnotes.title",defaultMessage:"Grade summary footnotes",description:"Title for grade summary footnotes, if exists"},grade:{id:"progress.gradeSummary.grade",defaultMessage:"Grade",description:"Headline for (grade column) in grade summary table"},grades:{id:"progress.courseGrade.grades",defaultMessage:"Grades",description:"Headline for grades section in progress tab"},gradesAndCredit:{id:"progress.courseGrade.gradesAndCredit",defaultMessage:"Grades & Credit",description:"Headline for (grades and credit) section in progress tab"},gradeRangeTooltipAlt:{id:"progress.courseGrade.gradeRange.Tooltip",defaultMessage:"Grade range tooltip",description:"Alt text for icon which that triggers (tip box) for grade range"},gradeSummary:{id:"progress.gradeSummary",defaultMessage:"Grade summary",description:"Headline for the (grade summary) section in (grades) section in progress tab"},gradeSummaryLimitedAccessExplanation:{id:"progress.gradeSummary.limitedAccessExplanation",defaultMessage:"You have limited access to graded assignments as part of the audit track in this course.",description:"Text shown when learner has limited access to grade feature"},gradeSummaryTooltipAlt:{id:"progress.gradeSummary.tooltip.alt",defaultMessage:"Grade summary tooltip",description:"Alt text for icon which that triggers (tip box) for grade summary"},gradeSummaryTooltipBody:{id:"progress.gradeSummary.tooltip.body",defaultMessage:"Your course assignment's weight is determined by your instructor. By multiplying your grade by the weight for that assignment type, your weighted grade is calculated. Your weighted grade is what's used to determine if you pass the course.",description:"The content of (tip box) for the grade summary section"},noAccessToAssignmentType:{id:"progress.noAcessToAssignmentType",defaultMessage:"You do not have access to assignments of type {assignmentType}",description:"Its alt text for locked icon which is shown if assignment type in (grade summary table) is locked"},noAccessToSubsection:{id:"progress.noAcessToSubsection",defaultMessage:"You do not have access to subsection {displayName}",description:"Text shown when learner have limited access to grades feature"},passingGradeLabel:{id:"progress.courseGrade.label.passingGrade",defaultMessage:"Passing grade",description:"Label for mark on the (grade bar) chart which indicate the poisition of passing grade on the bar"},problemScoreLabel:{id:"progress.detailedGrades.problemScore.label",defaultMessage:"Problem Scores:",description:"Label text which precedes detailed view of all scores per assignment"},problemScoreToggleAltText:{id:"progress.detailedGrades.problemScore.toggleButton",defaultMessage:"Toggle individual problem scores for {subsectionTitle}",description:"Alt text for button which switches detailed view per module"},sectionGradeOverridden:{id:"progress.detailedGrades.overridden",defaultMessage:"Section grade has been overridden.",description:"This indicate that the graded score has been changed, it can happen if leaner initial assessment was not fair, might be for other reasons as well"},score:{id:"progress.score",defaultMessage:"Score",description:"It indicate how many points the learner have socred scored in particular assignment, or exam"},weight:{id:"progress.weight",defaultMessage:"Weight",description:"It indicate the weight of particular assignment on overall course grade, it is demeterined by course author"},weightedGrade:{id:"progress.weightedGrade",defaultMessage:"Weighted grade",description:"Weighed grade is calculated by (weight %) * (grade score) "},weightedGradeSummary:{id:"progress.weightedGradeSummary",defaultMessage:"Your current weighted grade summary",description:"It the text precede the sum of weighted grades of all the assignment"}}),op=e=>{let{intl:t,iconButtonClassName:r,passingGrade:s}=e;const{courseId:i}=(0,h.useSelector)((e=>e.courseHome)),{gradesFeatureIsFullyLocked:n,gradingPolicy:{gradeRange:o}}=(0,E.tT)("progress",i),[a,c]=(0,d.useState)(!1),l=Object.entries(o).sort(((e,t)=>o[t[0]]-o[e[0]]));return(0,v.jsx)(cu.O,{placement:"top",trigger:"click",show:a,overlay:(0,v.jsx)(Gu.ZP,{children:(0,v.jsxs)(Gu.ZP.Content,{className:"px-3",children:[t.formatMessage(np.courseGradeRangeTooltip),(0,v.jsxs)("ul",{className:"list-unstyled m-0",children:[l.map(((e,t)=>{if(0===t)return(0,v.jsxs)("li",{children:[e[0],": ",(100*e[1]).toFixed(0),"%-100%"]},e[0]);const r=l[t-1];return(0,v.jsxs)("li",{children:[e[0],": ",(100*e[1]).toFixed(0),"%-",(100*r[1]).toFixed(0),"%"]},e[0])})),(0,v.jsxs)("li",{children:["F: ","<",s,"%"]})]})]})}),children:(0,v.jsx)(Fe.Z,{onClick:()=>c(!a),onBlur:()=>c(!1),alt:t.formatMessage(np.gradeRangeTooltipAlt),className:`mb-0 mt-n1 ${r}`,src:ip.Z,iconAs:re.Z,size:"inline",disabled:n})})};op.defaultProps={iconButtonClassName:""},op.propTypes={iconButtonClassName:_().string,intl:M.gm.isRequired,passingGrade:_().number.isRequired};const ap=(0,f.Z)(op),cp=e=>{let{intl:t,passingGrade:r}=e;const{courseId:s}=(0,h.useSelector)((e=>e.courseHome)),{courseGrade:{isPassing:i,letterGrade:n},gradingPolicy:{gradeRange:o}}=(0,E.tT)("progress",s),a=(0,Xr.Z)().width>=es.Z.medium.minWidth,c=Object.keys(o).length>1;let l=t.formatMessage(np.courseGradeFooterNonPassing,{passingGrade:r});if(i)if(c){const e=100*o[n],r=[...Object.values(o).filter((t=>100*t>e))],s=r.length?100*Math.min(...r):100;l=t.formatMessage(np.courseGradeFooterPassingWithGrade,{letterGrade:n,minGrade:e.toFixed(0),maxGrade:s.toFixed(0)})}else l=t.formatMessage(np.courseGradeFooterGenericPassing);const d=i?(0,v.jsx)(re.Z,{src:rs.Z,className:"text-success-300 d-inline-flex align-bottom"}):(0,v.jsx)(re.Z,{src:sp.Z,className:"d-inline-flex align-bottom"});return(0,v.jsxs)("div",{className:"row w-100 m-0 px-4 py-3 py-md-4 rounded-bottom "+(i?"bg-success-100":"bg-warning-100"),children:[(0,v.jsx)("div",{className:"col-auto p-0",children:d}),(0,v.jsxs)("div",{className:"col-11 pl-2 px-0",children:[!a&&(0,v.jsxs)("span",{className:"h5 align-bottom",children:[l,c&&(0,v.jsxs)("span",{style:{whiteSpace:"nowrap"},children:[" ",(0,v.jsx)(ap,{iconButtonClassName:"h4",passingGrade:r})]})]}),a&&(0,v.jsxs)("span",{className:"h4 m-0 align-bottom",children:[l,c&&(0,v.jsxs)("span",{style:{whiteSpace:"nowrap"},children:[" ",(0,v.jsx)(ap,{iconButtonClassName:"h3",passingGrade:r})]})]})]})]})};cp.propTypes={intl:M.gm.isRequired,passingGrade:_().number.isRequired};const lp=(0,f.Z)(cp);function dp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function up(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dp(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const pp=e=>{let{intl:t}=e;const{courseId:r}=(0,h.useSelector)((e=>e.courseHome)),{org:s}=(0,E.tT)("courseHomeMeta",r),{verifiedMode:i,gradesFeatureIsFullyLocked:n}=(0,E.tT)("progress",r),o={org_key:s,courserun_key:r},{administrator:a}=(0,k.IC)();let c;return c=i?n?t.formatMessage(np.courseGradePreviewUnlockCertificateBody):t.formatMessage(np.courseGradePartialPreviewUnlockCertificateBody):t.formatMessage(np.courseGradePreviewUpgradeDeadlinePassedBody),(0,v.jsxs)("div",{className:"row w-100 m-0 p-4 rounded-top bg-primary-500 text-white",children:[(0,v.jsxs)("div",{className:`col-12 ${i?"col-md-9":""} p-0`,children:[(0,v.jsxs)("div",{className:"row w-100 m-0 p-0",children:[(0,v.jsx)("div",{className:"col-1 p-0",children:(0,v.jsx)(re.Z,{src:cl.Z})}),(0,v.jsxs)("div",{className:"col-11 px-2 p-sm-0 h4 text-white",children:[(0,v.jsx)("span",{"aria-hidden":"true",children:t.formatMessage(np.courseGradePreviewHeaderAriaHidden)}),n?t.formatMessage(np.courseGradePreviewHeaderLocked):t.formatMessage(np.courseGradePreviewHeaderLimited)]})]}),(0,v.jsx)("div",{className:"row w-100 m-0 p-0 justify-content-end",children:(0,v.jsx)("div",{className:"col-11 px-2 p-sm-0 small",children:c})})]}),i&&(0,v.jsx)("div",{className:"col-12 col-md-3 mt-3 mt-md-0 p-0 align-self-center text-right",children:(0,v.jsx)(P.ZP,{variant:"brand",size:"sm",href:i.upgradeUrl,onClick:()=>{(0,O.hC)("edx.ui.lms.course_progress.grades_upgrade.clicked",{org_key:s,courserun_key:r,is_staff:a}),(0,O.hC)("edx.bi.ecommerce.upsell_links_clicked",up(up({},o),{},{linkCategory:"(none)",linkName:"progress_locked",linkType:"button",pageName:"progress"}))},children:t.formatMessage(np.courseGradePreviewUpgradeButton)})})]})};pp.propTypes={intl:M.gm.isRequired};const gp=(0,f.Z)(pp),mp=e=>{let{intl:t,tooltipClassName:r}=e;const{courseId:s}=(0,h.useSelector)((e=>e.courseHome)),{courseGrade:{isPassing:i,percent:n}}=(0,E.tT)("progress",s),o=Number((100*n).toFixed(0));let a=o<50?"":"-";const c=(0,M.t6)((0,M.Kd)());return c&&(a=o<50?"-":""),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(cu.O,{show:!0,placement:"top",overlay:(0,v.jsx)(Gu.ZP,{id:(i?"passing":"non-passing")+"-grade-tooltip","aria-hidden":"true",className:r,children:(0,v.jsxs)(Gu.ZP.Content,{"data-testid":"currentGradeTooltipContent",className:i?"text-white":"text-dark-700",children:[o.toFixed(0),c?"‏":"","%"]})}),children:(0,v.jsxs)("g",{children:[(0,v.jsx)("circle",{cx:`${Math.min(c?100-o:o,100)}%`,cy:"50%",r:"8.5",fill:"transparent"}),(0,v.jsx)("rect",{className:"grade-bar__divider",x:`${Math.min(c?100-o:o,100)}%`,style:{transform:"translateY(2.61em)"}})]})}),(0,v.jsx)("text",{className:"x-small",textAnchor:o<50?"start":"end",x:`${Math.min(c?100-o:o,100)}%`,y:"20px",style:{transform:`translateX(${a}3.4em)`},children:t.formatMessage(np.currentGradeLabel)})]})};mp.defaultProps={tooltipClassName:""},mp.propTypes={intl:M.gm.isRequired,tooltipClassName:_().string};const fp=(0,f.Z)(mp),hp=e=>{let{intl:t,passingGrade:r,tooltipClassName:s}=e;const i=(0,M.t6)((0,M.Kd)());let n=r<50?"":"-";return i&&(n=r<50?"-":""),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(cu.O,{show:!0,placement:"bottom",overlay:(0,v.jsx)(Gu.ZP,{id:"minimum-grade-tooltip",className:`bg-primary-500 ${s}`,"aria-hidden":"true",children:(0,v.jsxs)(Gu.ZP.Content,{className:"text-white",children:[r,i&&"‏","%"]})}),children:(0,v.jsxs)("g",{children:[(0,v.jsx)("circle",{cx:`${i?100-r:r}%`,cy:"50%",r:"8.5",fill:"transparent"}),(0,v.jsx)("circle",{className:"grade-bar--passing",cx:`${i?100-r:r}%`,cy:"50%",r:"4.5"})]})}),(0,v.jsx)("text",{className:"x-small",textAnchor:r<50?"start":"end",x:`${i?100-r:r}%`,y:"90px",style:{transform:`translateX(${n}3.4em)`},children:t.formatMessage(np.passingGradeLabel)})]})};hp.defaultProps={tooltipClassName:""},hp.propTypes={intl:M.gm.isRequired,passingGrade:_().number.isRequired,tooltipClassName:_().string};const bp=(0,f.Z)(hp),yp=e=>{let{intl:t,passingGrade:r}=e;const{courseId:s}=(0,h.useSelector)((e=>e.courseHome)),{courseGrade:{isPassing:i,percent:n},gradesFeatureIsFullyLocked:o}=(0,E.tT)("progress",s),a=Number((100*n).toFixed(0)),c=o?"locked-overlay":"",l=e=>(0,M.t6)((0,M.Kd)())?{transform:`translateX(${100-e}%)`}:{};return(0,v.jsxs)("div",{className:"col-12 col-sm-6 align-self-center p-0",children:[(0,v.jsx)("div",{className:"sr-only",children:t.formatMessage(np.courseGradeBarAltText,{currentGrade:a,passingGrade:r})}),(0,v.jsxs)("svg",{width:"100%",height:"100px",className:"grade-bar","aria-hidden":"true",children:[(0,v.jsxs)("g",{style:{transform:"translateY(2.61em)"},children:[(0,v.jsx)("rect",{className:"grade-bar__base",width:"100%"}),(0,v.jsx)("rect",{className:"grade-bar--passing",width:`${r}%`,style:l(r)}),(0,v.jsx)("rect",{className:"grade-bar--current-"+(i?"passing":"non-passing"),width:`${a}%`,style:l(a)}),(0,v.jsx)("rect",{className:"grade-bar__divider"}),(0,v.jsx)("rect",{className:"grade-bar__divider",x:"99.7%"})]}),(0,v.jsx)(bp,{passingGrade:r,tooltipClassName:c}),(0,v.jsx)(fp,{tooltipClassName:c})]})]})};yp.propTypes={intl:M.gm.isRequired,passingGrade:_().number.isRequired};const xp=(0,f.Z)(yp);var vp=r(75994);const jp=(0,N.vU)({completed:{id:"progress.creditInformation.completed",defaultMessage:"Completed",description:"Label text if a requirement for (course credit) is satisfied"},courseCredit:{id:"progress.creditInformation.courseCredit",defaultMessage:"course credit",description:"Anchor text for link that redirects (course credit) help page"},minimumGrade:{id:"progress.creditInformation.minimumGrade",defaultMessage:"Minimum grade for credit ({minGrade}%)"},requirementsHeader:{id:"progress.creditInformation.requirementsHeader",defaultMessage:"Requirements for course credit",description:"Header for the requirements section in course credit"},upcoming:{id:"progress.creditInformation.upcoming",defaultMessage:"Upcoming",description:"It indicate that the a (credit requirement) status is not known yet"},verificationFailed:{id:"progress.creditInformation.verificationFailed",defaultMessage:"Verification failed",description:"It indicate that the learner submitted a requirement but is either failed or declined"},verificationSubmitted:{id:"progress.creditInformation.verificationSubmitted",defaultMessage:"Verification submitted",description:"It indicate that the learner submitted a requirement but is not graded or reviewed yet"}}),wp=e=>{let{intl:t}=e;const{courseId:r}=(0,h.useSelector)((e=>e.courseHome)),{creditCourseRequirements:s}=(0,E.tT)("progress",r);if(!s)return null;let i,o;const a=[],c=(0,v.jsx)(Ls,{}),l=(0,v.jsx)(ts.ZP,{variant:"muted",isInline:!0,destination:(0,n.getConfig)().CREDIT_HELP_LINK_URL,children:t.formatMessage(jp.courseCredit)});switch(s.eligibilityStatus){case"not_eligible":i=(0,v.jsx)(Ke.Z,{id:"progress.creditInformation.creditNotEligible",defaultMessage:"You are no longer eligible for credit in this course. Learn more about {creditLink}.",description:"Message to learner who are not eligible for course credit, it can because the a requirement deadline have passed",values:{creditLink:l}});break;case"eligible":i=(0,v.jsx)(Ke.Z,{id:"progress.creditInformation.creditEligible",defaultMessage:" You have met the requirements for credit in this course. Go to your {dashboardLink} to purchase course credit. Or learn more about {creditLink}.",description:"After the credit requirements are met, leaners can then do the last step which purchasing the credit. Note that is only doable for leaners after they met all the requirements",values:{dashboardLink:c,creditLink:l}});break;case"partial_eligible":i=(0,v.jsx)(Ke.Z,{id:"progress.creditInformation.creditPartialEligible",defaultMessage:"You have not yet met the requirements for credit. Learn more about {creditLink}.",description:"This means that one or more requirements is not satisfied yet",values:{creditLink:l}})}return s.requirements.forEach((e=>{switch(e.status){case"submitted":o=(0,v.jsxs)(v.Fragment,{children:[t.formatMessage(jp.verificationSubmitted)," ",(0,v.jsx)(re.Z,{src:rs.Z,className:"text-success-500 d-inline-flex align-bottom"})]});break;case"failed":case"declined":o=(0,v.jsxs)(v.Fragment,{children:[t.formatMessage(jp.verificationFailed)," ",(0,v.jsx)(re.Z,{src:sp.Z,className:"d-inline-flex align-bottom"})]});break;case"satisfied":o=(0,v.jsxs)(v.Fragment,{children:[t.formatMessage(jp.completed)," ",(0,v.jsx)(re.Z,{src:rs.Z,className:"text-success-500 d-inline-flex align-bottom"})]});break;default:o=(0,v.jsxs)(v.Fragment,{children:[t.formatMessage(jp.upcoming)," ",(0,v.jsx)(re.Z,{src:vp.Z,className:"text-gray-500 d-inline-flex align-bottom"})]})}a.push((0,v.jsxs)("div",{className:"row w-100 m-0 small",children:[(0,v.jsx)("p",{className:"font-weight-bold",children:"grade"===e.namespace?`${t.formatMessage(jp.minimumGrade,{minGrade:100*Number(e.criteria.minGrade)})}:`:`${e.displayName}:`}),(0,v.jsx)("div",{className:"ml-1",children:o})]},`requirement-${e.order}`))})),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("h3",{className:"h4 col-12 p-0",children:t.formatMessage(jp.requirementsHeader)}),(0,v.jsx)("p",{className:"small",children:i}),a]})};wp.propTypes={intl:M.gm.isRequired};const Sp=(0,f.Z)(wp),Op=e=>{let{intl:t}=e;const{courseId:r}=(0,h.useSelector)((e=>e.courseHome)),{creditCourseRequirements:s,gradesFeatureIsFullyLocked:i,gradesFeatureIsPartiallyLocked:n,gradingPolicy:{gradeRange:o}}=(0,E.tT)("progress",r),a=Number((100*Math.min(...Object.values(o))).toFixed(0)),c=i?"locked-overlay":"";return(0,v.jsxs)("section",{className:"text-dark-700 my-4 rounded raised-card",children:[(i||n)&&(0,v.jsx)(gp,{}),(0,v.jsxs)("div",{className:c,"aria-hidden":i,children:[(0,v.jsxs)("div",{className:"row w-100 m-0 p-4",children:[(0,v.jsxs)("div",{className:"col-12 col-sm-6 p-0 pr-sm-5.5",children:[(0,v.jsx)("h2",{children:s?t.formatMessage(np.gradesAndCredit):t.formatMessage(np.grades)}),(0,v.jsx)("p",{className:"small",children:t.formatMessage(np.courseGradeBody)})]}),(0,v.jsx)(xp,{passingGrade:a})]}),(0,v.jsx)("div",{className:"row w-100 m-0 px-4",children:(0,v.jsx)(Sp,{})}),(0,v.jsx)(lp,{passingGrade:a})]})]})};Op.propTypes={intl:M.gm.isRequired};const kp=(0,f.Z)(Op);var Mp=r(38201),Pp=r(75323),Cp=r(29508);const Tp=e=>{let{intl:t,problemScores:r,subsection:s}=e;const i=(0,M.t6)((0,M.Kd)());return(0,v.jsxs)("span",{className:"row w-100 m-0 x-small ml-4 pt-2 pl-1 text-gray-700 flex-nowrap",children:[(0,v.jsx)("span",{id:"problem-score-label",className:"col-auto p-0",children:t.formatMessage(np.problemScoreLabel)}),(0,v.jsx)("div",{className:ge()("col","p-0",{"greyed-out":!s.learnerHasAccess}),children:(0,v.jsx)("ul",{className:"list-unstyled row w-100 m-0","aria-labelledby":"problem-score-label",children:r.map(((e,t)=>(0,v.jsxs)("li",{className:"ml-3",children:[e.earned,i?"\\":"/",e.possible]},t)))})})]})};Tp.propTypes={intl:M.gm.isRequired,problemScores:_().arrayOf(_().shape({earned:_().number.isRequired,possible:_().number.isRequired})).isRequired,subsection:_().shape({learnerHasAccess:_().bool}).isRequired};const Np=(0,f.Z)(Tp),Ip=e=>{let{intl:t,subsection:r}=e;const{courseId:s}=(0,h.useSelector)((e=>e.courseHome)),{org:i}=(0,E.tT)("courseHomeMeta",s),{gradesFeatureIsFullyLocked:n}=(0,E.tT)("progress",s),{blockKey:o,displayName:a,problemScores:c,url:l}=r,{administrator:d}=(0,k.IC)();return(0,v.jsxs)($e.Z.Advanced,{children:[(0,v.jsxs)(dt.Z,{className:"w-100 m-0",children:[(0,v.jsxs)($e.Z.Trigger,{className:"mr-1 position-absolute","aria-label":t.formatMessage(np.problemScoreToggleAltText,{subsectionTitle:a}),tabIndex:n?"-1":"0",children:[(0,v.jsx)($e.Z.Visible,{whenClosed:!0,children:(0,v.jsx)(re.Z,{src:Pp.Z})}),(0,v.jsx)($e.Z.Visible,{whenOpen:!0,children:(0,v.jsx)(re.Z,{src:Cp.Z})})]}),(0,v.jsxs)("span",{className:"small d-inline ml-4 pl-1",children:[n||r.learnerHasAccess?"":(0,v.jsx)(re.Z,{id:`detailedGradesBlockedIcon${r.blockKey}`,"aria-label":t.formatMessage(np.noAccessToSubsection,{displayName:a}),className:"mr-1 mt-1 d-inline-flex",style:{height:"1rem",width:"1rem"},src:Mp.Z,"data-testid":"blocked-icon"}),l?(0,v.jsx)("a",{href:l,className:"muted-link small",onClick:()=>{(0,O.hC)("edx.ui.lms.course_progress.detailed_grades_assignment.clicked",{org_key:i,courserun_key:s,is_staff:d,assignment_block_key:o})},tabIndex:n?"-1":"0","aria-labelledby":`detailedGradesBlockedIcon${r.blockKey}`,children:a}):(0,v.jsx)("span",{className:"greyed-out small",children:a})]})]}),(0,v.jsx)($e.Z.Body,{className:"d-flex w-100",children:(0,v.jsxs)("div",{className:"col",children:[r.override&&(0,v.jsxs)("div",{className:"row w-100 m-0 x-small ml-4 pt-2 pl-1 text-gray-700 flex-nowrap",children:[(0,v.jsx)("div",{children:(0,v.jsx)(re.Z,{src:Ga.Z,className:"x-small mr-1 text-primary-500",style:{height:"1.3em",width:"1.3em"}})}),(0,v.jsx)("div",{children:t.formatMessage(np.sectionGradeOverridden)})]}),(0,v.jsx)(Np,{problemScores:c,subsection:r})]})})]})};Ip.propTypes={intl:M.gm.isRequired,subsection:_().shape({blockKey:_().string.isRequired,displayName:_().string.isRequired,learnerHasAccess:_().bool.isRequired,override:_().shape({system:_().string,reason:_().string}),problemScores:_().arrayOf(_().shape({earned:_().number.isRequired,possible:_().number.isRequired})).isRequired,url:_().string}).isRequired};const _p=(0,f.Z)(Ip),Ep=e=>{let{intl:t}=e;const{courseId:r}=(0,h.useSelector)((e=>e.courseHome)),{sectionScores:s}=(0,E.tT)("progress",r),i=(0,M.t6)((0,M.Kd)());return s.map((e=>{const r=e.subsections.filter((e=>!!(e.hasGradedAssignment&&e.showGrades&&(e.numPointsPossible>0||e.numPointsEarned>0))));if(0===r.length)return null;const s=r.map((e=>({subsectionTitle:(0,v.jsx)(_p,{subsection:e}),score:(0,v.jsxs)("span",{className:e.learnerHasAccess?"":"greyed-out",children:[e.numPointsEarned,i?"\\":"/",e.numPointsPossible]})})));return(0,v.jsx)("div",{className:"my-3",children:(0,v.jsx)(Hs.Z,{data:s,itemCount:s.length,columns:[{Header:e.displayName,accessor:"subsectionTitle",headerClassName:"h5 mb-0",cellClassName:"mw-100"},{Header:`${t.formatMessage(np.score)}`,accessor:"score",headerClassName:"justify-content-end h5 mb-0",cellClassName:"align-top text-right small"}],children:(0,v.jsx)(Hs.Z.Table,{})})},`${e.displayName}-grades-table`)}))};Ep.propTypes={intl:M.gm.isRequired};const qp=(0,f.Z)(Ep),Rp=e=>{let{intl:t}=e;const{administrator:r}=(0,k.IC)(),{courseId:s}=(0,h.useSelector)((e=>e.courseHome)),{org:i,tabs:n}=(0,E.tT)("courseHomeMeta",s),{gradesFeatureIsFullyLocked:o,gradesFeatureIsPartiallyLocked:a,sectionScores:c}=(0,E.tT)("progress",s),l=c.length>0,d=n.find((e=>"outline"===e.slug)),u=d&&d.url,p=u&&(0,v.jsx)(ts.ZP,{variant:"muted",isInline:!0,destination:u,onClick:()=>{(0,O.hC)("edx.ui.lms.course_progress.detailed_grades.course_outline_link.clicked",{org_key:i,courserun_key:s,is_staff:r})},tabIndex:o?"-1":"0",children:t.formatMessage(np.courseOutline)});return(0,v.jsxs)("section",{className:"text-dark-700",children:[(0,v.jsx)("h3",{className:"h4 mb-3",children:t.formatMessage(np.detailedGrades)}),a&&(0,v.jsxs)("div",{className:"mb-3 small ml-0 d-inline",children:[(0,v.jsx)(re.Z,{className:"mr-1 mt-1 d-inline-flex",style:{height:"1rem",width:"1rem"},src:Mp.Z,"data-testid":"blocked-icon"}),t.formatMessage(np.gradeSummaryLimitedAccessExplanation)]}),l&&(0,v.jsx)(qp,{}),!l&&(0,v.jsx)("p",{className:"small",children:t.formatMessage(np.detailedGradesEmpty)}),u&&(0,v.jsx)("p",{className:"x-small m-0",children:(0,v.jsx)(Ke.Z,{id:"progress.ungradedAlert",defaultMessage:"For progress on ungraded aspects of the course, view your {outlineLink}.",description:"Text that precede link that redirect to course outline page",values:{outlineLink:p}})})]})};Rp.propTypes={intl:M.gm.isRequired};const Zp=(0,f.Z)(Rp),Dp=e=>{let{intl:t,allOfSomeAssignmentTypeIsLocked:r}=e;const{courseId:s}=(0,h.useSelector)((e=>e.courseHome)),{gradesFeatureIsFullyLocked:i}=(0,E.tT)("progress",s),[n,o]=(0,d.useState)(!1);return(0,v.jsxs)("div",{className:"row w-100 m-0 align-items-center",children:[(0,v.jsx)("h3",{className:"h4 mb-3 mr-1",children:t.formatMessage(np.gradeSummary)}),(0,v.jsx)(cu.O,{trigger:"click",placement:"top",show:n,overlay:(0,v.jsx)(Gu.ZP,{children:(0,v.jsx)(Gu.ZP.Content,{className:"small text-dark-700",children:t.formatMessage(np.gradeSummaryTooltipBody)})}),children:(0,v.jsx)(Fe.Z,{onClick:()=>{o(!n)},onBlur:()=>{o(!1)},alt:t.formatMessage(np.gradeSummaryTooltipAlt),src:ip.Z,iconAs:re.Z,className:"mb-3",size:"sm",disabled:i})}),!i&&r&&(0,v.jsxs)("div",{className:"mb-3 small ml-0 d-inline",children:[(0,v.jsx)(re.Z,{className:"mr-1 mt-1 d-inline-flex",style:{height:"1rem",width:"1rem"},src:Mp.Z,"data-testid":"blocked-icon"}),t.formatMessage(np.gradeSummaryLimitedAccessExplanation)]})]})};Dp.propTypes={intl:M.gm.isRequired,allOfSomeAssignmentTypeIsLocked:_().bool.isRequired};const Ap=(0,f.Z)(Dp),Lp=e=>{let{intl:t,assignmentType:r,footnoteMarker:s,footnoteId:i,locked:n}=e;const{courseId:o}=(0,h.useSelector)((e=>e.courseHome)),{gradesFeatureIsFullyLocked:a}=(0,E.tT)("progress",o),c=n?(0,v.jsx)(re.Z,{id:`assignmentTypeBlockedIcon${r}`,"aria-label":t.formatMessage(np.noAccessToAssignmentType,{assignmentType:r}),className:"mr-1 mt-1 d-inline-flex",style:{height:"1rem",width:"1rem"},src:Mp.Z,"data-testid":"blocked-icon"}):"";return(0,v.jsxs)("div",{className:"d-flex small",children:[(0,v.jsx)("div",{className:"d-flex",children:c}),(0,v.jsxs)("div",{children:[r," ",i&&s&&(0,v.jsx)("sup",{children:(0,v.jsx)("a",{id:`${i}-ref`,className:"muted-link",href:`#${i}-footnote`,"aria-describedby":"grade-summary-footnote-label",tabIndex:a?"-1":"0","aria-labelledby":`assignmentTypeBlockedIcon${r}`,children:s})})]})]})};Lp.propTypes={intl:M.gm.isRequired,assignmentType:_().string.isRequired,footnoteId:_().string,footnoteMarker:_().number,locked:_().bool},Lp.defaultProps={footnoteId:"",footnoteMarker:null,locked:!1};const Bp=(0,f.Z)(Lp),Up=e=>{let{footnotes:t,intl:r}=e;const{courseId:s}=(0,h.useSelector)((e=>e.courseHome)),{gradesFeatureIsFullyLocked:i}=(0,E.tT)("progress",s);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("span",{id:"grade-summary-footnote-label",className:"sr-only",children:r.formatMessage(np.footnotesTitle)}),(0,v.jsx)("ul",{className:"list-unstyled mt-2",children:t.map(((e,t)=>(0,v.jsxs)("li",{id:`${e.id}-footnote`,className:"x-small mt-1",children:[(0,v.jsx)("sup",{children:t+1}),(0,v.jsx)(Ke.Z,{id:"progress.footnotes.droppableAssignments",defaultMessage:"The lowest {numDroppable, plural, one{# {assignmentType} score is} other{# {assignmentType} scores are}} dropped.",values:{numDroppable:e.numDroppable,assignmentType:e.assignmentType}}),(0,v.jsx)("a",{className:"sr-only",href:`#${e.id}-ref`,tabIndex:i?"-1":"0",children:r.formatMessage(np.backToContent)})]},e.id)))})]})};Up.propTypes={footnotes:_().arrayOf(_().shape({assignmentType:_().string.isRequired,id:_().string.isRequired,numDroppable:_().number.isRequired})).isRequired,intl:M.gm.isRequired};const Hp=(0,f.Z)(Up),$p=e=>{let{intl:t}=e;const{courseId:r}=(0,h.useSelector)((e=>e.courseHome)),{courseGrade:{isPassing:s,percent:i}}=(0,E.tT)("progress",r),n=s?"bg-success-100":"bg-warning-100",o=(100*i).toFixed(0),a=(0,M.t6)((0,M.Kd)());return(0,v.jsx)(Hs.Z.TableFooter,{className:`border-top border-primary ${n}`,children:(0,v.jsxs)("div",{className:"row w-100 m-0",children:[(0,v.jsx)("div",{id:"weighted-grade-summary",className:"col-8 p-0 small",children:t.formatMessage(np.weightedGradeSummary)}),(0,v.jsxs)("div",{"data-testid":"gradeSummaryFooterTotalWeightedGrade","aria-labelledby":"weighted-grade-summary",className:"col-4 p-0 text-right font-weight-bold small",children:[o,a&&"‏","%"]})]})})};$p.propTypes={intl:M.gm.isRequired};const Fp=(0,f.Z)($p),Gp=e=>{let{intl:t,setAllOfSomeAssignmentTypeIsLocked:r}=e;const{courseId:s}=(0,h.useSelector)((e=>e.courseHome)),{gradingPolicy:{assignmentPolicies:i},gradesFeatureIsFullyLocked:n,sectionScores:o}=(0,E.tT)("progress",s),a=[],c=i.map((e=>{let t,s="";e.numDroppable>0&&(s=(e=>(e.shortLabel?e.shortLabel:e.type).replace(/[^A-Za-z0-9.-_]+/g,"-"))(e),a.push({id:s,numDroppable:e.numDroppable,assignmentType:e.type}),t=a.length);const i=!n&&(e=>{const t=o.map((t=>t.subsections.filter((t=>t.assignmentType===e&&t.hasGradedAssignment&&(t.numPointsPossible>0||t.numPointsEarned>0))))).flat();return!(!t.length||t.some((e=>!0===e.learnerHasAccess)))&&(r(!0),!0)})(e.type),c=(0,M.t6)((0,M.Kd)());return{type:{footnoteId:s,footnoteMarker:t,type:e.type,locked:i},weight:{weight:`${(100*e.weight).toFixed(0)}${c?"‏":""}%`,locked:i},grade:{grade:`${(100*e.averageGrade).toFixed(0)}${c?"‏":""}%`,locked:i},weightedGrade:{weightedGrade:`${(100*e.weightedGrade).toFixed(0)}${c?"‏":""}%`,locked:i}}})),l=(e,t)=>(0,v.jsx)("span",{className:e?"greyed-out":"",children:t});return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(Hs.Z,{data:c,itemCount:c.length,columns:[{Header:`${t.formatMessage(np.assignmentType)}`,accessor:"type",Cell:e=>{let{value:t}=e;return(e=>(0,v.jsx)(Bp,{assignmentType:e.type,footnoteId:e.footnoteId,footnoteMarker:e.footnoteMarker,locked:e.locked}))(t)},headerClassName:"h5 mb-0"},{Header:`${t.formatMessage(np.weight)}`,accessor:"weight",headerClassName:"justify-content-end h5 mb-0",Cell:e=>{let{value:t}=e;return l(t.locked,t.weight)},cellClassName:"text-right small"},{Header:`${t.formatMessage(np.grade)}`,accessor:"grade",headerClassName:"justify-content-end h5 mb-0",Cell:e=>{let{value:t}=e;return l(t.locked,t.grade)},cellClassName:"text-right small"},{Header:`${t.formatMessage(np.weightedGrade)}`,accessor:"weightedGrade",headerClassName:"justify-content-end h5 mb-0 text-right",Cell:e=>{let{value:t}=e;return l(t.locked,t.weightedGrade)},cellClassName:"text-right font-weight-bold small"}],children:[(0,v.jsx)(Hs.Z.Table,{}),(0,v.jsx)(Fp,{})]}),a&&(0,v.jsx)(Hp,{footnotes:a})]})};Gp.propTypes={intl:M.gm.isRequired,setAllOfSomeAssignmentTypeIsLocked:_().func.isRequired};const Wp=(0,f.Z)(Gp),Vp=()=>{const{courseId:e}=(0,h.useSelector)((e=>e.courseHome)),{gradingPolicy:{assignmentPolicies:t}}=(0,E.tT)("progress",e),[r,s]=(0,d.useState)(!1);return 0===t.length?null:(0,v.jsxs)("section",{className:"text-dark-700 mb-4",children:[(0,v.jsx)(Ap,{allOfSomeAssignmentTypeIsLocked:r}),(0,v.jsx)(Wp,{setAllOfSomeAssignmentTypeIsLocked:s})]})},zp=(0,N.vU)({progressHeader:{id:"progress.header",defaultMessage:"Your progress",description:"Headline or title for the progress tab"},progressHeaderForTargetUser:{id:"progress.header.targetUser",defaultMessage:"Course progress for {username}",description:"Header when displaying the progress for a different user"},studioLink:{id:"progress.link.studio",defaultMessage:"View grading in Studio",description:"Text shown for button that redirects to the studio if the user is a staff memember"}}),Yp=e=>{let{intl:t}=e;const{courseId:r,targetUserId:s}=(0,h.useSelector)((e=>e.courseHome)),{administrator:i,userId:n}=(0,k.IC)(),{studioUrl:o,username:a}=(0,E.tT)("progress",r),c=s&&s!==n?t.formatMessage(zp.progressHeaderForTargetUser,{username:a}):t.formatMessage(zp.progressHeader);return(0,v.jsxs)("div",{className:"row w-100 m-0 mt-3 mb-4 justify-content-between",children:[(0,v.jsx)("h1",{children:c}),i&&o&&(0,v.jsx)(P.ZP,{variant:"outline-primary",size:"sm",className:"align-self-center",href:o,children:t.formatMessage(zp.studioLink)})]})};Yp.propTypes={intl:M.gm.isRequired};const Qp=(0,f.Z)(Yp),Kp=(0,N.vU)({datesCardDescription:{id:"progress.relatedLinks.datesCard.description",defaultMessage:"A schedule view of your course due dates and upcoming assignments.",description:"It explain the content of the dates tab"},datesCardLink:{id:"progress.relatedLinks.datesCard.link",defaultMessage:"Dates",description:"Anchor text for link that redirects to dates tab"},outlineCardDescription:{id:"progress.relatedLinks.outlineCard.description",defaultMessage:"A birds-eye view of your course content.",description:"It explain the content of the course outline tab"},outlineCardLink:{id:"progress.relatedLinks.outlineCard.link",defaultMessage:"Course Outline",description:"Anchor text for link that redirects to course outline tab"},relatedLinks:{id:"progress.relatedLinks",defaultMessage:"Related links",description:"Headline for (related links) section in progress tab"}}),Jp=e=>{let{intl:t}=e;const{courseId:r}=(0,h.useSelector)((e=>e.courseHome)),{org:s,tabs:i}=(0,E.tT)("courseHomeMeta",r),{administrator:n}=(0,k.IC)(),o=e=>{(0,O.hC)("edx.ui.lms.course_progress.related_links.clicked",{org_key:s,courserun_key:r,is_staff:n,link_clicked:e})},a=i.find((e=>"outline"===e.slug)),c=a&&a.url,l=i.find((e=>"dates"===e.slug)),d=l&&l.url;return(0,v.jsxs)("section",{className:"mb-4 x-small",children:[(0,v.jsx)("h3",{className:"h4",children:t.formatMessage(Kp.relatedLinks)}),(0,v.jsxs)("ul",{className:"pl-4",children:[d&&(0,v.jsxs)("li",{children:[(0,v.jsx)(ts.ZP,{destination:d,onClick:()=>o("dates"),children:t.formatMessage(Kp.datesCardLink)}),(0,v.jsx)("p",{children:t.formatMessage(Kp.datesCardDescription)})]}),c&&(0,v.jsxs)("li",{children:[(0,v.jsx)(ts.ZP,{destination:c,onClick:()=>o("course_outline"),children:t.formatMessage(Kp.outlineCardLink)}),(0,v.jsx)("p",{children:t.formatMessage(Kp.outlineCardDescription)})]})]})]})};Jp.propTypes={intl:M.gm.isRequired};const Xp=(0,f.Z)(Jp),eg=()=>{const{courseId:e}=(0,h.useSelector)((e=>e.courseHome)),{gradesFeatureIsFullyLocked:t,disableProgressGraph:r}=(0,E.tT)("progress",e),s=t?"locked-overlay":"",i=(0,Xr.Z)().width;if(void 0===i)return null;const n=i>=es.Z.large.minWidth;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(Qp,{}),(0,v.jsxs)("div",{className:"row w-100 m-0",children:[(0,v.jsxs)("div",{className:"col-12 col-md-8 p-0",children:[!r&&(0,v.jsx)(rp,{}),!n&&(0,v.jsx)(Fu,{}),(0,v.jsx)(kp,{}),(0,v.jsxs)("div",{className:`grades my-4 p-4 rounded raised-card ${s}`,"aria-hidden":t,children:[(0,v.jsx)(Vp,{}),(0,v.jsx)(Zp,{})]})]}),(0,v.jsxs)("div",{className:"col-12 col-md-4 p-0 px-md-4",children:[n&&(0,v.jsx)(Fu,{}),(0,v.jsx)(Xp,{})]})]})]})},tg=e=>{let{children:t}=e;const[r,s]=(0,d.useState)();return(0,d.useEffect)((()=>{!async function(){if((0,n.getConfig)().ENABLE_NOTICES){const e=await(async()=>{const e=(0,k.IC)(),t=new URL(`${(0,n.getConfig)().LMS_BASE_URL}/notices/api/v1/unacknowledged`);if(e)try{const{data:e}=await(0,k.kj)().get(t.href,{});return e}catch(e){const{customAttributes:{httpErrorStatus:t}}=e;404===t?(0,xr.PN)(`${e}. This probably happened because the notices plugin is not installed on platform.`):(0,xr.H)(e)}return null})();if(e&&e.results&&e.results.length>0){const{results:t}=e;s(!0),window.location.replace(`${t[0]}?next=${window.location.href}`)}}}()}),[]),(0,v.jsx)("div",{children:!0===r?null:t})};tg.propTypes={children:_().node.isRequired};const rg=tg;function sg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function ig(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sg(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sg(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const ng=e=>{let{children:t}=e;const r=(0,p.TH)();if(r.pathname.includes(" ")||r.pathname.includes("%20")){const e=ig(ig({},r),{},{pathname:r.pathname.replaceAll(" ","+").replaceAll("%20","+")});return(0,O.hC)("edx.ui.lms.path_fixed",{new_path:e.pathname,old_path:r.pathname,referrer:document.referrer,search:r.search}),(0,v.jsx)(p.Fg,{to:e,replace:!0})}return t};ng.propTypes={children:_().node.isRequired};const og=ng,ag=()=>{const{courseId:e}=(0,h.useSelector)((e=>e.courseHome)),t=(0,h.useSelector)((e=>e.models.live));return(0,d.useEffect)((()=>{const e=document.getElementById("lti-tab-embed");e&&(e.className+=" vh-100 w-100 border-0")}),[]),(0,v.jsx)("div",{id:"live_tab",dangerouslySetInnerHTML:{__html:t[e]?.iframe}})},cg=d.lazy((()=>r.e(901).then(r.bind(r,1901))));function lg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function dg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lg(Object(r),!0).forEach((function(t){var s,i,n,o;s=e,i=t,n=r[t],(i="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i))?o:o+"")in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lg(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const ug=e=>{let{intl:t}=e;const{courseId:r}=(0,p.UO)(),s=(0,h.useDispatch)(),i=function(e){const{courseAccess:t}=(0,E.tT)("courseHomeMeta",e),r=t&&!t.hasAccess&&"incorrect_active_enterprise"===t.errorCode,s=(0,d.useMemo)((()=>({text:t&&t.userMessage,courseId:e})),[t,e]);return(0,S.VY)(r,{code:"clientActiveEnterpriseAlert",topic:"outline",dismissible:!1,type:S.CH.ERROR,payload:s}),{clientActiveEnterpriseAlert:cg}}(r);(0,d.useEffect)((()=>{s((0,m.xg)(r))}),[r]);const{courseStatus:n}=(0,h.useSelector)((e=>e.courseHome));return n===ye.br?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(Si.wg,{}),(0,v.jsx)(ti,{srMessage:t.formatMessage(Oi.loading)}),(0,v.jsx)(ji.ZP,{})]}):n===ye.tE?(0,v.jsx)(p.Fg,{to:`/redirect/home/${r}`,replace:!0}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(Si.wg,{}),(0,v.jsx)("main",{id:"main-content",className:"container my-5 text-center","data-testid":"access-denied-main",children:(0,v.jsx)(S.UW,{topic:"outline",className:"mx-5 mt-3",customAlerts:dg({},i)})}),(0,v.jsx)(ji.ZP,{})]})};ug.propTypes={intl:M.gm.isRequired};const pg=(0,f.Z)(ug);(0,s.Ld)(i.Hm,(()=>{u.render((0,v.jsxs)(a.Z,{store:(0,Ce.configureStore)({reducer:{models:E.I6,courseware:Lr,courseHome:ye.I6,learningAssistant:Wl.I6,specialExams:vi.I6,recommendations:Ks,tours:Re,plugins:Tc},middleware:e=>e({serializableCheck:{ignoredActions:["plugin/registerOverrideMethod"],ignoredPaths:["plugins"]}})}),children:[(0,v.jsx)(g.q,{children:(0,v.jsx)("link",{rel:"shortcut icon",href:(0,n.getConfig)().FAVICON_URL,type:"image/x-icon"})}),(0,v.jsx)(og,{children:(0,v.jsx)(rg,{children:(0,v.jsx)(S.Dl,{children:(0,v.jsxs)(p.Z5,{children:[(0,v.jsx)(p.AW,{path:"/goal-unsubscribe/:token",element:(0,v.jsx)(c.Z,{children:(0,v.jsx)(Lu,{})})}),(0,v.jsx)(p.AW,{path:"/redirect/*",element:(0,v.jsx)(c.Z,{children:(0,v.jsx)(ou,{})})}),(0,v.jsx)(p.AW,{path:Vl.ACCESS_DENIED,element:(0,v.jsx)(su,{children:(0,v.jsx)(pg,{})})}),(0,v.jsx)(p.AW,{path:Vl.HOME,element:(0,v.jsx)(su,{children:(0,v.jsx)(Do,{tab:"outline",fetch:m.BN,slice:"courseHome",children:(0,v.jsx)(Kr,{})})})}),(0,v.jsx)(p.AW,{path:Vl.LIVE,element:(0,v.jsx)(su,{children:(0,v.jsx)(Do,{tab:"lti_live",fetch:m.Yq,slice:"courseHome",children:(0,v.jsx)(ag,{})})})}),(0,v.jsx)(p.AW,{path:Vl.DATES,element:(0,v.jsx)(su,{children:(0,v.jsx)(Do,{tab:"dates",fetch:m.zP,slice:"courseHome",children:(0,v.jsx)(Tu,{})})})}),(0,v.jsx)(p.AW,{path:Vl.DISCUSSION,element:(0,v.jsx)(su,{children:(0,v.jsx)(Do,{tab:"discussion",fetch:m.xg,slice:"courseHome",children:(0,v.jsx)(w,{})})})}),Vl.PROGRESS.map((e=>(0,v.jsx)(p.AW,{path:e,element:(0,v.jsx)(su,{children:(0,v.jsx)(Do,{tab:"progress",fetch:m.Xe,slice:"courseHome",isProgressTab:!0,children:(0,v.jsx)(eg,{})})})},e))),(0,v.jsx)(p.AW,{path:Vl.COURSE_END,element:(0,v.jsx)(su,{children:(0,v.jsx)(Do,{tab:"courseware",fetch:Hr,slice:"courseware",children:(0,v.jsx)(bi,{})})})}),Vl.COURSEWARE.map((e=>(0,v.jsx)(p.AW,{path:e,element:(0,v.jsx)(su,{children:(0,v.jsx)(Jd,{})})},e)))]})})})})]}),document.getElementById("root"))})),(0,s.Ld)(i.QL,(e=>{u.render((0,v.jsx)(l.Z,{message:e.message}),document.getElementById("root"))})),(0,o.j2)({handlers:{config:()=>{(0,n.mergeConfig)({AI_TRANSLATIONS_URL:null,CONTACT_URL:"https://courses.edx.org/support/contact_us",CREDENTIALS_BASE_URL:"https://credentials.edx.org",CREDIT_HELP_LINK_URL:null,DISCUSSIONS_MFE_BASE_URL:"https://discussions.edx.org",ENTERPRISE_LEARNER_PORTAL_HOSTNAME:"enterprise.edx.org",ENABLE_JUMPNAV:"true",ENABLE_NEW_SIDEBAR:"false",ENABLE_NOTICES:"true",INSIGHTS_BASE_URL:"https://insights.edx.org/",SEARCH_CATALOG_URL:"https://www.edx.org/search",SOCIAL_UTM_MILESTONE_CAMPAIGN:"edxmilestone",STUDIO_BASE_URL:"https://studio.edx.org",SUPPORT_URL:"https://support.edx.org",SUPPORT_URL_CALCULATOR_MATH:"https://support.edx.org/hc/en-us/articles/360000038428-Entering-math-expressions-in-assignments-or-the-calculator",SUPPORT_URL_ID_VERIFICATION:"https://support.edx.org/hc/en-us/articles/206503858-How-do-I-verify-my-identity",SUPPORT_URL_VERIFIED_CERTIFICATE:"https://support.edx.org/hc/en-us/articles/206502008-What-is-a-verified-certificate",TERMS_OF_SERVICE_URL:"https://www.edx.org/edx-terms-service",TWITTER_HASHTAG:"myedxjourney",TWITTER_URL:"https://twitter.com/edXOnline",LEGACY_THEME_NAME:null,EXAMS_BASE_URL:"https://edx-exams.edx.org",PROCTORED_EXAM_FAQ_URL:"https://support.edx.org/hc/en-us/articles/207249428-How-do-proctored-exams-work-",PROCTORED_EXAM_RULES_URL:"https://support.edx.org/hc/en-us/articles/360000218027-Proctored-exam-rules-and-requirements",CHAT_RESPONSE_URL:"https://courses.edx.org/api/learning_assistant/v1/course_id",PRIVACY_POLICY_URL:"https://www.edx.org/edx-privacy-policy"},"LearnerAppConfig")}},messages:[]})},37653:()=>{},13710:()=>{}},e=>{e.O(0,[601],(()=>(86712,e(e.s=86712)))),e.O()}]);
//# sourceMappingURL=app.20ce632cfcbcb56f307b.js.map